(self.webpackChunkshell=self.webpackChunkshell||[]).push([[829],{1913:(ne,B,w)=>{Object.defineProperty(B,"__esModule",{value:!0}),w(1635).__exportStar(w(5766),B)},3829:(ne,B,w)=>{w.r(B),w.d(B,{API_CONFIG:()=>b,API_ENDPOINTS:()=>R,AuthService:()=>N,BrandContextService:()=>V,CoreServicesComponent:()=>U,CoreServicesService:()=>L,DummyDataService:()=>q,EventBusService:()=>F,IncentiveRulesApiService:()=>y,IncentivesApiService:()=>_,MfeLoaderService:()=>re,ProductCategory:()=>x,RoleService:()=>X,SalesDataService:()=>W,SalesStatus:()=>D,SseControlService:()=>Q,SseFromEventService:()=>z,TargetsApiService:()=>O,TasksApiService:()=>T,UserRole:()=>v,cacheInterceptor:()=>ee,getApiUrl:()=>I,hasRequiredRole:()=>H,updateApiConfig:()=>h});var m=w(5565);let L=(()=>{class o{constructor(){}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var j=w(467),p=w(4866),P=w(1663),G=w(762),$=w.n(G);let F=(()=>{class o{constructor(){this.emitter=$()(),console.log("[EventBusService] Service initialized");const e=new Event("EventBusServiceCreated");this.onePlusNEvents=new p.ReplaySubject(100),this.onePlusNEvents.next(e.type),this.emitter.on("*",r=>{console.log("[EventBusService] Event received and forwarded to ReplaySubject:",r),this.onePlusNEvents.next(r)}),console.log("[EventBusService] Event listener registered for all events")}sendEvent(e){console.log("[EventBusService] sendEvent() called with:",e),this.emitter.emit(e),console.log("[EventBusService] Event emitted successfully")}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),N=(()=>{class o{constructor(e,r){this.http=e,this.eventBus=r,this.id="auth of pokemon",this.ISSUER_BASE_URL="https://topfix-wrczmn.us1.zitadel.cloud",this.CLIENT_ID="336777344075263315",this.REDIRECT_URI="https://opensourcekd.github.io/i17e/auth-callback",this.SCOPE="openid profile email",this.TOKEN_KEY="zitadel_token",this.USER_INFO_KEY="zitadel_user_info",this.userSubject=new p.BehaviorSubject(this.getUserInfoFromStorage()),this.user$=this.userSubject.asObservable(),console.log("In constructor of auth service in i17e")}login(e){e&&console.log(`in i17e [AuthService] Logged in: ${e}`),this.redirectToZitadelLogin()}redirectToZitadelLogin(){const e=new URL(`${this.ISSUER_BASE_URL}/oauth/v2/authorize`),r=this.generateRandomState(),a=this.generateCodeVerifier();sessionStorage.setItem("oauth_state",r),sessionStorage.setItem("code_verifier",a),e.searchParams.append("client_id",this.CLIENT_ID),e.searchParams.append("redirect_uri",this.REDIRECT_URI),e.searchParams.append("response_type","code"),e.searchParams.append("scope",this.SCOPE),e.searchParams.append("state",r),window.location.href=e.toString()}handleCallback(e,r){var a=this;return(0,j.A)(function*(){const t=sessionStorage.getItem("oauth_state");if(r!==t)return console.error("[AuthService] State mismatch - possible CSRF attack"),!1;try{const n=yield a.exchangeCodeForToken(e);a.setToken(n.access_token);const s=a.decodeIdToken(n.id_token);return a.setUserInfo(s),sessionStorage.removeItem("oauth_state"),sessionStorage.removeItem("code_verifier"),console.log("[AuthService] Authentication successful"),!0}catch(n){return console.error("[AuthService] Error exchanging code for token:",n),!1}})()}exchangeCodeForToken(e){var r=this;return(0,j.A)(function*(){const a=`${r.ISSUER_BASE_URL}/oauth/v2/token`,t=new URLSearchParams({grant_type:"authorization_code",code:e,redirect_uri:r.REDIRECT_URI,client_id:r.CLIENT_ID}),n=yield fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t.toString()});if(!n.ok)throw new Error(`Token exchange failed: ${n.statusText}`);return n.json()})()}decodeIdToken(e){try{const r=e.split(".")[1],a=JSON.parse(atob(r));return{sub:a.sub,name:a.name,email:a.email}}catch(r){return console.error("[AuthService] Error decoding ID token:",r),{sub:""}}}logout(){sessionStorage.removeItem(this.TOKEN_KEY),sessionStorage.removeItem(this.USER_INFO_KEY),this.userSubject.next(null),this.emitAuthEvent("logout",null),console.log("[AuthService] User logged out")}getToken(){return sessionStorage.getItem(this.TOKEN_KEY)}setToken(e){sessionStorage.setItem(this.TOKEN_KEY,e),this.emitAuthEvent("token_updated",{token:e})}isAuthenticated(){return!!this.getToken()}getUser(){return this.userSubject.value}getUserInfoFromStorage(){const e=sessionStorage.getItem(this.USER_INFO_KEY);return e?JSON.parse(e):null}setUserInfo(e){sessionStorage.setItem(this.USER_INFO_KEY,JSON.stringify(e)),this.userSubject.next(e),this.emitAuthEvent("user_info_updated",e)}emitAuthEvent(e,r){const a={type:`auth:${e}`,payload:r,timestamp:(new Date).toISOString()};this.eventBus.sendEvent(JSON.stringify(a)),console.log("[AuthService] Auth event emitted:",a.type)}generateRandomState(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}generateCodeVerifier(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}static{this.\u0275fac=function(r){return new(r||o)(m.\u0275\u0275inject(P.HttpClient),m.\u0275\u0275inject(F))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),U=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=m.\u0275\u0275defineComponent({type:o,selectors:[["org-core-services"]],standalone:!0,features:[m.\u0275\u0275StandaloneFeature],decls:2,vars:0,template:function(r,a){1&r&&(m.\u0275\u0275elementStart(0,"p"),m.\u0275\u0275text(1," core-services works! "),m.\u0275\u0275elementEnd())}})}}return o})();var v=function(o){return o.SUPER_ADMIN="super-admin",o.ORG_ADMIN="org-admin",o.TEAM_LEAD="team-lead",o.SALES_EXECUTIVE="sales-executive",o}(v||{});function H(o,f){const e={[v.SUPER_ADMIN]:4,[v.ORG_ADMIN]:3,[v.TEAM_LEAD]:2,[v.SALES_EXECUTIVE]:1};return e[o]>=e[f]}let X=(()=>{class o{constructor(){this.currentUserSubject=new p.BehaviorSubject(null),this.currentUser$=this.currentUserSubject.asObservable(),console.log("[RoleService] Service initialized"),this.loadInitialUser()}setUserFromAuth(e){console.log("[RoleService] Setting user from Zitadel auth:",e);const r=this.mapUserInfoToUser(e);console.log("[RoleService] Mapped user with role:",r),this.setCurrentUser(r)}mapUserInfoToUser(e){return{id:e.sub,name:e.name||e.email||"User",email:e.email||"",role:this.determineRoleFromEmail(e.email||"")}}determineRoleFromEmail(e){const r=e.toLowerCase();return[{patterns:["admin","super"],role:v.SUPER_ADMIN},{patterns:["manager","org"],role:v.ORG_ADMIN},{patterns:["lead","team"],role:v.TEAM_LEAD}].find(({patterns:n})=>n.some(s=>r.includes(s)))?.role??v.SALES_EXECUTIVE}loadInitialUser(){const e=this.getDevMimicUser();if(e)return console.log("[RoleService] Using dev mimic user:",e),void this.currentUserSubject.next(e);this.loadDummyUser()}getDevMimicUser(){try{const e=localStorage.getItem("dev_mimic_user");if(e){const r=JSON.parse(e);if(r.id&&r.name&&r.role)return r}}catch(e){console.error("[RoleService] Error parsing dev mimic user:",e)}return null}setDevMimicUser(e){e?(localStorage.setItem("dev_mimic_user",JSON.stringify(e)),this.currentUserSubject.next(e),console.log("[RoleService] Dev mimic user set:",e)):(localStorage.removeItem("dev_mimic_user"),this.loadDummyUser(),console.log("[RoleService] Dev mimic user cleared"))}loadDummyUser(){console.log("[RoleService] Loading user from session storage");const e=sessionStorage.getItem("current_user");if(e){const r=JSON.parse(e);console.log("[RoleService] User loaded from session:",r),this.currentUserSubject.next(r)}else{const r={id:"user-1",name:"John Admin",email:"john.admin@company.com",role:v.ORG_ADMIN};console.log("[RoleService] No saved user found, using default:",r),this.setCurrentUser(r)}}setCurrentUser(e){console.log("[RoleService] Setting current user:",e),this.currentUserSubject.next(e),e?(sessionStorage.setItem("current_user",JSON.stringify(e)),console.log("[RoleService] User saved to session storage")):(sessionStorage.removeItem("current_user"),console.log("[RoleService] User removed from session storage"))}getCurrentUser(){const e=this.currentUserSubject.value;return console.log("[RoleService] getCurrentUser() called, returning:",e),e}getCurrentUserRole(){const e=this.currentUserSubject.value?.role||null;return console.log("[RoleService] getCurrentUserRole() called, returning:",e),e}hasRole(e){const r=this.getCurrentUserRole();if(!r)return console.log("[RoleService] hasRole() - No current role, access denied"),!1;const a=H(r,e);return console.log(`[RoleService] hasRole() - Checking if ${r} has ${e}:`,a),a}canViewOthersData(){const e=this.getCurrentUserRole(),r=e===v.SUPER_ADMIN||e===v.ORG_ADMIN||e===v.TEAM_LEAD;return console.log(`[RoleService] canViewOthersData() - Role: ${e}, Can view:`,r),r}getViewableUsers(){const e=this.getCurrentUser();if(!e)return[];const r=this.getAllUsers();return this.isTeamLeadOrHigher()?r.filter(a=>a.role===v.SALES_EXECUTIVE||a.id===e.id):r.filter(a=>a.id===e.id)}hasAnyRole(e){const r=this.getCurrentUser();return!!r&&e.includes(r.role)}isAdmin(){return this.hasAnyRole([v.SUPER_ADMIN,v.ORG_ADMIN])}isTeamLeadOrHigher(){return this.hasAnyRole([v.SUPER_ADMIN,v.ORG_ADMIN,v.TEAM_LEAD])}getAllUsers(){return[{id:"user-1",name:"John Admin",email:"john.admin@company.com",role:v.SUPER_ADMIN},{id:"user-2",name:"Sarah Manager",email:"sarah.manager@company.com",role:v.ORG_ADMIN},{id:"user-3",name:"Mike Lead",email:"mike.lead@company.com",role:v.TEAM_LEAD,teamId:"team-1"},{id:"user-4",name:"Alice Sales",email:"alice.sales@company.com",role:v.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-5",name:"Bob Sales",email:"bob.sales@company.com",role:v.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-6",name:"Carol Sales",email:"carol.sales@company.com",role:v.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"}]}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var u=w(2778),D=function(o){return o.COMPLETED="completed",o.PENDING="pending",o.CANCELLED="cancelled",o}(D||{}),x=function(o){return o.ELECTRONICS="Electronics",o.SOFTWARE="Software",o.SERVICES="Services",o.HARDWARE="Hardware",o}(x||{});let W=(()=>{class o{constructor(){this.dummySalesData=this.generateDummyData(),console.log("IN sales data service of SHELLLL")}getSalesHistory(e,r,a){let t=this.dummySalesData.filter(n=>n.salesExecutiveId===e);return r&&(t=t.filter(n=>n.date>=r)),a&&(t=t.filter(n=>n.date<=a)),(0,p.of)(t).pipe((0,u.delay)(300))}getSalesSummary(e){const r=this.dummySalesData.filter(t=>t.salesExecutiveId===e),a={totalSales:r.filter(t=>t.status===D.COMPLETED).reduce((t,n)=>t+n.amount,0),totalCommission:r.filter(t=>t.status===D.COMPLETED).reduce((t,n)=>t+n.commission,0),completedCount:r.filter(t=>t.status===D.COMPLETED).length,pendingCount:r.filter(t=>t.status===D.PENDING).length,cancelledCount:r.filter(t=>t.status===D.CANCELLED).length};return(0,p.of)(a).pipe((0,u.delay)(300))}getAllSales(){return(0,p.of)(this.dummySalesData).pipe((0,u.delay)(300))}generateDummyData(){const e=[{name:"Enterprise Software License",category:x.SOFTWARE,basePrice:5e4},{name:"Cloud Storage Solution",category:x.SERVICES,basePrice:25e3},{name:"Server Hardware",category:x.HARDWARE,basePrice:35e3},{name:"IoT Device Package",category:x.ELECTRONICS,basePrice:15e3},{name:"Consulting Services",category:x.SERVICES,basePrice:2e4},{name:"Mobile App Development",category:x.SOFTWARE,basePrice:45e3},{name:"Security Suite",category:x.SOFTWARE,basePrice:3e4},{name:"Network Infrastructure",category:x.HARDWARE,basePrice:6e4}],r=["Acme Corporation","Tech Innovations Inc","Global Solutions Ltd","Digital Dynamics","Future Systems","Smart Technologies","Enterprise Solutions","Cloud Masters"],a=["North","South","East","West","Central"],t=[{id:"user-4",name:"Alice Sales"},{id:"user-5",name:"Bob Sales"},{id:"user-6",name:"Carol Sales"}],n=[D.COMPLETED,D.COMPLETED,D.COMPLETED,D.PENDING,D.CANCELLED],s=[];let i=1;for(let l=0;l<50;l++){const c=t[l%t.length],d=e[Math.floor(Math.random()*e.length)],E=r[Math.floor(Math.random()*r.length)],C=a[Math.floor(Math.random()*a.length)],g=n[Math.floor(Math.random()*n.length)],S=d.basePrice+(1e4*Math.random()-5e3),M=.05*S,J=new Date;J.setDate(J.getDate()-Math.floor(180*Math.random())),s.push({id:"sale-"+i++,salesExecutiveId:c.id,salesExecutiveName:c.name,productName:d.name,productCategory:d.category,amount:Math.round(S),commission:Math.round(M),status:g,date:J,clientName:E,region:C})}return s.sort((l,c)=>c.date.getTime()-l.date.getTime())}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),q=(()=>{class o{constructor(){this.salesExecutivesSubject=new p.BehaviorSubject(this.generateSalesExecutives()),this.salesExecutives$=this.salesExecutivesSubject.asObservable(),this.salesRecordsSubject=new p.BehaviorSubject(this.generateSalesRecords()),this.salesRecords$=this.salesRecordsSubject.asObservable(),this.incentiveRulesSubject=new p.BehaviorSubject(this.generateIncentiveRules()),this.incentiveRules$=this.incentiveRulesSubject.asObservable(),this.incentivesEarnedSubject=new p.BehaviorSubject(this.generateIncentivesEarned()),this.incentivesEarned$=this.incentivesEarnedSubject.asObservable(),console.log("[DummyDataService] Service initialized"),console.log("[DummyDataService] Generated data:",{salesExecutives:this.salesExecutivesSubject.value.length,salesRecords:this.salesRecordsSubject.value.length,incentiveRules:this.incentiveRulesSubject.value.length,incentivesEarned:this.incentivesEarnedSubject.value.length})}generateSalesExecutives(){return console.log("[DummyDataService] Generating sales executives"),[{id:"user-1",name:"John Admin",email:"john.admin@company.com",teamId:"team-1"},{id:"user-2",name:"Sarah Manager",email:"sarah.manager@company.com",teamId:"team-1"},{id:"user-3",name:"Mike Lead",email:"mike.lead@company.com",teamId:"team-1"},{id:"user-4",name:"Alice Sales",email:"alice.sales@company.com",teamId:"team-1"},{id:"user-5",name:"Bob Sales",email:"bob.sales@company.com",teamId:"team-1"},{id:"user-6",name:"Carol Sales",email:"carol.sales@company.com",teamId:"team-1"}]}generateSalesRecords(){console.log("[DummyDataService] Generating sales records");const e=[],r=this.generateSalesExecutives(),a=["Product A","Product B","Product C","Product D"],t=[D.COMPLETED,D.PENDING,D.CANCELLED];for(let n=0;n<50;n++){const s=r[n%r.length],i=Math.floor(n/10),l=new Date;l.setMonth(l.getMonth()-i),e.push({id:`sale-${n+1}`,salesExecutiveId:s.id,salesExecutiveName:s.name,date:l,productName:a[n%a.length],productCategory:x.SOFTWARE,amount:Math.floor(5e4*Math.random())+1e4,commission:Math.floor(5e3*Math.random()),quantity:Math.floor(10*Math.random())+1,status:t[n%t.length],clientName:`Client ${n+1}`,region:["North","South","East","West"][n%4]})}return e}generateIncentiveRules(){return console.log("[DummyDataService] Generating incentive rules"),[{id:"rule-1",name:"Basic Sales Incentive",description:"5% incentive on all sales",type:"percentage",value:5,isActive:!0,createdBy:"admin",createdAt:new Date("2024-01-01")},{id:"rule-2",name:"High Value Sales Bonus",description:"10% incentive on sales above $50,000",type:"percentage",value:10,minSalesAmount:5e4,isActive:!0,createdBy:"admin",createdAt:new Date("2024-02-01")},{id:"rule-3",name:"Product A Special",description:"Fixed $500 bonus for Product A sales",type:"fixed",value:500,productCategory:"Product A",isActive:!0,createdBy:"team-lead-1",createdAt:new Date("2024-03-01")},{id:"rule-4",name:"Tiered Volume Incentive",description:"15% incentive on sales above $100,000",type:"tiered",value:15,minSalesAmount:1e5,isActive:!1,createdBy:"admin",createdAt:new Date("2024-04-01")}]}generateIncentivesEarned(){console.log("[DummyDataService] Generating incentives earned");const e=[],r=this.generateSalesExecutives(),a=this.generateIncentiveRules(),t=["pending","approved","paid"];for(let n=0;n<30;n++){const s=r[n%r.length],i=a[n%a.length],l=Math.floor(n/10),c=new Date;c.setMonth(c.getMonth()-l),e.push({id:`incentive-${n+1}`,salesExecutiveId:s.id,salesExecutiveName:s.name,ruleId:i.id,ruleName:i.name,salesRecordId:`sale-${n+1}`,amount:Math.floor(5e3*Math.random())+500,earnedDate:c,status:t[n%3]})}return e}getSalesRecordsForExecutive(e){console.log("[DummyDataService] getSalesRecordsForExecutive() called for:",e);const r=this.salesRecordsSubject.value.filter(a=>a.salesExecutiveId===e);return console.log("[DummyDataService] Found",r.length,"sales records for executive:",e),r}getIncentivesForExecutive(e){console.log("[DummyDataService] getIncentivesForExecutive() called for:",e);const r=this.incentivesEarnedSubject.value.filter(a=>a.salesExecutiveId===e);return console.log("[DummyDataService] Found",r.length,"incentives for executive:",e),r}getReportDataForExecutive(e){console.log("[DummyDataService] getReportDataForExecutive() called for:",e);const r=this.salesExecutivesSubject.value.find(c=>c.id===e),a=this.getSalesRecordsForExecutive(e),t=this.getIncentivesForExecutive(e),n=a.filter(c=>"completed"===c.status).reduce((c,d)=>c+d.amount,0),s=t.filter(c=>"pending"!==c.status).reduce((c,d)=>c+d.amount,0),i=[];for(let c=5;c>=0;c--){const d=new Date;d.setMonth(d.getMonth()-c);const E=d.toISOString().substring(0,7),C=a.filter(S=>S.date.toISOString().substring(0,7)===E&&"completed"===S.status).reduce((S,M)=>S+M.amount,0),g=t.filter(S=>S.earnedDate.toISOString().substring(0,7)===E&&"pending"!==S.status).reduce((S,M)=>S+M.amount,0);i.push({month:E,sales:C,incentives:g})}const l={salesExecutiveId:e,salesExecutiveName:r?.name||"Unknown",totalSales:n,totalIncentives:s,period:"Last 6 months",breakdown:i};return console.log("[DummyDataService] Report data generated:",l),l}getSalesExecutives(){const e=this.salesExecutivesSubject.value;return console.log("[DummyDataService] getSalesExecutives() called, returning",e.length,"executives"),e}getIncentiveRules(){const e=this.incentiveRulesSubject.value;return console.log("[DummyDataService] getIncentiveRules() called, returning",e.length,"rules"),e}addIncentiveRule(e){console.log("[DummyDataService] addIncentiveRule() called with:",e),this.incentiveRulesSubject.next([...this.incentiveRulesSubject.value,e]),console.log("[DummyDataService] Rule added successfully, total rules:",this.incentiveRulesSubject.value.length)}updateIncentiveRule(e,r){console.log("[DummyDataService] updateIncentiveRule() called for rule:",e,"with updates:",r);const t=this.incentiveRulesSubject.value.map(n=>n.id===e?{...n,...r}:n);this.incentiveRulesSubject.next(t),console.log("[DummyDataService] Rule updated successfully")}deleteIncentiveRule(e){console.log("[DummyDataService] deleteIncentiveRule() called for rule:",e);const a=this.incentiveRulesSubject.value.filter(t=>t.id!==e);this.incentiveRulesSubject.next(a),console.log("[DummyDataService] Rule deleted successfully, remaining rules:",this.incentiveRulesSubject.value.length)}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Z=w(1913);let re=(()=>{class o{constructor(){this.mfeConfigs=[],this.loadedMfesSubject=new p.BehaviorSubject(new Set),this.loadedMfes$=this.loadedMfesSubject.asObservable(),this.loadingMfesSubject=new p.BehaviorSubject(new Set),this.loadingMfes$=this.loadingMfesSubject.asObservable(),console.log("[MfeLoaderService] Service initialized")}setConfigs(e){console.log("[MfeLoaderService] setConfigs() called with",e.length,"configurations"),this.mfeConfigs=e.sort((r,a)=>a.priority-r.priority),console.log("[MfeLoaderService] Configurations sorted by priority:",this.mfeConfigs.map(r=>({name:r.name,priority:r.priority})))}getConfigs(){return console.log("[MfeLoaderService] getConfigs() called, returning",this.mfeConfigs.length,"configurations"),this.mfeConfigs}getConfigsForRole(e){console.log("[MfeLoaderService] getConfigsForRole() called for role:",e);const r=this.mfeConfigs.filter(a=>a.allowedRoles.includes(e));return console.log("[MfeLoaderService] Found",r.length,"configurations for role:",e,r.map(a=>a.name)),r}getConfigByName(e){console.log("[MfeLoaderService] getConfigByName() called for:",e);const r=this.mfeConfigs.find(a=>a.name===e);return r?console.log("[MfeLoaderService] Found configuration for:",e):console.warn("[MfeLoaderService] Configuration not found for:",e),r}preloadPriorityMfes(e){var r=this;return(0,j.A)(function*(){console.log("[MfeLoaderService] preloadPriorityMfes() called for role:",e);const t=r.getConfigsForRole(e).filter(s=>s.priority>=5);console.log("[MfeLoaderService] Preloading",t.length,"priority MFEs:",t.map(s=>({name:s.name,priority:s.priority})));const n=t.map(s=>r.loadMfe(s));yield Promise.all(n),console.log("[MfeLoaderService] Preloading complete")})()}loadMfe(e){var r=this;return(0,j.A)(function*(){const a=r.loadingMfesSubject.value,t=r.loadedMfesSubject.value;if(t.has(e.name))console.log(`[MfeLoaderService] MFE ${e.name} already loaded`);else if(a.has(e.name))console.log(`[MfeLoaderService] MFE ${e.name} is already loading`);else try{const n=new Set(a);n.add(e.name),r.loadingMfesSubject.next(n),console.log(`[MfeLoaderService] Loading MFE ${e.name} (priority: ${e.priority})`),console.log("[MfeLoaderService] MFE config:",{name:e.name,url:e.url,exposedModule:e.exposedModule,remoteName:e.remoteName});const s=yield(0,Z.loadRemoteModule)({type:"module",remoteEntry:e.url,exposedModule:e.exposedModule}),i=new Set(t);i.add(e.name),r.loadedMfesSubject.next(i);const l=new Set(r.loadingMfesSubject.value);return l.delete(e.name),r.loadingMfesSubject.next(l),console.log(`[MfeLoaderService] Successfully loaded MFE ${e.name}`),console.log("[MfeLoaderService] Currently loaded MFEs:",Array.from(r.loadedMfesSubject.value)),s}catch(n){console.error(`[MfeLoaderService] Error loading MFE ${e.name}:`,n),console.error("[MfeLoaderService] Failed config:",{name:e.name,url:e.url,exposedModule:e.exposedModule});const s=new Set(r.loadingMfesSubject.value);throw s.delete(e.name),r.loadingMfesSubject.next(s),n}})()}isMfeLoaded(e){const r=this.loadedMfesSubject.value.has(e);return console.log(`[MfeLoaderService] isMfeLoaded(${e}):`,r),r}isMfeLoading(e){const r=this.loadingMfesSubject.value.has(e);return console.log(`[MfeLoaderService] isMfeLoading(${e}):`,r),r}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),z=(()=>{class o{constructor(e){this.zone=e}listen(){const e=new EventSource("https://stream.wikimedia.org/v2/stream/recentchange");return(0,p.fromEvent)(e,"message").pipe((0,u.map)(r=>{let a;return this.zone.run(()=>a=r.data),a}))}static{this.\u0275fac=function(r){return new(r||o)(m.\u0275\u0275inject(m.NgZone))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),Q=(()=>{class o{constructor(e){this.zone=e}start(e){this.eventSource=new EventSource(e);const r=this.eventSource;return new p.Observable(a=>{const t=(0,p.fromEvent)(r,"message").subscribe(n=>{this.zone.run(()=>a.next(n.data))});return r.onerror=n=>{this.zone.run(()=>a.error(n))},()=>{t.unsubscribe(),r.close()}})}stop(){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0)}static{this.\u0275fac=function(r){return new(r||o)(m.\u0275\u0275inject(m.NgZone))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();const ee=(o,f)=>new p.Observable(e=>{let r;return(0,j.A)(function*(){const{urlWithParams:t}=o,s=yield caches.open("http"),i=yield s.match(t);if(i){let l;console.log("Serve from Cache for",t);try{l=yield i.clone().json()}catch{l=yield i.clone().text()}return e.next(new P.HttpResponse({body:l,status:i.status||200,url:o.urlWithParams})),void e.complete()}var l;r=f(o).subscribe({next:(l=(0,j.A)(function*(c){if(console.log("Cache miss for ",t),e.next(c),c instanceof P.HttpResponse&&c.ok){const d=new Response(JSON.stringify(c.body),{headers:{"Content-Type":"application/json"},status:c.status,statusText:c.statusText});yield s.put(o.urlWithParams,d)}}),function(d){return l.apply(this,arguments)}),error:l=>e.error(l),complete:()=>e.complete()})})(),()=>r?.unsubscribe()});let V=(()=>{class o{constructor(){this.DEFAULT_BRAND_ID="default",this.STORAGE_KEY="current_brand_id";const e=this.getStoredBrandId();this.brandIdSubject=new p.BehaviorSubject(e),this.brandId$=this.brandIdSubject.asObservable()}getStoredBrandId(){return sessionStorage.getItem(this.STORAGE_KEY)??this.DEFAULT_BRAND_ID}getBrandId(){return this.brandIdSubject.value}setBrandId(e){e?.trim()||(console.warn("[BrandContextService] Invalid brand ID, using default"),e=this.DEFAULT_BRAND_ID),sessionStorage.setItem(this.STORAGE_KEY,e),this.brandIdSubject.next(e),console.log("[BrandContextService] Brand ID updated to:",e)}resetToDefault(){this.setBrandId(this.DEFAULT_BRAND_ID)}clear(){sessionStorage.removeItem(this.STORAGE_KEY),this.brandIdSubject.next(this.DEFAULT_BRAND_ID)}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();const b={baseUrl:"https://7f1m8qlvpd.execute-api.us-east-1.amazonaws.com/db",timeout:3e4},R={health:o=>`/health?brandId=${o}`,info:"/",seed:o=>`/seed/${o}`,clearData:o=>`/data/${o}`,users:{list:o=>`/users/${o}`,getById:(o,f)=>`/users/${o}/${f}`,create:o=>`/users/${o}`},incentiveRules:{list:o=>`/incentive-rules/${o}`,getById:(o,f)=>`/incentive-rules/${o}/${f}`,create:o=>`/incentive-rules/${o}`,update:(o,f)=>`/incentive-rules/${o}/${f}`,delete:(o,f)=>`/incentive-rules/${o}/${f}`},incentives:{list:(o,f)=>{const e=new URLSearchParams;f?.userId&&e.append("userId",f.userId),f?.status&&e.append("status",f.status);const r=e.toString();return`/incentives/${o}${r?"?"+r:""}`},getById:(o,f)=>`/incentives/${o}/${f}`,create:o=>`/incentives/${o}`,update:(o,f)=>`/incentives/${o}/${f}`},targets:{list:(o,f)=>{const e=new URLSearchParams;f?.userId&&e.append("userId",f.userId),f?.status&&e.append("status",f.status);const r=e.toString();return`/targets/${o}${r?"?"+r:""}`},getById:(o,f)=>`/targets/${o}/${f}`,create:o=>`/targets/${o}`,update:(o,f)=>`/targets/${o}/${f}`,delete:(o,f)=>`/targets/${o}/${f}`},tasks:{list:(o,f)=>{const e=new URLSearchParams;f?.userId&&e.append("userId",f.userId),f?.status&&e.append("status",f.status);const r=e.toString();return`/tasks/${o}${r?"?"+r:""}`},getById:(o,f)=>`/tasks/${o}/${f}`,create:o=>`/tasks/${o}`,update:(o,f)=>`/tasks/${o}/${f}`,delete:(o,f)=>`/tasks/${o}/${f}`}},I=(o,f=b)=>`${f.baseUrl}${o}`,h=o=>{Object.assign(b,o)};let y=(()=>{class o{constructor(e,r){this.http=e,this.brandContext=r}getRules(){const e=this.brandContext.getBrandId(),r=R.incentiveRules.list(e),a=I(r);return this.http.get(a).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(t=>t.data),(0,u.catchError)(this.handleError("getRules",[])))}getRuleById(e){if(!this.isValidId(e))return(0,p.of)(null);const r=this.brandContext.getBrandId(),a=R.incentiveRules.getById(r,e),t=I(a);return this.http.get(t).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(n=>n.data),(0,u.catchError)(this.handleError("getRuleById",null)))}createRule(e){if(!this.isValidRuleRequest(e))return console.error("[IncentiveRulesApiService] Invalid rule request"),(0,p.of)(null);const r=this.brandContext.getBrandId(),a=R.incentiveRules.create(r),t=I(a);return this.http.post(t,e).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(n=>n.data),(0,u.catchError)(this.handleError("createRule",null)))}updateRule(e,r){if(!this.isValidId(e))return(0,p.of)(null);const a=this.brandContext.getBrandId(),t=R.incentiveRules.update(a,e),n=I(t);return this.http.put(n,r).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(s=>s.data),(0,u.catchError)(this.handleError("updateRule",null)))}deleteRule(e){if(!this.isValidId(e))return(0,p.of)(!1);const r=this.brandContext.getBrandId(),a=R.incentiveRules.delete(r,e),t=I(a);return this.http.delete(t).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(()=>!0),(0,u.catchError)(this.handleError("deleteRule",!1)))}isValidId(e){return!!e&&e.trim().length>0}isValidRuleRequest(e){return!!(e.name?.trim()&&e.description?.trim()&&e.type&&"number"==typeof e.value)}handleError(e,r){return a=>{console.error(`[IncentiveRulesApiService] ${e} failed:`,a);const t=this.extractApiError(a);return console.error("[IncentiveRulesApiService] API Error:",t),void 0!==r?(0,p.of)(r):(0,p.throwError)(()=>a)}}extractApiError(e){return e.error&&"object"==typeof e.error?e.error:{error:e.statusText||"Unknown Error",message:e.message||"An unexpected error occurred",statusCode:e.status,timestamp:(new Date).toISOString()}}static{this.\u0275fac=function(r){return new(r||o)(m.\u0275\u0275inject(P.HttpClient),m.\u0275\u0275inject(V))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),_=(()=>{class o{constructor(e,r){this.http=e,this.brandContext=r}getIncentives(e){const r=this.brandContext.getBrandId(),a=R.incentives.list(r,e),t=I(a);return this.http.get(t).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(n=>n.data),(0,u.catchError)(this.handleError("getIncentives",[])))}getIncentiveById(e){if(!this.isValidId(e))return(0,p.of)(null);const r=this.brandContext.getBrandId(),a=R.incentives.getById(r,e),t=I(a);return this.http.get(t).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(n=>n.data),(0,u.catchError)(this.handleError("getIncentiveById",null)))}createIncentive(e){if(!this.isValidIncentiveRequest(e))return console.error("[IncentivesApiService] Invalid incentive request"),(0,p.of)(null);const r=this.brandContext.getBrandId(),a=R.incentives.create(r),t=I(a);return this.http.post(t,e).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(n=>n.data),(0,u.catchError)(this.handleError("createIncentive",null)))}updateIncentive(e,r){if(!this.isValidId(e))return(0,p.of)(null);const a=this.brandContext.getBrandId(),t=R.incentives.update(a,e),n=I(t);return this.http.put(n,r).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(s=>s.data),(0,u.catchError)(this.handleError("updateIncentive",null)))}isValidId(e){return!!e&&e.trim().length>0}isValidIncentiveRequest(e){return!!(e.userId?.trim()&&e.ruleId?.trim()&&"number"==typeof e.amount&&e.earnedDate)}handleError(e,r){return a=>{console.error(`[IncentivesApiService] ${e} failed:`,a);const t=this.extractApiError(a);return console.error("[IncentivesApiService] API Error:",t),void 0!==r?(0,p.of)(r):(0,p.throwError)(()=>a)}}extractApiError(e){return e.error&&"object"==typeof e.error?e.error:{error:e.statusText||"Unknown Error",message:e.message||"An unexpected error occurred",statusCode:e.status,timestamp:(new Date).toISOString()}}static{this.\u0275fac=function(r){return new(r||o)(m.\u0275\u0275inject(P.HttpClient),m.\u0275\u0275inject(V))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),O=(()=>{class o{constructor(e,r){this.http=e,this.brandContext=r}getTargets(e){const r=this.brandContext.getBrandId(),a=R.targets.list(r,e),t=I(a);return this.http.get(t).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(n=>n.data),(0,u.catchError)(this.handleError("getTargets",[])))}getTargetById(e){if(!this.isValidId(e))return(0,p.of)(null);const r=this.brandContext.getBrandId(),a=R.targets.getById(r,e),t=I(a);return this.http.get(t).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(n=>n.data),(0,u.catchError)(this.handleError("getTargetById",null)))}createTarget(e){if(!this.isValidTargetRequest(e))return console.error("[TargetsApiService] Invalid target request"),(0,p.of)(null);const r=this.brandContext.getBrandId(),a=R.targets.create(r),t=I(a);return this.http.post(t,e).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(n=>n.data),(0,u.catchError)(this.handleError("createTarget",null)))}updateTarget(e,r){if(!this.isValidId(e))return(0,p.of)(null);const a=this.brandContext.getBrandId(),t=R.targets.update(a,e),n=I(t);return this.http.put(n,r).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(s=>s.data),(0,u.catchError)(this.handleError("updateTarget",null)))}deleteTarget(e){if(!this.isValidId(e))return(0,p.of)(!1);const r=this.brandContext.getBrandId(),a=R.targets.delete(r,e),t=I(a);return this.http.delete(t).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(()=>!0),(0,u.catchError)(this.handleError("deleteTarget",!1)))}isValidId(e){return!!e&&e.trim().length>0}isValidTargetRequest(e){return!!(e.userId?.trim()&&e.name?.trim()&&"number"==typeof e.targetValue&&e.unit?.trim()&&e.startDate&&e.endDate)}handleError(e,r){return a=>{console.error(`[TargetsApiService] ${e} failed:`,a);const t=this.extractApiError(a);return console.error("[TargetsApiService] API Error:",t),void 0!==r?(0,p.of)(r):(0,p.throwError)(()=>a)}}extractApiError(e){return e.error&&"object"==typeof e.error?e.error:{error:e.statusText||"Unknown Error",message:e.message||"An unexpected error occurred",statusCode:e.status,timestamp:(new Date).toISOString()}}static{this.\u0275fac=function(r){return new(r||o)(m.\u0275\u0275inject(P.HttpClient),m.\u0275\u0275inject(V))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),T=(()=>{class o{constructor(e,r){this.http=e,this.brandContext=r}getTasks(e){const r=this.brandContext.getBrandId(),a=R.tasks.list(r,e),t=I(a);return this.http.get(t).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(n=>n.data),(0,u.catchError)(this.handleError("getTasks",[])))}getTaskById(e){if(!this.isValidId(e))return(0,p.of)(null);const r=this.brandContext.getBrandId(),a=R.tasks.getById(r,e),t=I(a);return this.http.get(t).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(n=>n.data),(0,u.catchError)(this.handleError("getTaskById",null)))}createTask(e){if(!this.isValidTaskRequest(e))return console.error("[TasksApiService] Invalid task request"),(0,p.of)(null);const r=this.brandContext.getBrandId(),a=R.tasks.create(r),t=I(a);return this.http.post(t,e).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(n=>n.data),(0,u.catchError)(this.handleError("createTask",null)))}updateTask(e,r){if(!this.isValidId(e))return(0,p.of)(null);const a=this.brandContext.getBrandId(),t=R.tasks.update(a,e),n=I(t);return this.http.put(n,r).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(s=>s.data),(0,u.catchError)(this.handleError("updateTask",null)))}deleteTask(e){if(!this.isValidId(e))return(0,p.of)(!1);const r=this.brandContext.getBrandId(),a=R.tasks.delete(r,e),t=I(a);return this.http.delete(t).pipe((0,u.timeout)(b.timeout??3e4),(0,u.map)(()=>!0),(0,u.catchError)(this.handleError("deleteTask",!1)))}isValidId(e){return!!e&&e.trim().length>0}isValidTaskRequest(e){return!!(e.userId?.trim()&&e.title?.trim()&&e.priority)}handleError(e,r){return a=>{console.error(`[TasksApiService] ${e} failed:`,a);const t=this.extractApiError(a);return console.error("[TasksApiService] API Error:",t),void 0!==r?(0,p.of)(r):(0,p.throwError)(()=>a)}}extractApiError(e){return e.error&&"object"==typeof e.error?e.error:{error:e.statusText||"Unknown Error",message:e.message||"An unexpected error occurred",statusCode:e.status,timestamp:(new Date).toISOString()}}static{this.\u0275fac=function(r){return new(r||o)(m.\u0275\u0275inject(P.HttpClient),m.\u0275\u0275inject(V))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})()},5766:(ne,B,w)=>{w.r(B),w.d(B,{getManifest:()=>re,initFederation:()=>z,loadManifest:()=>ee,loadRemoteEntry:()=>U,loadRemoteModule:()=>x,setManifest:()=>q});var m=w(467);let L={};const j={},p={};let P=!1;function $(){return($=(0,m.A)(function*(h,y){return(yield j[h].get(y))()})).apply(this,arguments)}function F(h,y){return N.apply(this,arguments)}function N(){return(N=(0,m.A)(function*(h,y){return p[y]||(P||(yield w.I("default"),P=!0),yield h.init(w.S.default),p[y]=!0),h})).apply(this,arguments)}function U(h,y){return v.apply(this,arguments)}function v(){return v=(0,m.A)(function*(h,y){if("string"==typeof h)return yield u(h,y);if("script"===h.type){const _=h;return yield u(_.remoteEntry,_.remoteName)}"module"===h.type&&(yield function H(h){return X.apply(this,arguments)}(h.remoteEntry))}),v.apply(this,arguments)}function X(){return(X=(0,m.A)(function*(h){return j[h]?Promise.resolve():yield import(h).then(y=>{F(y,h),j[h]=y})})).apply(this,arguments)}function u(h,y){return D.apply(this,arguments)}function D(){return(D=(0,m.A)(function*(h,y){return new Promise((_,O)=>{if(j[y])return void _();const T=document.createElement("script");T.src=h,T.onerror=O,T.onload=()=>{const o=window[y];F(o,y),j[y]=o,_()},document.body.appendChild(T)})})).apply(this,arguments)}function x(h,y){return W.apply(this,arguments)}function W(){return W=(0,m.A)(function*(h,y){let _,O,T,o;if(o="string"==typeof h?{type:"manifest",remoteName:h,exposedModule:y}:h,!o.type){const f=Object.keys(L).length>0;o.type=f?"manifest":"script"}if("manifest"===o.type){const f=L[o.remoteName];if(!f)throw new Error("Manifest does not contain "+o.remoteName);o={type:f.type,exposedModule:o.exposedModule,remoteEntry:f.remoteEntry,remoteName:"script"===f.type?o.remoteName:void 0},T=f.remoteEntry}else T=o.remoteEntry;return"script"===o.type?(_={type:"script",remoteEntry:o.remoteEntry,remoteName:o.remoteName},O=o.remoteName):"module"===o.type&&(_={type:"module",remoteEntry:o.remoteEntry},O=o.remoteEntry),T&&(yield U(_)),yield function G(h,y){return $.apply(this,arguments)}(O,o.exposedModule)}),W.apply(this,arguments)}function q(h){return Z.apply(this,arguments)}function Z(){return(Z=(0,m.A)(function*(h,y=!1){L=b(h),y||(yield R())})).apply(this,arguments)}function re(){return L}function z(h){return Q.apply(this,arguments)}function Q(){return(Q=(0,m.A)(function*(h,y=!1){return"string"==typeof h?ee(h,y):q(h,y)})).apply(this,arguments)}function ee(h){return V.apply(this,arguments)}function V(){return(V=(0,m.A)(function*(h,y=!1){const _=yield fetch(h);if(!_.ok)throw Error("could not load configFile: "+h);L=b(yield _.json()),y||(yield R())})).apply(this,arguments)}function b(h){const y={};for(const _ in h){const O=h[_];let T;T="string"==typeof O?{remoteEntry:O,type:"module"}:{...O,type:O.type||"module"},y[_]=T}return y}function R(){return I.apply(this,arguments)}function I(){return(I=(0,m.A)(function*(){const h=[];for(const y in L){const _=L[y];h.push(U("module"===_.type?{type:"module",remoteEntry:_.remoteEntry}:{type:"script",remoteEntry:_.remoteEntry,remoteName:y}))}yield Promise.all(h)})).apply(this,arguments)}},467:(ne,B,w)=>{function m(j,p,P,G,$,F,N){try{var U=j[F](N),v=U.value}catch(H){return void P(H)}U.done?p(v):Promise.resolve(v).then(G,$)}function L(j){return function(){var p=this,P=arguments;return new Promise(function(G,$){var F=j.apply(p,P);function N(v){m(F,G,$,N,U,"next",v)}function U(v){m(F,G,$,N,U,"throw",v)}N(void 0)})}}w.d(B,{A:()=>L})},1635:(ne,B,w)=>{w.r(B),w.d(B,{__addDisposableResource:()=>o,__assign:()=>j,__asyncDelegator:()=>ee,__asyncGenerator:()=>Q,__asyncValues:()=>V,__await:()=>z,__awaiter:()=>H,__classPrivateFieldGet:()=>_,__classPrivateFieldIn:()=>T,__classPrivateFieldSet:()=>O,__createBinding:()=>u,__decorate:()=>P,__disposeResources:()=>e,__esDecorate:()=>$,__exportStar:()=>D,__extends:()=>L,__generator:()=>X,__importDefault:()=>y,__importStar:()=>h,__makeTemplateObject:()=>b,__metadata:()=>v,__param:()=>G,__propKey:()=>N,__read:()=>W,__rest:()=>p,__rewriteRelativeImportExtension:()=>r,__runInitializers:()=>F,__setFunctionName:()=>U,__spread:()=>q,__spreadArray:()=>re,__spreadArrays:()=>Z,__values:()=>x,default:()=>a});var m=function(t,n){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(s[l]=i[l])})(t,n)};function L(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=t}m(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}var j=function(){return j=Object.assign||function(n){for(var s,i=1,l=arguments.length;i<l;i++)for(var c in s=arguments[i])Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c]);return n},j.apply(this,arguments)};function p(t,n){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(s[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(t);l<i.length;l++)n.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(s[i[l]]=t[i[l]])}return s}function P(t,n,s,i){var d,l=arguments.length,c=l<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,n,s,i);else for(var E=t.length-1;E>=0;E--)(d=t[E])&&(c=(l<3?d(c):l>3?d(n,s,c):d(n,s))||c);return l>3&&c&&Object.defineProperty(n,s,c),c}function G(t,n){return function(s,i){n(s,i,t)}}function $(t,n,s,i,l,c){function d(te){if(void 0!==te&&"function"!=typeof te)throw new TypeError("Function expected");return te}for(var M,E=i.kind,C="getter"===E?"get":"setter"===E?"set":"value",g=!n&&t?i.static?t:t.prototype:null,S=n||(g?Object.getOwnPropertyDescriptor(g,i.name):{}),J=!1,A=s.length-1;A>=0;A--){var k={};for(var K in i)k[K]="access"===K?{}:i[K];for(var K in i.access)k.access[K]=i.access[K];k.addInitializer=function(te){if(J)throw new TypeError("Cannot add initializers after decoration has completed");c.push(d(te||null))};var Y=(0,s[A])("accessor"===E?{get:S.get,set:S.set}:S[C],k);if("accessor"===E){if(void 0===Y)continue;if(null===Y||"object"!=typeof Y)throw new TypeError("Object expected");(M=d(Y.get))&&(S.get=M),(M=d(Y.set))&&(S.set=M),(M=d(Y.init))&&l.unshift(M)}else(M=d(Y))&&("field"===E?l.unshift(M):S[C]=M)}g&&Object.defineProperty(g,i.name,S),J=!0}function F(t,n,s){for(var i=arguments.length>2,l=0;l<n.length;l++)s=i?n[l].call(t,s):n[l].call(t);return i?s:void 0}function N(t){return"symbol"==typeof t?t:"".concat(t)}function U(t,n,s){return"symbol"==typeof n&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:s?"".concat(s," ",n):n})}function v(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)}function H(t,n,s,i){return new(s||(s=Promise))(function(c,d){function E(S){try{g(i.next(S))}catch(M){d(M)}}function C(S){try{g(i.throw(S))}catch(M){d(M)}}function g(S){S.done?c(S.value):function l(c){return c instanceof s?c:new s(function(d){d(c)})}(S.value).then(E,C)}g((i=i.apply(t,n||[])).next())})}function X(t,n){var i,l,c,s={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]},d=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return d.next=E(0),d.throw=E(1),d.return=E(2),"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d;function E(g){return function(S){return function C(g){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(s=0)),s;)try{if(i=1,l&&(c=2&g[0]?l.return:g[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,g[1])).done)return c;switch(l=0,c&&(g=[2&g[0],c.value]),g[0]){case 0:case 1:c=g;break;case 4:return s.label++,{value:g[1],done:!1};case 5:s.label++,l=g[1],g=[0];continue;case 7:g=s.ops.pop(),s.trys.pop();continue;default:if(!(c=(c=s.trys).length>0&&c[c.length-1])&&(6===g[0]||2===g[0])){s=0;continue}if(3===g[0]&&(!c||g[1]>c[0]&&g[1]<c[3])){s.label=g[1];break}if(6===g[0]&&s.label<c[1]){s.label=c[1],c=g;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(g);break}c[2]&&s.ops.pop(),s.trys.pop();continue}g=n.call(t,s)}catch(S){g=[6,S],l=0}finally{i=c=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([g,S])}}}var u=Object.create?function(t,n,s,i){void 0===i&&(i=s);var l=Object.getOwnPropertyDescriptor(n,s);(!l||("get"in l?!n.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(t,i,l)}:function(t,n,s,i){void 0===i&&(i=s),t[i]=n[s]};function D(t,n){for(var s in t)"default"!==s&&!Object.prototype.hasOwnProperty.call(n,s)&&u(n,t,s)}function x(t){var n="function"==typeof Symbol&&Symbol.iterator,s=n&&t[n],i=0;if(s)return s.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(t,n){var s="function"==typeof Symbol&&t[Symbol.iterator];if(!s)return t;var l,d,i=s.call(t),c=[];try{for(;(void 0===n||n-- >0)&&!(l=i.next()).done;)c.push(l.value)}catch(E){d={error:E}}finally{try{l&&!l.done&&(s=i.return)&&s.call(i)}finally{if(d)throw d.error}}return c}function q(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(W(arguments[n]));return t}function Z(){for(var t=0,n=0,s=arguments.length;n<s;n++)t+=arguments[n].length;var i=Array(t),l=0;for(n=0;n<s;n++)for(var c=arguments[n],d=0,E=c.length;d<E;d++,l++)i[l]=c[d];return i}function re(t,n,s){if(s||2===arguments.length)for(var c,i=0,l=n.length;i<l;i++)(c||!(i in n))&&(c||(c=Array.prototype.slice.call(n,0,i)),c[i]=n[i]);return t.concat(c||Array.prototype.slice.call(n))}function z(t){return this instanceof z?(this.v=t,this):new z(t)}function Q(t,n,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,i=s.apply(t,n||[]),c=[];return l=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),E("next"),E("throw"),E("return",function d(A){return function(k){return Promise.resolve(k).then(A,M)}}),l[Symbol.asyncIterator]=function(){return this},l;function E(A,k){i[A]&&(l[A]=function(K){return new Promise(function(Y,te){c.push([A,K,Y,te])>1||C(A,K)})},k&&(l[A]=k(l[A])))}function C(A,k){try{!function g(A){A.value instanceof z?Promise.resolve(A.value.v).then(S,M):J(c[0][2],A)}(i[A](k))}catch(K){J(c[0][3],K)}}function S(A){C("next",A)}function M(A){C("throw",A)}function J(A,k){A(k),c.shift(),c.length&&C(c[0][0],c[0][1])}}function ee(t){var n,s;return n={},i("next"),i("throw",function(l){throw l}),i("return"),n[Symbol.iterator]=function(){return this},n;function i(l,c){n[l]=t[l]?function(d){return(s=!s)?{value:z(t[l](d)),done:!1}:c?c(d):d}:c}}function V(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=t[Symbol.asyncIterator];return n?n.call(t):(t=x(t),s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s);function i(c){s[c]=t[c]&&function(d){return new Promise(function(E,C){!function l(c,d,E,C){Promise.resolve(C).then(function(g){c({value:g,done:E})},d)}(E,C,(d=t[c](d)).done,d.value)})}}}function b(t,n){return Object.defineProperty?Object.defineProperty(t,"raw",{value:n}):t.raw=n,t}var R=Object.create?function(t,n){Object.defineProperty(t,"default",{enumerable:!0,value:n})}:function(t,n){t.default=n},I=function(t){return(I=Object.getOwnPropertyNames||function(n){var s=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[s.length]=i);return s})(t)};function h(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var s=I(t),i=0;i<s.length;i++)"default"!==s[i]&&u(n,t,s[i]);return R(n,t),n}function y(t){return t&&t.__esModule?t:{default:t}}function _(t,n,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof n?t!==n||!i:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(t):i?i.value:n.get(t)}function O(t,n,s,i,l){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!l)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof n?t!==n||!l:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?l.call(t,s):l?l.value=s:n.set(t,s),s}function T(t,n){if(null===n||"object"!=typeof n&&"function"!=typeof n)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?n===t:t.has(n)}function o(t,n,s){if(null!=n){if("object"!=typeof n&&"function"!=typeof n)throw new TypeError("Object expected.");var i,l;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=n[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=n[Symbol.dispose],s&&(l=i)}if("function"!=typeof i)throw new TypeError("Object not disposable.");l&&(i=function(){try{l.call(this)}catch(c){return Promise.reject(c)}}),t.stack.push({value:n,dispose:i,async:s})}else s&&t.stack.push({async:!0});return n}var f="function"==typeof SuppressedError?SuppressedError:function(t,n,s){var i=new Error(s);return i.name="SuppressedError",i.error=t,i.suppressed=n,i};function e(t){function n(c){t.error=t.hasError?new f(c,t.error,"An error was suppressed during disposal."):c,t.hasError=!0}var s,i=0;return function l(){for(;s=t.stack.pop();)try{if(!s.async&&1===i)return i=0,t.stack.push(s),Promise.resolve().then(l);if(s.dispose){var c=s.dispose.call(s.value);if(s.async)return i|=2,Promise.resolve(c).then(l,function(d){return n(d),l()})}else i|=1}catch(d){n(d)}if(1===i)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}function r(t,n){return"string"==typeof t&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,i,l,c,d){return i?n?".jsx":".js":!l||c&&d?l+c+"."+d.toLowerCase()+"js":s}):t}const a={__extends:L,__assign:j,__rest:p,__decorate:P,__param:G,__esDecorate:$,__runInitializers:F,__propKey:N,__setFunctionName:U,__metadata:v,__awaiter:H,__generator:X,__createBinding:u,__exportStar:D,__values:x,__read:W,__spread:q,__spreadArrays:Z,__spreadArray:re,__await:z,__asyncGenerator:Q,__asyncDelegator:ee,__asyncValues:V,__makeTemplateObject:b,__importStar:h,__importDefault:y,__classPrivateFieldGet:_,__classPrivateFieldSet:O,__classPrivateFieldIn:T,__addDisposableResource:o,__disposeResources:e,__rewriteRelativeImportExtension:r}}}]);