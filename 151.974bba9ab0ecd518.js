(self.webpackChunkshell=self.webpackChunkshell||[]).push([[151],{1151:(Q,M,s)=>{s.r(M),s.d(M,{bootstrap:()=>V});var I=s(4077),u=s(467),c=s(2130),l=s(5070),A=s(2176),g=s(5883),x=s(7412),e=s(4304),i=s(3532),h=s(7544);function R(o,p){if(1&o&&(e.\u0275\u0275elementStart(0,"span",8),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2(" ",n.currentUser.name," (",n.currentUser.role,") ")}}function O(o,p){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.logout())}),e.\u0275\u0275text(1,"Logout"),e.\u0275\u0275elementEnd()}}function U(o,p){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.login())}),e.\u0275\u0275text(1,"Login"),e.\u0275\u0275elementEnd()}}function k(o,p){if(1&o&&(e.\u0275\u0275elementStart(0,"a",13),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=p.$implicit;e.\u0275\u0275property("routerLink","/"+n.route),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",n.displayName," ")}}function E(o,p){if(1&o&&(e.\u0275\u0275elementStart(0,"nav",11),e.\u0275\u0275template(1,k,2,2,"a",12),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",n.availableMfes)}}let _=(()=>{class o{constructor(n,t,r,a){this.roleService=n,this.mfeLoader=t,this.auth=r,this.router=a,this.currentUser=null,this.availableMfes=[],this.subscriptions=new g.Subscription}ngOnInit(){this.syncAuthenticatedUser(),this.subscribeToUserChanges()}ngOnDestroy(){this.subscriptions.unsubscribe()}syncAuthenticatedUser(){const n=this.auth.isAuthenticatedSync(),t=this.auth.getUser(),r=this.roleService.getCurrentUser();n&&t&&this.shouldUpdateUser(r,t)&&this.roleService.setUserFromAuth(t)}shouldUpdateUser(n,t){return!n||n.id!==t.sub}subscribeToUserChanges(){const n=this.roleService.currentUser$.subscribe(t=>{this.currentUser=t,this.updateComponentState(t)});this.subscriptions.add(n)}updateComponentState(n){n?this.updateAvailableMfes():this.resetComponentState()}resetComponentState(){this.availableMfes=[]}updateAvailableMfes(){this.availableMfes=this.currentUser?this.mfeLoader.getConfigsForRole(this.currentUser.role):[]}logout(){this.auth.logout(),this.roleService.setCurrentUser(null)}login(){const t=this.router.parseUrl(this.router.url).queryParams,r=t.invitation,a=t.organization;r&&a?this.auth.login(void 0,{invitation:r,organization:a}):this.auth.login()}static{this.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(i.RoleService),e.\u0275\u0275directiveInject(i.MfeLoaderService),e.\u0275\u0275directiveInject(h.AuthService),e.\u0275\u0275directiveInject(c.Router))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-header"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:9,vars:4,consts:[[1,"app-header"],[1,"header-left"],[1,"app-title"],[1,"header-right"],["class","user-info",4,"ngIf"],["class","btn-logout",3,"click",4,"ngIf"],["class","btn-login",3,"click",4,"ngIf"],["class","app-nav",4,"ngIf"],[1,"user-info"],[1,"btn-logout",3,"click"],[1,"btn-login",3,"click"],[1,"app-nav"],["routerLinkActive","active","class","nav-link",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"nav-link",3,"routerLink"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"header",0)(1,"div",1)(2,"h1",2),e.\u0275\u0275text(3,"Incentive Management System"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275template(5,R,2,2,"span",4)(6,O,2,0,"button",5)(7,U,2,0,"button",6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,E,2,1,"nav",7)),2&t&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",r.currentUser),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.currentUser),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!r.currentUser),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.currentUser))},dependencies:[l.CommonModule,l.NgForOf,l.NgIf,A.FormsModule,c.RouterLink,c.RouterLinkActive],styles:[".app-header[_ngcontent-%COMP%]{background:#fff;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 8px #0000001a}.header-left[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.app-title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--gray-900);font-weight:600}.org-display[_ngcontent-%COMP%]{font-size:.875rem;color:var(--bright-blue);font-weight:600;text-transform:uppercase}.header-center[_ngcontent-%COMP%]{flex:2;display:flex;justify-content:center}.user-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.user-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--gray-700);font-weight:500}.user-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--gray-400);border-radius:.375rem;font-size:.875rem;background:#fff;cursor:pointer;min-width:200px}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.header-right[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.user-info[_ngcontent-%COMP%]{color:var(--gray-700);font-size:.875rem;font-weight:500}.btn-logout[_ngcontent-%COMP%], .btn-login[_ngcontent-%COMP%]{background:var(--hot-red);color:#fff;border:none;padding:.5rem 1.5rem;border-radius:.375rem;font-size:.875rem;font-weight:500;cursor:pointer;transition:background .2s ease}.btn-logout[_ngcontent-%COMP%]:hover, .btn-login[_ngcontent-%COMP%]:hover{background:var(--orange-red)}.btn-login[_ngcontent-%COMP%]{background:var(--bright-blue)}.btn-login[_ngcontent-%COMP%]:hover{background:var(--electric-violet)}.app-nav[_ngcontent-%COMP%]{background:var(--gray-900);padding:0;display:flex;gap:0}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:1rem 1.5rem;font-size:.875rem;font-weight:500;transition:background .2s ease;border-bottom:3px solid transparent}.nav-link[_ngcontent-%COMP%]:hover{background:var(--gray-700)}.nav-link.active[_ngcontent-%COMP%]{background:var(--bright-blue);border-bottom-color:var(--electric-violet)}"]})}}return o})(),F=(()=>{class o{constructor(){this.currentYear=(new Date).getFullYear()}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-footer"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:3,vars:1,consts:[[1,"app-footer"],[1,"copyright"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"footer",0)(1,"p",1),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\xa9 ",r.currentYear," Incentive Management System. All rights reserved."))},styles:[".app-footer[_ngcontent-%COMP%]{background:var(--gray-900);color:#fff;padding:1rem 2rem;margin-top:auto;text-align:center}.app-footer[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]{margin:0;font-size:.875rem}"]})}}return o})(),j=(()=>{class o{constructor(n,t,r,a,m){this.auth=n,this.roleService=t,this.mfeLoader=r,this.router=a,this.route=m,this.title="Incentive Management System",this.subscriptions=new g.Subscription,this.mfeLoader.setConfigs(x.RG)}ngOnInit(){var n=this;return(0,u.A)(function*(){yield n.handleOrganizationInvitation(),yield n.syncAuthenticatedUser()})()}ngOnDestroy(){this.subscriptions.unsubscribe()}syncAuthenticatedUser(){var n=this;return(0,u.A)(function*(){const t=yield n.auth.isAuthenticated(),r=n.auth.getUser(),a=n.roleService.getCurrentUser();t&&r&&n.shouldUpdateUser(a,r)&&(console.log("[AppComponent] Syncing authenticated user to role service"),n.roleService.setUserFromAuth(r))})()}shouldUpdateUser(n,t){return!n||n.id!==t.sub}handleOrganizationInvitation(){var n=this;return(0,u.A)(function*(){console.log("[AppComponent] handleOrganizationInvitation() called");const t=n.route.snapshot.queryParams;console.log("[AppComponent] Route snapshot queryParams:",t),console.log("[AppComponent] Router state queryParams:",n.router.routerState.root.snapshot.queryParams);const a=new URLSearchParams(window.location.search),m=a.get("invitation"),C=a.get("organization"),y=a.get("organization_name");console.log("[AppComponent] Window location search:",window.location.search),console.log("[AppComponent] URLSearchParams - invitation:",m,"organization:",C);const b=m||t.invitation,S=C||t.organization;b&&S?(console.log("[AppComponent] Organization invitation detected"),console.log("  Invitation:",b),console.log("  Organization:",S),console.log("  Organization Name:",y||t.organization_name||"Not specified"),console.log("[AppComponent] Automatically initiating login with invitation parameters..."),yield n.auth.login(void 0,{invitation:b,organization:S})):console.log("[AppComponent] No invitation parameters found")})()}static{this.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(h.AuthService),e.\u0275\u0275directiveInject(i.RoleService),e.\u0275\u0275directiveInject(i.MfeLoaderService),e.\u0275\u0275directiveInject(c.Router),e.\u0275\u0275directiveInject(c.ActivatedRoute))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-root"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:5,vars:0,consts:[[1,"app-container"],[1,"app-content"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-header"),e.\u0275\u0275elementStart(2,"main",1),e.\u0275\u0275element(3,"router-outlet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"app-footer"),e.\u0275\u0275elementEnd())},dependencies:[c.RouterOutlet,l.CommonModule,A.FormsModule,_,F],styles:['[_nghost-%COMP%]{--bright-blue: oklch(51.01% .274 263.83);--electric-violet: oklch(53.18% .28 296.97);--french-violet: oklch(47.66% .246 305.88);--vivid-pink: oklch(69.02% .277 332.77);--hot-red: oklch(61.42% .238 15.34);--orange-red: oklch(63.32% .24 31.68);--gray-900: oklch(19.37% .006 300.98);--gray-700: oklch(36.98% .014 302.71);--gray-400: oklch(70.9% .015 304.04);--red-to-pink-to-purple-vertical-gradient: linear-gradient( 180deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100% );--red-to-pink-to-purple-horizontal-gradient: linear-gradient( 90deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100% );--pill-accent: var(--bright-blue);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh}.app-content[_ngcontent-%COMP%]{flex:1;padding:2rem;background:#f5f5f5}']})}}return o})();var f=s(8072);function v(o){return()=>{const p=(0,e.inject)(i.RoleService),n=(0,e.inject)(c.Router);console.log("[RoleGuard] Checking access for allowed roles:",o);const t=p.getCurrentUser();return t?(console.log("[RoleGuard] Current user:",t.name,"Role:",t.role),o.includes(t.role)?(console.log("[RoleGuard] Access granted for user:",t.name),!0):(console.warn(`[RoleGuard] User role ${t.role} not allowed, redirecting to home`),console.warn("[RoleGuard] Allowed roles:",o),n.navigate(["/"]),!1)):(console.warn("[RoleGuard] No user found, redirecting to home"),n.navigate(["/"]),!1)}}const P=v([i.UserRole.SUPER_ADMIN,i.UserRole.ORG_ADMIN,i.UserRole.TEAM_LEAD]),w=(v([i.UserRole.SUPER_ADMIN,i.UserRole.ORG_ADMIN]),v([i.UserRole.SUPER_ADMIN,i.UserRole.ORG_ADMIN,i.UserRole.TEAM_LEAD,i.UserRole.SALES_EXECUTIVE]));var T=s(1913);const z=["container"];let d=(()=>{class o{constructor(){this.name="",this.injector=(0,e.inject)(e.EnvironmentInjector)}getNonStandaloneErrorMessage(n){return`\u26a0\ufe0f CRITICAL ERROR: Component ${n} is NOT a standalone component. This will cause "JIT compiler unavailable" errors in production builds. \n\nTo fix this issue, the remote MFE must:\n1. Mark the component with 'standalone: true' in the @Component decorator\n2. Import all dependencies in the component's 'imports' array\n3. Rebuild and redeploy the MFE\n\nExample:\n@Component({\n  selector: 'app-root',\n  standalone: true,\n  imports: [CommonModule, RouterModule, ...],\n  templateUrl: './app.component.html'\n})`}isStandaloneComponent(n){return!0===n.\u0275cmp?.standalone}ngAfterViewInit(){var n=this;return(0,u.A)(function*(){const t=x.Ay.find(({remoteName:r})=>r===n.name);if(t)try{console.log(`[MfeWrapperComponent] Loading MFE: ${n.name}`,t);const r=yield(0,T.loadRemoteModule)(t);if(!r)return void console.error(`[MfeWrapperComponent] MFE module not found for: ${n.name}`);let a;if(r.AppComponent?a=r.AppComponent:r.Component?a=r.Component:r.default&&(a=r.default),!a)return void console.error(`[MfeWrapperComponent] No component found in remote module for: ${n.name}. Checked for: AppComponent, Component, default. Available exports:`,Object.keys(r));if(console.log(`[MfeWrapperComponent] Found component type for MFE: ${n.name}`),!n.isStandaloneComponent(a)){const y=n.getNonStandaloneErrorMessage(n.name||"unknown");throw console.error(`[MfeWrapperComponent] ${y}`),new Error(`Component ${n.name} must be a standalone component for Module Federation in production builds`)}console.log(`[MfeWrapperComponent] \u2713 Component is standalone. Creating component for MFE: ${n.name}`),n.remoteContainer.createComponent(a,{environmentInjector:n.injector}),console.log(`[MfeWrapperComponent] \u2713 MFE loaded successfully: ${n.name}`)}catch(r){throw console.error(`[MfeWrapperComponent] \u274c Error loading MFE ${n.name}:`,r),n.remoteContainer.clear(),r}else console.error(`[MfeWrapperComponent] MFE configuration not found for: ${n.name}`)})()}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-mfe-wrapper"]],viewQuery:function(t,r){if(1&t&&e.\u0275\u0275viewQuery(z,7,e.ViewContainerRef),2&t){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(r.remoteContainer=a.first)}},inputs:{name:"name"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:4,vars:0,consts:[["container",""]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1,"mfe-wrapper works!"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainer(2,null,0))},dependencies:[l.CommonModule],changeDetection:0})}}return o})(),N=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-home-page"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:6,vars:1,consts:[[1,"home-container"],[1,"welcome-text"],[3,"name"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h1"),e.\u0275\u0275text(2,"Incentive Management System"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"p",1),e.\u0275\u0275text(4,"Welcome to the Incentive Management System. Use the navigation menu to access the available modules based on your role."),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"app-mfe-wrapper",2),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("name","usersCrud"))},dependencies:[l.CommonModule,d],styles:[".home-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.home-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;margin-bottom:.5rem;font-size:2rem}.home-container[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]{color:#666;font-size:1.1rem;margin-bottom:2rem}"]})}}return o})(),L=(()=>{class o{constructor(){this.mfeName="crudRules"}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-rules-page"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:2,vars:1,consts:[[1,"page-container"],[3,"name"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-mfe-wrapper",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("name",r.mfeName))},dependencies:[d],styles:[".page-container[_ngcontent-%COMP%]{padding:2rem}"]})}}return o})(),D=(()=>{class o{constructor(){this.mfeName="mySales"}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-sales-page"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:2,vars:1,consts:[[1,"page-container"],[3,"name"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-mfe-wrapper",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("name",r.mfeName))},dependencies:[d],styles:[".page-container[_ngcontent-%COMP%]{padding:2rem}"]})}}return o})(),$=(()=>{class o{constructor(){this.mfeName="myReport"}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-reports-page"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:2,vars:1,consts:[[1,"page-container"],[3,"name"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-mfe-wrapper",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("name",r.mfeName))},dependencies:[d],styles:[".page-container[_ngcontent-%COMP%]{padding:2rem}"]})}}return o})(),W=(()=>{class o{constructor(){this.mfeName="usersCrud"}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-users-page"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:2,vars:1,consts:[[1,"page-container"],[3,"name"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-mfe-wrapper",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("name",r.mfeName))},dependencies:[d],styles:[".page-container[_ngcontent-%COMP%]{padding:2rem}"]})}}return o})();function G(o,p){1&o&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1,"Processing authentication..."),e.\u0275\u0275elementEnd())}const H=[{path:"",component:N},{path:"auth-callback",component:(()=>{class o{constructor(n,t,r,a){this.route=n,this.router=t,this.authService=r,this.roleService=a,this.message="Processing authentication...",this.isProcessing=!0,this.destroy$=new g.Subject}ngOnInit(){var n=this;return(0,u.A)(function*(){yield n.processAuthCallback()})()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}processAuthCallback(){var n=this;return(0,u.A)(function*(){try{const t=yield n.authService.handleCallback(),r=t.success?n.handleAuthSuccess(t.appState):n.createFailureState();n.applyAuthState(r),n.scheduleRedirect(r.redirectDelayMs,t.appState)}catch(t){console.error("[AuthCallbackComponent] Error processing callback:",t);const r=n.createExceptionState();n.applyAuthState(r),n.scheduleRedirect(r.redirectDelayMs)}})()}handleAuthSuccess(n){const t=this.authService.getUser();if(t){console.log("[AuthCallbackComponent] \u{1f389} Authentication successful! User info retrieved:"),console.log("  User ID:",t.sub),console.log("  Name:",t.name),console.log("  Email:",t.email);const r=Object.keys(t).filter(a=>a.startsWith("http://")||a.startsWith("https://"));r.length>0&&(console.log("  Custom claims count:",r.length),console.log("  For full details, check AuthService logs above")),this.roleService.setUserFromAuth(t)}return{message:"Authentication successful! Redirecting...",isProcessing:!1,redirectDelayMs:1500}}createFailureState(){return{message:"Authentication failed. Redirecting...",isProcessing:!1,redirectDelayMs:3e3}}createExceptionState(){return{message:"Authentication failed (exception). Redirecting...",isProcessing:!1,redirectDelayMs:3e3}}applyAuthState(n){this.message=n.message,this.isProcessing=n.isProcessing}scheduleRedirect(n,t){setTimeout(()=>{t?.returnTo?(console.log("[AuthCallbackComponent] Restoring original URL parameters:",t.returnTo),this.router.navigateByUrl("/"+t.returnTo)):this.router.navigate(["/"])},n)}static{this.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(c.ActivatedRoute),e.\u0275\u0275directiveInject(c.Router),e.\u0275\u0275directiveInject(h.AuthService),e.\u0275\u0275directiveInject(i.RoleService))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-auth-callback"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:5,vars:2,consts:[[2,"display","flex","justify-content","center","align-items","center","height","100vh"],[2,"text-align","center"],[4,"ngIf"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,G,2,0,"p",2),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(r.message),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.isProcessing))},dependencies:[l.CommonModule,l.NgIf],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100vh}"]})}}return o})()},{path:"rules",component:L,canActivate:[P]},{path:"sales",component:D,canActivate:[w]},{path:"reports",component:$,canActivate:[w]},{path:"users",component:W,canActivate:[P]},{path:"**",redirectTo:""}];function V(){return(0,I.bootstrapApplication)(j,{providers:[(0,c.provideRouter)(H),(0,f.provideHttpClient)((0,f.withFetch)(),(0,f.withInterceptors)([i.authInterceptor]))]})}}}]);