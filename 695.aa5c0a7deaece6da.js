(self.webpackChunkshell=self.webpackChunkshell||[]).push([[695],{1913:(re,$,R)=>{Object.defineProperty($,"__esModule",{value:!0}),R(1635).__exportStar(R(5766),$)},7695:(re,$,R)=>{R.r($),R.d($,{API_CONFIG:()=>E,API_ENDPOINTS:()=>S,AuthService:()=>T,BrandContextService:()=>z,CoreServicesComponent:()=>L,CoreServicesService:()=>N,DummyDataService:()=>Z,EXPLICIT_ZITADEL_CLAIMS:()=>P,EventBusService:()=>F,IncentiveRulesApiService:()=>b,IncentivesApiService:()=>O,MfeLoaderService:()=>G,ProductCategory:()=>j,RoleService:()=>W,SalesDataService:()=>Q,SalesStatus:()=>w,SseControlService:()=>q,SseFromEventService:()=>Y,TargetsApiService:()=>M,TasksApiService:()=>_,UserRole:()=>y,authInterceptor:()=>V,cacheInterceptor:()=>X,getApiUrl:()=>c,hasRequiredRole:()=>K,updateApiConfig:()=>g});var m=R(5565);let N=(()=>{class s{constructor(){}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var A=R(467),f=R(4866),x=R(1663),k=R(762),B=R.n(k);let F=(()=>{class s{constructor(){this.emitter=B()(),console.log("[EventBusService] Service initialized");const e=new Event("EventBusServiceCreated");this.onePlusNEvents=new f.ReplaySubject(100),this.onePlusNEvents.next(e.type),this.emitter.on("*",t=>{console.log("[EventBusService] Event received and forwarded to ReplaySubject:",t),this.onePlusNEvents.next(t)}),console.log("[EventBusService] Event listener registered for all events")}sendEvent(e){console.log("[EventBusService] sendEvent() called with:",e),this.emitter.emit(e),console.log("[EventBusService] Event emitted successfully")}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();const P=["urn:zitadel:iam:org:project:roles","urn:zitadel:iam:org:domain:primary","urn:zitadel:iam:user:metadata","urn:zitadel:iam:user:resourceowner:id","urn:zitadel:iam:user:resourceowner:name","urn:zitadel:iam:user:resourceowner:primary_domain"];let T=(()=>{class s{constructor(e,t){this.http=e,this.eventBus=t,this.id="auth of pokemon",this.STANDARD_JWT_CLAIMS=["sub","name","email","email_verified","preferred_username","given_name","family_name","locale","picture","phone","phone_verified","updated_at","iss","aud","exp","iat","auth_time","nonce","acr","amr","azp"],this.ISSUER_BASE_URL="https://topfix-wrczmn.us1.zitadel.cloud",this.CLIENT_ID="336777344075263315",this.REDIRECT_URI="https://opensourcekd.github.io/i17e/auth-callback",this.SCOPE="openid profile email",this.TOKEN_KEY="zitadel_token",this.USER_INFO_KEY="zitadel_user_info",this.userSubject=new f.BehaviorSubject(this.getUserInfoFromStorage()),this.user$=this.userSubject.asObservable(),console.log("In constructor of auth service in i17e")}login(e){e&&console.log(`in i17e [AuthService] Logged in: ${e}`),this.redirectToZitadelLogin()}redirectToZitadelLogin(){const e=new URL(`${this.ISSUER_BASE_URL}/oauth/v2/authorize`),t=this.generateRandomState(),r=this.generateCodeVerifier();sessionStorage.setItem("oauth_state",t),sessionStorage.setItem("code_verifier",r),e.searchParams.append("client_id",this.CLIENT_ID),e.searchParams.append("redirect_uri",this.REDIRECT_URI),e.searchParams.append("response_type","code"),e.searchParams.append("scope",this.SCOPE),e.searchParams.append("state",t),window.location.href=e.toString()}handleCallback(e,t){var r=this;return(0,A.A)(function*(){const n=sessionStorage.getItem("oauth_state");if(t!==n)return console.error("[AuthService] State mismatch - possible CSRF attack"),!1;try{const o=yield r.exchangeCodeForToken(e);r.setToken(o.access_token);const i=r.decodeIdToken(o.id_token);return r.setUserInfo(i),sessionStorage.removeItem("oauth_state"),sessionStorage.removeItem("code_verifier"),console.log("[AuthService] Authentication successful"),!0}catch(o){return console.error("[AuthService] Error exchanging code for token:",o),!1}})()}exchangeCodeForToken(e){var t=this;return(0,A.A)(function*(){const r=`${t.ISSUER_BASE_URL}/oauth/v2/token`,n=new URLSearchParams({grant_type:"authorization_code",code:e,redirect_uri:t.REDIRECT_URI,client_id:t.CLIENT_ID}),o=yield fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!o.ok)throw new Error(`Token exchange failed: ${o.statusText}`);return o.json()})()}decodeIdToken(e){try{const t=e.split(".")[1],r=JSON.parse(atob(t));console.log("=".repeat(80)),console.log("[AuthService] \u{1f50d} ZITADEL ID TOKEN - ALL CLAIMS:"),console.log("=".repeat(80)),console.log("\n\u{1f4cb} Standard OIDC Claims:"),console.log("  \u2022 sub (Subject/User ID):",r.sub),console.log("  \u2022 name:",r.name),console.log("  \u2022 email:",r.email),console.log("  \u2022 email_verified:",r.email_verified),console.log("  \u2022 preferred_username:",r.preferred_username),console.log("  \u2022 given_name:",r.given_name),console.log("  \u2022 family_name:",r.family_name),console.log("  \u2022 locale:",r.locale),console.log("  \u2022 picture:",r.picture),console.log("  \u2022 phone:",r.phone),console.log("  \u2022 phone_verified:",r.phone_verified),console.log("  \u2022 updated_at:",r.updated_at),console.log("\n\u{1f3e2} Zitadel Organization Claims:"),console.log("  \u2022 urn:zitadel:iam:org:project:roles:",r["urn:zitadel:iam:org:project:roles"]||"(not present)"),console.log("  \u2022 urn:zitadel:iam:org:domain:primary:",r["urn:zitadel:iam:org:domain:primary"]||"(not present)"),console.log("  \u2022 urn:zitadel:iam:user:metadata:",r["urn:zitadel:iam:user:metadata"]||"(not present)"),console.log("  \u2022 urn:zitadel:iam:user:resourceowner:id:",r["urn:zitadel:iam:user:resourceowner:id"]||"(not present)"),console.log("  \u2022 urn:zitadel:iam:user:resourceowner:name:",r["urn:zitadel:iam:user:resourceowner:name"]||"(not present)"),console.log("  \u2022 urn:zitadel:iam:user:resourceowner:primary_domain:",r["urn:zitadel:iam:user:resourceowner:primary_domain"]||"(not present)");const o=Object.keys(r).filter(a=>a.startsWith("urn:zitadel")).filter(a=>!P.includes(a));o.length>0&&(console.log("\n  Additional Zitadel claims:"),o.forEach(a=>{const u=r[a];"object"==typeof u?console.log(`  \u2022 ${a}:`,JSON.stringify(u,null,2)):console.log(`  \u2022 ${a}:`,u)})),console.log("\n\u{1f527} Additional Claims:");const i=Object.keys(r).filter(a=>!this.STANDARD_JWT_CLAIMS.includes(a)&&!a.startsWith("urn:zitadel"));return i.length>0?i.forEach(a=>{const u=r[a];"object"==typeof u?console.log(`  \u2022 ${a}:`,JSON.stringify(u,null,2)):console.log(`  \u2022 ${a}:`,u)}):console.log("  No additional claims found"),console.log("\n\u{1f510} Token Metadata:"),console.log("  \u2022 iss (Issuer):",r.iss),console.log("  \u2022 aud (Audience):",r.aud),console.log("  \u2022 exp (Expiration):",r.exp,r.exp?`(${new Date(1e3*r.exp).toISOString()})`:""),console.log("  \u2022 iat (Issued At):",r.iat,r.iat?`(${new Date(1e3*r.iat).toISOString()})`:""),console.log("  \u2022 auth_time:",r.auth_time),console.log("  \u2022 nonce:",r.nonce),console.log("  \u2022 azp (Authorized Party):",r.azp),console.log("\n\u{1f4e6} Complete Token Payload (JSON):"),console.log(JSON.stringify(r,null,2)),console.log("=".repeat(80)),{sub:r.sub,name:r.name,email:r.email,email_verified:r.email_verified,preferred_username:r.preferred_username,given_name:r.given_name,family_name:r.family_name,locale:r.locale,picture:r.picture,phone:r.phone,phone_verified:r.phone_verified,updated_at:r.updated_at,...Object.keys(r).filter(a=>a.startsWith("urn:zitadel")).reduce((a,u)=>({...a,[u]:r[u]}),{}),...Object.keys(r).filter(a=>!this.STANDARD_JWT_CLAIMS.includes(a)&&!a.startsWith("urn:zitadel")).reduce((a,u)=>({...a,[u]:r[u]}),{})}}catch(t){return console.error("[AuthService] Error decoding ID token:",t),{sub:""}}}logout(){sessionStorage.removeItem(this.TOKEN_KEY),sessionStorage.removeItem(this.USER_INFO_KEY),this.userSubject.next(null),this.emitAuthEvent("logout",null),console.log("[AuthService] User logged out")}getToken(){return sessionStorage.getItem(this.TOKEN_KEY)}setToken(e){sessionStorage.setItem(this.TOKEN_KEY,e),this.emitAuthEvent("token_updated",{token:e})}isAuthenticated(){return!!this.getToken()}getUser(){return this.userSubject.value}getUserInfoFromStorage(){const e=sessionStorage.getItem(this.USER_INFO_KEY);return e?JSON.parse(e):null}setUserInfo(e){sessionStorage.setItem(this.USER_INFO_KEY,JSON.stringify(e)),this.userSubject.next(e),console.log("[AuthService] \u{1f4be} User info stored in sessionStorage:"),console.log("  Standard claims:",{sub:e.sub,name:e.name,email:e.email,email_verified:e.email_verified});const t=Object.keys(e).filter(r=>r.startsWith("urn:zitadel"));t.length>0&&(console.log("  Zitadel claims stored:"),t.forEach(r=>{console.log(`    \u2022 ${r}:`,e[r])})),this.emitAuthEvent("user_info_updated",e)}emitAuthEvent(e,t){const r={type:`auth:${e}`,payload:t,timestamp:(new Date).toISOString()};this.eventBus.sendEvent(JSON.stringify(r)),console.log("[AuthService] Auth event emitted:",r.type)}generateRandomState(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")}generateCodeVerifier(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")}static{this.\u0275fac=function(t){return new(t||s)(m.\u0275\u0275inject(x.HttpClient),m.\u0275\u0275inject(F))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),L=(()=>{class s{static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=m.\u0275\u0275defineComponent({type:s,selectors:[["org-core-services"]],standalone:!0,features:[m.\u0275\u0275StandaloneFeature],decls:2,vars:0,template:function(t,r){1&t&&(m.\u0275\u0275elementStart(0,"p"),m.\u0275\u0275text(1," core-services works! "),m.\u0275\u0275elementEnd())}})}}return s})();var y=function(s){return s.SUPER_ADMIN="super-admin",s.ORG_ADMIN="org-admin",s.TEAM_LEAD="team-lead",s.SALES_EXECUTIVE="sales-executive",s}(y||{});function K(s,h){const e={[y.SUPER_ADMIN]:4,[y.ORG_ADMIN]:3,[y.TEAM_LEAD]:2,[y.SALES_EXECUTIVE]:1};return e[s]>=e[h]}let W=(()=>{class s{constructor(){this.currentUserSubject=new f.BehaviorSubject(null),this.currentUser$=this.currentUserSubject.asObservable(),console.log("[RoleService] Service initialized"),this.loadInitialUser()}setUserFromAuth(e){console.log("[RoleService] Setting user from Zitadel auth:",e),console.log("[RoleService] \u{1f3e2} Zitadel-specific claims:"),console.log("  \u2022 urn:zitadel:iam:org:project:roles:",e["urn:zitadel:iam:org:project:roles"]||"(not present)"),console.log("  \u2022 urn:zitadel:iam:org:domain:primary:",e["urn:zitadel:iam:org:domain:primary"]||"(not present)"),console.log("  \u2022 urn:zitadel:iam:user:metadata:",e["urn:zitadel:iam:user:metadata"]||"(not present)"),console.log("  \u2022 urn:zitadel:iam:user:resourceowner:id:",e["urn:zitadel:iam:user:resourceowner:id"]||"(not present)"),console.log("  \u2022 urn:zitadel:iam:user:resourceowner:name:",e["urn:zitadel:iam:user:resourceowner:name"]||"(not present)"),console.log("  \u2022 urn:zitadel:iam:user:resourceowner:primary_domain:",e["urn:zitadel:iam:user:resourceowner:primary_domain"]||"(not present)"),e["urn:zitadel:iam:user:resourceowner:name"]&&console.log(`[RoleService] \u{1f3e2} User belongs to organization: ${e["urn:zitadel:iam:user:resourceowner:name"]}`),e["urn:zitadel:iam:org:project:roles"]&&console.log("[RoleService] \u{1f464} Zitadel project roles:",e["urn:zitadel:iam:org:project:roles"]);const t=this.mapUserInfoToUser(e);console.log("[RoleService] Mapped user with role:",t),this.setCurrentUser(t)}mapUserInfoToUser(e){return{id:e.sub,name:e.name||e.email||"User",email:e.email||"",role:this.determineRoleFromEmail(e.email||"")}}determineRoleFromEmail(e){const t=e.toLowerCase();return[{patterns:["admin","super"],role:y.SUPER_ADMIN},{patterns:["manager","org"],role:y.ORG_ADMIN},{patterns:["lead","team"],role:y.TEAM_LEAD}].find(({patterns:o})=>o.some(i=>t.includes(i)))?.role??y.SALES_EXECUTIVE}loadInitialUser(){const e=this.getDevMimicUser();if(e)return console.log("[RoleService] Using dev mimic user:",e),void this.currentUserSubject.next(e)}getDevMimicUser(){try{const e=localStorage.getItem("dev_mimic_user");if(e){const t=JSON.parse(e);if(t.id&&t.name&&t.role)return t}}catch(e){console.error("[RoleService] Error parsing dev mimic user:",e)}return null}setDevMimicUser(e){e?(localStorage.setItem("dev_mimic_user",JSON.stringify(e)),this.currentUserSubject.next(e),console.log("[RoleService] Dev mimic user set:",e)):(localStorage.removeItem("dev_mimic_user"),this.loadDummyUser(),console.log("[RoleService] Dev mimic user cleared"))}loadDummyUser(){console.log("[RoleService] Loading user from session storage");const e=sessionStorage.getItem("current_user");if(e){const t=JSON.parse(e);console.log("[RoleService] User loaded from session:",t),this.currentUserSubject.next(t)}else{const t={id:"user-1",name:"John Admin",email:"john.admin@company.com",role:y.ORG_ADMIN};console.log("[RoleService] No saved user found, using default:",t),this.setCurrentUser(t)}}setCurrentUser(e){console.log("[RoleService] Setting current user:",e),this.currentUserSubject.next(e),e?(sessionStorage.setItem("current_user",JSON.stringify(e)),console.log("[RoleService] User saved to session storage")):(sessionStorage.removeItem("current_user"),console.log("[RoleService] User removed from session storage"))}getCurrentUser(){const e=this.currentUserSubject.value;return console.log("[RoleService] getCurrentUser() called, returning:",e),e}getCurrentUserRole(){const e=this.currentUserSubject.value?.role||null;return console.log("[RoleService] getCurrentUserRole() called, returning:",e),e}hasRole(e){const t=this.getCurrentUserRole();if(!t)return console.log("[RoleService] hasRole() - No current role, access denied"),!1;const r=K(t,e);return console.log(`[RoleService] hasRole() - Checking if ${t} has ${e}:`,r),r}canViewOthersData(){const e=this.getCurrentUserRole(),t=e===y.SUPER_ADMIN||e===y.ORG_ADMIN||e===y.TEAM_LEAD;return console.log(`[RoleService] canViewOthersData() - Role: ${e}, Can view:`,t),t}getViewableUsers(){const e=this.getCurrentUser();if(!e)return[];const t=this.getAllUsers();return this.isTeamLeadOrHigher()?t.filter(r=>r.role===y.SALES_EXECUTIVE||r.id===e.id):t.filter(r=>r.id===e.id)}hasAnyRole(e){const t=this.getCurrentUser();return!!t&&e.includes(t.role)}isAdmin(){return this.hasAnyRole([y.SUPER_ADMIN,y.ORG_ADMIN])}isTeamLeadOrHigher(){return this.hasAnyRole([y.SUPER_ADMIN,y.ORG_ADMIN,y.TEAM_LEAD])}getAllUsers(){return[{id:"user-1",name:"John Admin",email:"john.admin@company.com",role:y.SUPER_ADMIN},{id:"user-2",name:"Sarah Manager",email:"sarah.manager@company.com",role:y.ORG_ADMIN},{id:"user-3",name:"Mike Lead",email:"mike.lead@company.com",role:y.TEAM_LEAD,teamId:"team-1"},{id:"user-4",name:"Alice Sales",email:"alice.sales@company.com",role:y.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-5",name:"Bob Sales",email:"bob.sales@company.com",role:y.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-6",name:"Carol Sales",email:"carol.sales@company.com",role:y.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"}]}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var l=R(2778),w=function(s){return s.COMPLETED="completed",s.PENDING="pending",s.CANCELLED="cancelled",s}(w||{}),j=function(s){return s.ELECTRONICS="Electronics",s.SOFTWARE="Software",s.SERVICES="Services",s.HARDWARE="Hardware",s}(j||{});let Q=(()=>{class s{constructor(){this.dummySalesData=this.generateDummyData(),console.log("IN sales data service of SHELLLL")}getSalesHistory(e,t,r){let n=this.dummySalesData.filter(o=>o.salesExecutiveId===e);return t&&(n=n.filter(o=>o.date>=t)),r&&(n=n.filter(o=>o.date<=r)),(0,f.of)(n).pipe((0,l.delay)(300))}getSalesSummary(e){const t=this.dummySalesData.filter(n=>n.salesExecutiveId===e),r={totalSales:t.filter(n=>n.status===w.COMPLETED).reduce((n,o)=>n+o.amount,0),totalCommission:t.filter(n=>n.status===w.COMPLETED).reduce((n,o)=>n+o.commission,0),completedCount:t.filter(n=>n.status===w.COMPLETED).length,pendingCount:t.filter(n=>n.status===w.PENDING).length,cancelledCount:t.filter(n=>n.status===w.CANCELLED).length};return(0,f.of)(r).pipe((0,l.delay)(300))}getAllSales(){return(0,f.of)(this.dummySalesData).pipe((0,l.delay)(300))}generateDummyData(){const e=[{name:"Enterprise Software License",category:j.SOFTWARE,basePrice:5e4},{name:"Cloud Storage Solution",category:j.SERVICES,basePrice:25e3},{name:"Server Hardware",category:j.HARDWARE,basePrice:35e3},{name:"IoT Device Package",category:j.ELECTRONICS,basePrice:15e3},{name:"Consulting Services",category:j.SERVICES,basePrice:2e4},{name:"Mobile App Development",category:j.SOFTWARE,basePrice:45e3},{name:"Security Suite",category:j.SOFTWARE,basePrice:3e4},{name:"Network Infrastructure",category:j.HARDWARE,basePrice:6e4}],t=["Acme Corporation","Tech Innovations Inc","Global Solutions Ltd","Digital Dynamics","Future Systems","Smart Technologies","Enterprise Solutions","Cloud Masters"],r=["North","South","East","West","Central"],n=[{id:"user-4",name:"Alice Sales"},{id:"user-5",name:"Bob Sales"},{id:"user-6",name:"Carol Sales"}],o=[w.COMPLETED,w.COMPLETED,w.COMPLETED,w.PENDING,w.CANCELLED],i=[];let a=1;for(let u=0;u<50;u++){const p=n[u%n.length],d=e[Math.floor(Math.random()*e.length)],I=t[Math.floor(Math.random()*t.length)],D=r[Math.floor(Math.random()*r.length)],J=o[Math.floor(Math.random()*o.length)],v=d.basePrice+(1e4*Math.random()-5e3),C=.05*v,U=new Date;U.setDate(U.getDate()-Math.floor(180*Math.random())),i.push({id:"sale-"+a++,salesExecutiveId:p.id,salesExecutiveName:p.name,productName:d.name,productCategory:d.category,amount:Math.round(v),commission:Math.round(C),status:J,date:U,clientName:I,region:D})}return i.sort((u,p)=>p.date.getTime()-u.date.getTime())}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),Z=(()=>{class s{constructor(){this.salesExecutivesSubject=new f.BehaviorSubject(this.generateSalesExecutives()),this.salesExecutives$=this.salesExecutivesSubject.asObservable(),this.salesRecordsSubject=new f.BehaviorSubject(this.generateSalesRecords()),this.salesRecords$=this.salesRecordsSubject.asObservable(),this.incentiveRulesSubject=new f.BehaviorSubject(this.generateIncentiveRules()),this.incentiveRules$=this.incentiveRulesSubject.asObservable(),this.incentivesEarnedSubject=new f.BehaviorSubject(this.generateIncentivesEarned()),this.incentivesEarned$=this.incentivesEarnedSubject.asObservable(),console.log("[DummyDataService] Service initialized"),console.log("[DummyDataService] Generated data:",{salesExecutives:this.salesExecutivesSubject.value.length,salesRecords:this.salesRecordsSubject.value.length,incentiveRules:this.incentiveRulesSubject.value.length,incentivesEarned:this.incentivesEarnedSubject.value.length})}generateSalesExecutives(){return console.log("[DummyDataService] Generating sales executives"),[{id:"user-1",name:"John Admin",email:"john.admin@company.com",teamId:"team-1"},{id:"user-2",name:"Sarah Manager",email:"sarah.manager@company.com",teamId:"team-1"},{id:"user-3",name:"Mike Lead",email:"mike.lead@company.com",teamId:"team-1"},{id:"user-4",name:"Alice Sales",email:"alice.sales@company.com",teamId:"team-1"},{id:"user-5",name:"Bob Sales",email:"bob.sales@company.com",teamId:"team-1"},{id:"user-6",name:"Carol Sales",email:"carol.sales@company.com",teamId:"team-1"}]}generateSalesRecords(){console.log("[DummyDataService] Generating sales records");const e=[],t=this.generateSalesExecutives(),r=["Product A","Product B","Product C","Product D"],n=[w.COMPLETED,w.PENDING,w.CANCELLED];for(let o=0;o<50;o++){const i=t[o%t.length],a=Math.floor(o/10),u=new Date;u.setMonth(u.getMonth()-a),e.push({id:`sale-${o+1}`,salesExecutiveId:i.id,salesExecutiveName:i.name,date:u,productName:r[o%r.length],productCategory:j.SOFTWARE,amount:Math.floor(5e4*Math.random())+1e4,commission:Math.floor(5e3*Math.random()),quantity:Math.floor(10*Math.random())+1,status:n[o%n.length],clientName:`Client ${o+1}`,region:["North","South","East","West"][o%4]})}return e}generateIncentiveRules(){return console.log("[DummyDataService] Generating incentive rules"),[{id:"rule-1",name:"Basic Sales Incentive",description:"5% incentive on all sales",type:"percentage",value:5,isActive:!0,createdBy:"admin",createdAt:new Date("2024-01-01")},{id:"rule-2",name:"High Value Sales Bonus",description:"10% incentive on sales above $50,000",type:"percentage",value:10,minSalesAmount:5e4,isActive:!0,createdBy:"admin",createdAt:new Date("2024-02-01")},{id:"rule-3",name:"Product A Special",description:"Fixed $500 bonus for Product A sales",type:"fixed",value:500,productCategory:"Product A",isActive:!0,createdBy:"team-lead-1",createdAt:new Date("2024-03-01")},{id:"rule-4",name:"Tiered Volume Incentive",description:"15% incentive on sales above $100,000",type:"tiered",value:15,minSalesAmount:1e5,isActive:!1,createdBy:"admin",createdAt:new Date("2024-04-01")}]}generateIncentivesEarned(){console.log("[DummyDataService] Generating incentives earned");const e=[],t=this.generateSalesExecutives(),r=this.generateIncentiveRules(),n=["pending","approved","paid"];for(let o=0;o<30;o++){const i=t[o%t.length],a=r[o%r.length],u=Math.floor(o/10),p=new Date;p.setMonth(p.getMonth()-u),e.push({id:`incentive-${o+1}`,salesExecutiveId:i.id,salesExecutiveName:i.name,ruleId:a.id,ruleName:a.name,salesRecordId:`sale-${o+1}`,amount:Math.floor(5e3*Math.random())+500,earnedDate:p,status:n[o%3]})}return e}getSalesRecordsForExecutive(e){console.log("[DummyDataService] getSalesRecordsForExecutive() called for:",e);const t=this.salesRecordsSubject.value.filter(r=>r.salesExecutiveId===e);return console.log("[DummyDataService] Found",t.length,"sales records for executive:",e),t}getIncentivesForExecutive(e){console.log("[DummyDataService] getIncentivesForExecutive() called for:",e);const t=this.incentivesEarnedSubject.value.filter(r=>r.salesExecutiveId===e);return console.log("[DummyDataService] Found",t.length,"incentives for executive:",e),t}getReportDataForExecutive(e){console.log("[DummyDataService] getReportDataForExecutive() called for:",e);const t=this.salesExecutivesSubject.value.find(p=>p.id===e),r=this.getSalesRecordsForExecutive(e),n=this.getIncentivesForExecutive(e),o=r.filter(p=>"completed"===p.status).reduce((p,d)=>p+d.amount,0),i=n.filter(p=>"pending"!==p.status).reduce((p,d)=>p+d.amount,0),a=[];for(let p=5;p>=0;p--){const d=new Date;d.setMonth(d.getMonth()-p);const I=d.toISOString().substring(0,7),D=r.filter(v=>v.date.toISOString().substring(0,7)===I&&"completed"===v.status).reduce((v,C)=>v+C.amount,0),J=n.filter(v=>v.earnedDate.toISOString().substring(0,7)===I&&"pending"!==v.status).reduce((v,C)=>v+C.amount,0);a.push({month:I,sales:D,incentives:J})}const u={salesExecutiveId:e,salesExecutiveName:t?.name||"Unknown",totalSales:o,totalIncentives:i,period:"Last 6 months",breakdown:a};return console.log("[DummyDataService] Report data generated:",u),u}getSalesExecutives(){const e=this.salesExecutivesSubject.value;return console.log("[DummyDataService] getSalesExecutives() called, returning",e.length,"executives"),e}getIncentiveRules(){const e=this.incentiveRulesSubject.value;return console.log("[DummyDataService] getIncentiveRules() called, returning",e.length,"rules"),e}addIncentiveRule(e){console.log("[DummyDataService] addIncentiveRule() called with:",e),this.incentiveRulesSubject.next([...this.incentiveRulesSubject.value,e]),console.log("[DummyDataService] Rule added successfully, total rules:",this.incentiveRulesSubject.value.length)}updateIncentiveRule(e,t){console.log("[DummyDataService] updateIncentiveRule() called for rule:",e,"with updates:",t);const n=this.incentiveRulesSubject.value.map(o=>o.id===e?{...o,...t}:o);this.incentiveRulesSubject.next(n),console.log("[DummyDataService] Rule updated successfully")}deleteIncentiveRule(e){console.log("[DummyDataService] deleteIncentiveRule() called for rule:",e);const r=this.incentiveRulesSubject.value.filter(n=>n.id!==e);this.incentiveRulesSubject.next(r),console.log("[DummyDataService] Rule deleted successfully, remaining rules:",this.incentiveRulesSubject.value.length)}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var te=R(1913);let G=(()=>{class s{constructor(){this.mfeConfigs=[],this.loadedMfesSubject=new f.BehaviorSubject(new Set),this.loadedMfes$=this.loadedMfesSubject.asObservable(),this.loadingMfesSubject=new f.BehaviorSubject(new Set),this.loadingMfes$=this.loadingMfesSubject.asObservable(),console.log("[MfeLoaderService] Service initialized")}setConfigs(e){console.log("[MfeLoaderService] setConfigs() called with",e.length,"configurations"),this.mfeConfigs=e.sort((t,r)=>r.priority-t.priority),console.log("[MfeLoaderService] Configurations sorted by priority:",this.mfeConfigs.map(t=>({name:t.name,priority:t.priority})))}getConfigs(){return console.log("[MfeLoaderService] getConfigs() called, returning",this.mfeConfigs.length,"configurations"),this.mfeConfigs}getConfigsForRole(e){console.log("[MfeLoaderService] getConfigsForRole() called for role:",e);const t=this.mfeConfigs.filter(r=>r.allowedRoles.includes(e));return console.log("[MfeLoaderService] Found",t.length,"configurations for role:",e,t.map(r=>r.name)),t}getConfigByName(e){console.log("[MfeLoaderService] getConfigByName() called for:",e);const t=this.mfeConfigs.find(r=>r.name===e);return t?console.log("[MfeLoaderService] Found configuration for:",e):console.warn("[MfeLoaderService] Configuration not found for:",e),t}preloadPriorityMfes(e){var t=this;return(0,A.A)(function*(){console.log("[MfeLoaderService] preloadPriorityMfes() called for role:",e);const n=t.getConfigsForRole(e).filter(i=>i.priority>=5);console.log("[MfeLoaderService] Preloading",n.length,"priority MFEs:",n.map(i=>({name:i.name,priority:i.priority})));const o=n.map(i=>t.loadMfe(i));yield Promise.all(o),console.log("[MfeLoaderService] Preloading complete")})()}loadMfe(e){var t=this;return(0,A.A)(function*(){const r=t.loadingMfesSubject.value,n=t.loadedMfesSubject.value;if(n.has(e.name))console.log(`[MfeLoaderService] MFE ${e.name} already loaded`);else if(r.has(e.name))console.log(`[MfeLoaderService] MFE ${e.name} is already loading`);else try{const o=new Set(r);o.add(e.name),t.loadingMfesSubject.next(o),console.log(`[MfeLoaderService] Loading MFE ${e.name} (priority: ${e.priority})`),console.log("[MfeLoaderService] MFE config:",{name:e.name,url:e.url,exposedModule:e.exposedModule,remoteName:e.remoteName});const i=yield(0,te.loadRemoteModule)({type:"module",remoteEntry:e.url,exposedModule:e.exposedModule}),a=new Set(n);a.add(e.name),t.loadedMfesSubject.next(a);const u=new Set(t.loadingMfesSubject.value);return u.delete(e.name),t.loadingMfesSubject.next(u),console.log(`[MfeLoaderService] Successfully loaded MFE ${e.name}`),console.log("[MfeLoaderService] Currently loaded MFEs:",Array.from(t.loadedMfesSubject.value)),i}catch(o){console.error(`[MfeLoaderService] Error loading MFE ${e.name}:`,o),console.error("[MfeLoaderService] Failed config:",{name:e.name,url:e.url,exposedModule:e.exposedModule});const i=new Set(t.loadingMfesSubject.value);throw i.delete(e.name),t.loadingMfesSubject.next(i),o}})()}isMfeLoaded(e){const t=this.loadedMfesSubject.value.has(e);return console.log(`[MfeLoaderService] isMfeLoaded(${e}):`,t),t}isMfeLoading(e){const t=this.loadingMfesSubject.value.has(e);return console.log(`[MfeLoaderService] isMfeLoading(${e}):`,t),t}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),Y=(()=>{class s{constructor(e){this.zone=e}listen(){const e=new EventSource("https://stream.wikimedia.org/v2/stream/recentchange");return(0,f.fromEvent)(e,"message").pipe((0,l.map)(t=>{let r;return this.zone.run(()=>r=t.data),r}))}static{this.\u0275fac=function(t){return new(t||s)(m.\u0275\u0275inject(m.NgZone))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),q=(()=>{class s{constructor(e){this.zone=e}start(e){this.eventSource=new EventSource(e);const t=this.eventSource;return new f.Observable(r=>{const n=(0,f.fromEvent)(t,"message").subscribe(o=>{this.zone.run(()=>r.next(o.data))});return t.onerror=o=>{this.zone.run(()=>r.error(o))},()=>{n.unsubscribe(),t.close()}})}stop(){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0)}static{this.\u0275fac=function(t){return new(t||s)(m.\u0275\u0275inject(m.NgZone))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();const X=(s,h)=>new f.Observable(e=>{let t;return(0,A.A)(function*(){const{urlWithParams:n}=s,i=yield caches.open("http"),a=yield i.match(n);if(a){let u;console.log("Serve from Cache for",n);try{u=yield a.clone().json()}catch{u=yield a.clone().text()}return e.next(new x.HttpResponse({body:u,status:a.status||200,url:s.urlWithParams})),void e.complete()}var u;t=h(s).subscribe({next:(u=(0,A.A)(function*(p){if(console.log("Cache miss for ",n),e.next(p),p instanceof x.HttpResponse&&p.ok){const d=new Response(JSON.stringify(p.body),{headers:{"Content-Type":"application/json"},status:p.status,statusText:p.statusText});yield i.put(s.urlWithParams,d)}}),function(d){return u.apply(this,arguments)}),error:u=>e.error(u),complete:()=>e.complete()})})(),()=>t?.unsubscribe()});let z=(()=>{class s{constructor(){this.DEFAULT_BRAND_ID="default",this.STORAGE_KEY="current_brand_id";const e=this.getStoredBrandId();this.brandIdSubject=new f.BehaviorSubject(e),this.brandId$=this.brandIdSubject.asObservable()}getStoredBrandId(){return sessionStorage.getItem(this.STORAGE_KEY)??this.DEFAULT_BRAND_ID}getBrandId(){return this.brandIdSubject.value}setBrandId(e){e?.trim()||(console.warn("[BrandContextService] Invalid brand ID, using default"),e=this.DEFAULT_BRAND_ID),sessionStorage.setItem(this.STORAGE_KEY,e),this.brandIdSubject.next(e),console.log("[BrandContextService] Brand ID updated to:",e)}resetToDefault(){this.setBrandId(this.DEFAULT_BRAND_ID)}clear(){sessionStorage.removeItem(this.STORAGE_KEY),this.brandIdSubject.next(this.DEFAULT_BRAND_ID)}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();const E={baseUrl:"https://7f1m8qlvpd.execute-api.us-east-1.amazonaws.com/db",timeout:3e4},S={health:s=>`/health?brandId=${s}`,info:"/",seed:s=>`/seed/${s}`,clearData:s=>`/data/${s}`,users:{list:s=>`/users/${s}`,getById:(s,h)=>`/users/${s}/${h}`,create:s=>`/users/${s}`},incentiveRules:{list:s=>`/incentive-rules/${s}`,getById:(s,h)=>`/incentive-rules/${s}/${h}`,create:s=>`/incentive-rules/${s}`,update:(s,h)=>`/incentive-rules/${s}/${h}`,delete:(s,h)=>`/incentive-rules/${s}/${h}`},incentives:{list:(s,h)=>{const e=new URLSearchParams;h?.userId&&e.append("userId",h.userId),h?.status&&e.append("status",h.status);const t=e.toString();return`/incentives/${s}${t?"?"+t:""}`},getById:(s,h)=>`/incentives/${s}/${h}`,create:s=>`/incentives/${s}`,update:(s,h)=>`/incentives/${s}/${h}`},targets:{list:(s,h)=>{const e=new URLSearchParams;h?.userId&&e.append("userId",h.userId),h?.status&&e.append("status",h.status);const t=e.toString();return`/targets/${s}${t?"?"+t:""}`},getById:(s,h)=>`/targets/${s}/${h}`,create:s=>`/targets/${s}`,update:(s,h)=>`/targets/${s}/${h}`,delete:(s,h)=>`/targets/${s}/${h}`},tasks:{list:(s,h)=>{const e=new URLSearchParams;h?.userId&&e.append("userId",h.userId),h?.status&&e.append("status",h.status);const t=e.toString();return`/tasks/${s}${t?"?"+t:""}`},getById:(s,h)=>`/tasks/${s}/${h}`,create:s=>`/tasks/${s}`,update:(s,h)=>`/tasks/${s}/${h}`,delete:(s,h)=>`/tasks/${s}/${h}`}},c=(s,h=E)=>`${h.baseUrl}${s}`,g=s=>{Object.assign(E,s)};let b=(()=>{class s{constructor(e,t){this.http=e,this.brandContext=t}getRules(){const e=this.brandContext.getBrandId(),t=S.incentiveRules.list(e),r=c(t);return this.http.get(r).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(n=>n.data),(0,l.catchError)(this.handleError("getRules",[])))}getRuleById(e){if(!this.isValidId(e))return(0,f.of)(null);const t=this.brandContext.getBrandId(),r=S.incentiveRules.getById(t,e),n=c(r);return this.http.get(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("getRuleById",null)))}createRule(e){if(!this.isValidRuleRequest(e))return console.error("[IncentiveRulesApiService] Invalid rule request"),(0,f.of)(null);const t=this.brandContext.getBrandId(),r=S.incentiveRules.create(t),n=c(r);return this.http.post(n,e).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("createRule",null)))}updateRule(e,t){if(!this.isValidId(e))return(0,f.of)(null);const r=this.brandContext.getBrandId(),n=S.incentiveRules.update(r,e),o=c(n);return this.http.put(o,t).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(i=>i.data),(0,l.catchError)(this.handleError("updateRule",null)))}deleteRule(e){if(!this.isValidId(e))return(0,f.of)(!1);const t=this.brandContext.getBrandId(),r=S.incentiveRules.delete(t,e),n=c(r);return this.http.delete(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(()=>!0),(0,l.catchError)(this.handleError("deleteRule",!1)))}isValidId(e){return!!e&&e.trim().length>0}isValidRuleRequest(e){return!!(e.name?.trim()&&e.description?.trim()&&e.type&&"number"==typeof e.value)}handleError(e,t){return r=>{console.error(`[IncentiveRulesApiService] ${e} failed:`,r);const n=this.extractApiError(r);return console.error("[IncentiveRulesApiService] API Error:",n),void 0!==t?(0,f.of)(t):(0,f.throwError)(()=>r)}}extractApiError(e){return e.error&&"object"==typeof e.error?e.error:{error:e.statusText||"Unknown Error",message:e.message||"An unexpected error occurred",statusCode:e.status,timestamp:(new Date).toISOString()}}static{this.\u0275fac=function(t){return new(t||s)(m.\u0275\u0275inject(x.HttpClient),m.\u0275\u0275inject(z))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),O=(()=>{class s{constructor(e,t){this.http=e,this.brandContext=t}getIncentives(e){const t=this.brandContext.getBrandId(),r=S.incentives.list(t,e),n=c(r);return this.http.get(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("getIncentives",[])))}getIncentiveById(e){if(!this.isValidId(e))return(0,f.of)(null);const t=this.brandContext.getBrandId(),r=S.incentives.getById(t,e),n=c(r);return this.http.get(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("getIncentiveById",null)))}createIncentive(e){if(!this.isValidIncentiveRequest(e))return console.error("[IncentivesApiService] Invalid incentive request"),(0,f.of)(null);const t=this.brandContext.getBrandId(),r=S.incentives.create(t),n=c(r);return this.http.post(n,e).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("createIncentive",null)))}updateIncentive(e,t){if(!this.isValidId(e))return(0,f.of)(null);const r=this.brandContext.getBrandId(),n=S.incentives.update(r,e),o=c(n);return this.http.put(o,t).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(i=>i.data),(0,l.catchError)(this.handleError("updateIncentive",null)))}isValidId(e){return!!e&&e.trim().length>0}isValidIncentiveRequest(e){return!!(e.userId?.trim()&&e.ruleId?.trim()&&"number"==typeof e.amount&&e.earnedDate)}handleError(e,t){return r=>{console.error(`[IncentivesApiService] ${e} failed:`,r);const n=this.extractApiError(r);return console.error("[IncentivesApiService] API Error:",n),void 0!==t?(0,f.of)(t):(0,f.throwError)(()=>r)}}extractApiError(e){return e.error&&"object"==typeof e.error?e.error:{error:e.statusText||"Unknown Error",message:e.message||"An unexpected error occurred",statusCode:e.status,timestamp:(new Date).toISOString()}}static{this.\u0275fac=function(t){return new(t||s)(m.\u0275\u0275inject(x.HttpClient),m.\u0275\u0275inject(z))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),M=(()=>{class s{constructor(e,t){this.http=e,this.brandContext=t}getTargets(e){const t=this.brandContext.getBrandId(),r=S.targets.list(t,e),n=c(r);return this.http.get(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("getTargets",[])))}getTargetById(e){if(!this.isValidId(e))return(0,f.of)(null);const t=this.brandContext.getBrandId(),r=S.targets.getById(t,e),n=c(r);return this.http.get(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("getTargetById",null)))}createTarget(e){if(!this.isValidTargetRequest(e))return console.error("[TargetsApiService] Invalid target request"),(0,f.of)(null);const t=this.brandContext.getBrandId(),r=S.targets.create(t),n=c(r);return this.http.post(n,e).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("createTarget",null)))}updateTarget(e,t){if(!this.isValidId(e))return(0,f.of)(null);const r=this.brandContext.getBrandId(),n=S.targets.update(r,e),o=c(n);return this.http.put(o,t).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(i=>i.data),(0,l.catchError)(this.handleError("updateTarget",null)))}deleteTarget(e){if(!this.isValidId(e))return(0,f.of)(!1);const t=this.brandContext.getBrandId(),r=S.targets.delete(t,e),n=c(r);return this.http.delete(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(()=>!0),(0,l.catchError)(this.handleError("deleteTarget",!1)))}isValidId(e){return!!e&&e.trim().length>0}isValidTargetRequest(e){return!!(e.userId?.trim()&&e.name?.trim()&&"number"==typeof e.targetValue&&e.unit?.trim()&&e.startDate&&e.endDate)}handleError(e,t){return r=>{console.error(`[TargetsApiService] ${e} failed:`,r);const n=this.extractApiError(r);return console.error("[TargetsApiService] API Error:",n),void 0!==t?(0,f.of)(t):(0,f.throwError)(()=>r)}}extractApiError(e){return e.error&&"object"==typeof e.error?e.error:{error:e.statusText||"Unknown Error",message:e.message||"An unexpected error occurred",statusCode:e.status,timestamp:(new Date).toISOString()}}static{this.\u0275fac=function(t){return new(t||s)(m.\u0275\u0275inject(x.HttpClient),m.\u0275\u0275inject(z))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),_=(()=>{class s{constructor(e,t){this.http=e,this.brandContext=t}getTasks(e){const t=this.brandContext.getBrandId(),r=S.tasks.list(t,e),n=c(r);return this.http.get(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("getTasks",[])))}getTaskById(e){if(!this.isValidId(e))return(0,f.of)(null);const t=this.brandContext.getBrandId(),r=S.tasks.getById(t,e),n=c(r);return this.http.get(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("getTaskById",null)))}createTask(e){if(!this.isValidTaskRequest(e))return console.error("[TasksApiService] Invalid task request"),(0,f.of)(null);const t=this.brandContext.getBrandId(),r=S.tasks.create(t),n=c(r);return this.http.post(n,e).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("createTask",null)))}updateTask(e,t){if(!this.isValidId(e))return(0,f.of)(null);const r=this.brandContext.getBrandId(),n=S.tasks.update(r,e),o=c(n);return this.http.put(o,t).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(i=>i.data),(0,l.catchError)(this.handleError("updateTask",null)))}deleteTask(e){if(!this.isValidId(e))return(0,f.of)(!1);const t=this.brandContext.getBrandId(),r=S.tasks.delete(t,e),n=c(r);return this.http.delete(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(()=>!0),(0,l.catchError)(this.handleError("deleteTask",!1)))}isValidId(e){return!!e&&e.trim().length>0}isValidTaskRequest(e){return!!(e.userId?.trim()&&e.title?.trim()&&e.priority)}handleError(e,t){return r=>{console.error(`[TasksApiService] ${e} failed:`,r);const n=this.extractApiError(r);return console.error("[TasksApiService] API Error:",n),void 0!==t?(0,f.of)(t):(0,f.throwError)(()=>r)}}extractApiError(e){return e.error&&"object"==typeof e.error?e.error:{error:e.statusText||"Unknown Error",message:e.message||"An unexpected error occurred",statusCode:e.status,timestamp:(new Date).toISOString()}}static{this.\u0275fac=function(t){return new(t||s)(m.\u0275\u0275inject(x.HttpClient),m.\u0275\u0275inject(z))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();const V=(s,h)=>{const t=(0,m.inject)(T).getToken();return!t||ne(s.url)?h(s):h(s.clone({setHeaders:{Authorization:`Bearer ${t}`}}))},ne=s=>["/oauth","/auth","zitadel.cloud"].some(e=>s.includes(e))},5766:(re,$,R)=>{R.r($),R.d($,{getManifest:()=>te,initFederation:()=>G,loadManifest:()=>q,loadRemoteEntry:()=>T,loadRemoteModule:()=>w,setManifest:()=>Q});var m=R(467);let N={};const A={},f={};let x=!1;function B(){return(B=(0,m.A)(function*(c,g){return(yield A[c].get(g))()})).apply(this,arguments)}function F(c,g){return P.apply(this,arguments)}function P(){return(P=(0,m.A)(function*(c,g){return f[g]||(x||(yield R.I("default"),x=!0),yield c.init(R.S.default),f[g]=!0),c})).apply(this,arguments)}function T(c,g){return L.apply(this,arguments)}function L(){return L=(0,m.A)(function*(c,g){if("string"==typeof c)return yield W(c,g);if("script"===c.type){const b=c;return yield W(b.remoteEntry,b.remoteName)}"module"===c.type&&(yield function y(c){return K.apply(this,arguments)}(c.remoteEntry))}),L.apply(this,arguments)}function K(){return(K=(0,m.A)(function*(c){return A[c]?Promise.resolve():yield import(c).then(g=>{F(g,c),A[c]=g})})).apply(this,arguments)}function W(c,g){return l.apply(this,arguments)}function l(){return(l=(0,m.A)(function*(c,g){return new Promise((b,O)=>{if(A[g])return void b();const M=document.createElement("script");M.src=c,M.onerror=O,M.onload=()=>{const _=window[g];F(_,g),A[g]=_,b()},document.body.appendChild(M)})})).apply(this,arguments)}function w(c,g){return j.apply(this,arguments)}function j(){return j=(0,m.A)(function*(c,g){let b,O,M,_;if(_="string"==typeof c?{type:"manifest",remoteName:c,exposedModule:g}:c,!_.type){const V=Object.keys(N).length>0;_.type=V?"manifest":"script"}if("manifest"===_.type){const V=N[_.remoteName];if(!V)throw new Error("Manifest does not contain "+_.remoteName);_={type:V.type,exposedModule:_.exposedModule,remoteEntry:V.remoteEntry,remoteName:"script"===V.type?_.remoteName:void 0},M=V.remoteEntry}else M=_.remoteEntry;return"script"===_.type?(b={type:"script",remoteEntry:_.remoteEntry,remoteName:_.remoteName},O=_.remoteName):"module"===_.type&&(b={type:"module",remoteEntry:_.remoteEntry},O=_.remoteEntry),M&&(yield T(b)),yield function k(c,g){return B.apply(this,arguments)}(O,_.exposedModule)}),j.apply(this,arguments)}function Q(c){return Z.apply(this,arguments)}function Z(){return(Z=(0,m.A)(function*(c,g=!1){N=z(c),g||(yield E())})).apply(this,arguments)}function te(){return N}function G(c){return Y.apply(this,arguments)}function Y(){return(Y=(0,m.A)(function*(c,g=!1){return"string"==typeof c?q(c,g):Q(c,g)})).apply(this,arguments)}function q(c){return X.apply(this,arguments)}function X(){return(X=(0,m.A)(function*(c,g=!1){const b=yield fetch(c);if(!b.ok)throw Error("could not load configFile: "+c);N=z(yield b.json()),g||(yield E())})).apply(this,arguments)}function z(c){const g={};for(const b in c){const O=c[b];let M;M="string"==typeof O?{remoteEntry:O,type:"module"}:{...O,type:O.type||"module"},g[b]=M}return g}function E(){return S.apply(this,arguments)}function S(){return(S=(0,m.A)(function*(){const c=[];for(const g in N){const b=N[g];c.push(T("module"===b.type?{type:"module",remoteEntry:b.remoteEntry}:{type:"script",remoteEntry:b.remoteEntry,remoteName:g}))}yield Promise.all(c)})).apply(this,arguments)}},467:(re,$,R)=>{function m(A,f,x,k,B,F,P){try{var T=A[F](P),L=T.value}catch(y){return void x(y)}T.done?f(L):Promise.resolve(L).then(k,B)}function N(A){return function(){var f=this,x=arguments;return new Promise(function(k,B){var F=A.apply(f,x);function P(L){m(F,k,B,P,T,"next",L)}function T(L){m(F,k,B,P,T,"throw",L)}P(void 0)})}}R.d($,{A:()=>N})},1635:(re,$,R)=>{R.r($),R.d($,{__addDisposableResource:()=>_,__assign:()=>A,__asyncDelegator:()=>q,__asyncGenerator:()=>Y,__asyncValues:()=>X,__await:()=>G,__awaiter:()=>y,__classPrivateFieldGet:()=>b,__classPrivateFieldIn:()=>M,__classPrivateFieldSet:()=>O,__createBinding:()=>W,__decorate:()=>x,__disposeResources:()=>ne,__esDecorate:()=>B,__exportStar:()=>l,__extends:()=>N,__generator:()=>K,__importDefault:()=>g,__importStar:()=>c,__makeTemplateObject:()=>z,__metadata:()=>L,__param:()=>k,__propKey:()=>P,__read:()=>j,__rest:()=>f,__rewriteRelativeImportExtension:()=>s,__runInitializers:()=>F,__setFunctionName:()=>T,__spread:()=>Q,__spreadArray:()=>te,__spreadArrays:()=>Z,__values:()=>w,default:()=>h});var m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])})(e,t)};function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var A=function(){return A=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++)for(var i in r=arguments[n])Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);return t},A.apply(this,arguments)};function f(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function x(e,t,r,n){var a,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(a=e[u])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function k(e,t){return function(r,n){t(r,n,e)}}function B(e,t,r,n,o,i){function a(ee){if(void 0!==ee&&"function"!=typeof ee)throw new TypeError("Function expected");return ee}for(var D,u=n.kind,p="getter"===u?"get":"setter"===u?"set":"value",d=!t&&e?n.static?e:e.prototype:null,I=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),J=!1,v=r.length-1;v>=0;v--){var C={};for(var U in n)C[U]="access"===U?{}:n[U];for(var U in n.access)C.access[U]=n.access[U];C.addInitializer=function(ee){if(J)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(ee||null))};var H=(0,r[v])("accessor"===u?{get:I.get,set:I.set}:I[p],C);if("accessor"===u){if(void 0===H)continue;if(null===H||"object"!=typeof H)throw new TypeError("Object expected");(D=a(H.get))&&(I.get=D),(D=a(H.set))&&(I.set=D),(D=a(H.init))&&o.unshift(D)}else(D=a(H))&&("field"===u?o.unshift(D):I[p]=D)}d&&Object.defineProperty(d,n.name,I),J=!0}function F(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function P(e){return"symbol"==typeof e?e:"".concat(e)}function T(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function L(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function y(e,t,r,n){return new(r||(r=Promise))(function(i,a){function u(I){try{d(n.next(I))}catch(D){a(D)}}function p(I){try{d(n.throw(I))}catch(D){a(D)}}function d(I){I.done?i(I.value):function o(i){return i instanceof r?i:new r(function(a){a(i)})}(I.value).then(u,p)}d((n=n.apply(e,t||[])).next())})}function K(e,t){var n,o,i,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(d){return function(I){return function p(d){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(i=2&d[0]?o.return:d[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,d[1])).done)return i;switch(o=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===d[0]||2===d[0])){r=0;continue}if(3===d[0]&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(6===d[0]&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(I){d=[6,I],o=0}finally{n=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,I])}}}var W=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function l(e,t){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(t,r)&&W(t,e,r)}function w(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function j(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,a,n=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function Q(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(j(arguments[t]));return e}function Z(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)n[o]=i[a];return n}function te(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function G(e){return this instanceof G?(this.v=e,this):new G(e)}function Y(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,n=r.apply(e,t||[]),i=[];return o=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",function a(v){return function(C){return Promise.resolve(C).then(v,D)}}),o[Symbol.asyncIterator]=function(){return this},o;function u(v,C){n[v]&&(o[v]=function(U){return new Promise(function(H,ee){i.push([v,U,H,ee])>1||p(v,U)})},C&&(o[v]=C(o[v])))}function p(v,C){try{!function d(v){v.value instanceof G?Promise.resolve(v.value.v).then(I,D):J(i[0][2],v)}(n[v](C))}catch(U){J(i[0][3],U)}}function I(v){p("next",v)}function D(v){p("throw",v)}function J(v,C){v(C),i.shift(),i.length&&p(i[0][0],i[0][1])}}function q(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,i){t[o]=e[o]?function(a){return(r=!r)?{value:G(e[o](a)),done:!1}:i?i(a):a}:i}}function X(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,t=e[Symbol.asyncIterator];return t?t.call(e):(e=w(e),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(a){return new Promise(function(u,p){!function o(i,a,u,p){Promise.resolve(p).then(function(d){i({value:d,done:u})},a)}(u,p,(a=e[i](a)).done,a.value)})}}}function z(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var E=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},S=function(e){return(S=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r})(e)};function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=S(e),n=0;n<r.length;n++)"default"!==r[n]&&W(t,e,r[n]);return E(t,e),t}function g(e){return e&&e.__esModule?e:{default:e}}function b(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function O(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}function M(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function _(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(o=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var V="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function ne(e){function t(i){e.error=e.hasError?new V(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;return function o(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(o);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(o,function(a){return t(a),o()})}else n|=1}catch(a){t(a)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function s(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,o,i,a){return n?t?".jsx":".js":!o||i&&a?o+i+"."+a.toLowerCase()+"js":r}):e}const h={__extends:N,__assign:A,__rest:f,__decorate:x,__param:k,__esDecorate:B,__runInitializers:F,__propKey:P,__setFunctionName:T,__metadata:L,__awaiter:y,__generator:K,__createBinding:W,__exportStar:l,__values:w,__read:j,__spread:Q,__spreadArrays:Z,__spreadArray:te,__await:G,__asyncGenerator:Y,__asyncDelegator:q,__asyncValues:X,__makeTemplateObject:z,__importStar:c,__importDefault:g,__classPrivateFieldGet:b,__classPrivateFieldSet:O,__classPrivateFieldIn:M,__addDisposableResource:_,__disposeResources:ne,__rewriteRelativeImportExtension:s}}}]);