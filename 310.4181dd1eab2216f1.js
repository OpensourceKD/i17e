(self.webpackChunkshell=self.webpackChunkshell||[]).push([[310],{1913:(ne,L,b)=>{Object.defineProperty(L,"__esModule",{value:!0}),b(1635).__exportStar(b(5766),L)},8310:(ne,L,b)=>{b.r(L),b.d(L,{AuthService:()=>k,CoreServicesComponent:()=>U,CoreServicesService:()=>T,DummyDataService:()=>W,EventBusService:()=>ee,MfeLoaderService:()=>V,ProductCategory:()=>j,RoleService:()=>P,SalesDataService:()=>G,SalesStatus:()=>R,SseControlService:()=>Y,SseFromEventService:()=>$,UserRole:()=>v,cacheInterceptor:()=>Q,hasRequiredRole:()=>x});var g=b(5565);let T=(()=>{class c{constructor(){}static{this.\u0275fac=function(n){return new(n||c)}}static{this.\u0275prov=g.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();var M=b(467),_=b(4866),N=b(1663);let k=(()=>{class c{constructor(e){this.http=e,this.id="auth of pokemon",this.ISSUER_BASE_URL="https://topfix-wrczmn.us1.zitadel.cloud",this.CLIENT_ID="336777344075263315",this.REDIRECT_URI="https://opensourcekd.github.io/i17e/auth-callback",this.SCOPE="openid profile email",this.TOKEN_KEY="zitadel_token",this.USER_INFO_KEY="zitadel_user_info",this.userSubject=new _.BehaviorSubject(this.getUserInfoFromStorage()),this.user$=this.userSubject.asObservable(),console.log("In constructor of auth service in i17e")}login(e){e&&console.log(`in i17e [AuthService] Logged in: ${e}`),this.redirectToZitadelLogin()}redirectToZitadelLogin(){const e=new URL(`${this.ISSUER_BASE_URL}/oauth/v2/authorize`),n=this.generateRandomState(),a=this.generateCodeVerifier();sessionStorage.setItem("oauth_state",n),sessionStorage.setItem("code_verifier",a),e.searchParams.append("client_id",this.CLIENT_ID),e.searchParams.append("redirect_uri",this.REDIRECT_URI),e.searchParams.append("response_type","code"),e.searchParams.append("scope",this.SCOPE),e.searchParams.append("state",n),window.location.href=e.toString()}handleCallback(e,n){var a=this;return(0,M.A)(function*(){const i=sessionStorage.getItem("oauth_state");if(n!==i)return console.error("[AuthService] State mismatch - possible CSRF attack"),!1;try{const d=yield a.exchangeCodeForToken(e);a.setToken(d.access_token);const h=a.decodeIdToken(d.id_token);return a.setUserInfo(h),sessionStorage.removeItem("oauth_state"),sessionStorage.removeItem("code_verifier"),console.log("[AuthService] Authentication successful"),!0}catch(d){return console.error("[AuthService] Error exchanging code for token:",d),!1}})()}exchangeCodeForToken(e){var n=this;return(0,M.A)(function*(){const a=`${n.ISSUER_BASE_URL}/oauth/v2/token`,i=new URLSearchParams({grant_type:"authorization_code",code:e,redirect_uri:n.REDIRECT_URI,client_id:n.CLIENT_ID}),d=yield fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i.toString()});if(!d.ok)throw new Error(`Token exchange failed: ${d.statusText}`);return d.json()})()}decodeIdToken(e){try{const n=e.split(".")[1],a=JSON.parse(atob(n));return{sub:a.sub,name:a.name,email:a.email}}catch(n){return console.error("[AuthService] Error decoding ID token:",n),{sub:""}}}logout(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.USER_INFO_KEY),this.userSubject.next(null),console.log("[AuthService] User logged out")}getToken(){return localStorage.getItem(this.TOKEN_KEY)}setToken(e){localStorage.setItem(this.TOKEN_KEY,e)}isAuthenticated(){return!!this.getToken()}getUser(){return this.userSubject.value}getUserInfoFromStorage(){const e=localStorage.getItem(this.USER_INFO_KEY);return e?JSON.parse(e):null}setUserInfo(e){localStorage.setItem(this.USER_INFO_KEY,JSON.stringify(e)),this.userSubject.next(e)}generateRandomState(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}generateCodeVerifier(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}static{this.\u0275fac=function(n){return new(n||c)(g.\u0275\u0275inject(N.HttpClient))}}static{this.\u0275prov=g.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),U=(()=>{class c{static{this.\u0275fac=function(n){return new(n||c)}}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:c,selectors:[["org-core-services"]],standalone:!0,features:[g.\u0275\u0275StandaloneFeature],decls:2,vars:0,template:function(n,a){1&n&&(g.\u0275\u0275elementStart(0,"p"),g.\u0275\u0275text(1," core-services works! "),g.\u0275\u0275elementEnd())}})}}return c})();var v=function(c){return c.SUPER_ADMIN="super-admin",c.ORG_ADMIN="org-admin",c.TEAM_LEAD="team-lead",c.SALES_EXECUTIVE="sales-executive",c}(v||{});function x(c,K){const e={[v.SUPER_ADMIN]:4,[v.ORG_ADMIN]:3,[v.TEAM_LEAD]:2,[v.SALES_EXECUTIVE]:1};return e[c]>=e[K]}let P=(()=>{class c{constructor(){this.currentUserSubject=new _.BehaviorSubject(null),this.currentUser$=this.currentUserSubject.asObservable(),console.log("[RoleService] Service initialized"),this.loadDummyUser()}loadDummyUser(){console.log("[RoleService] Loading user from session storage");const e=sessionStorage.getItem("current_user");if(e){const n=JSON.parse(e);console.log("[RoleService] User loaded from session:",n),this.currentUserSubject.next(n)}else{const n={id:"1",name:"John Doe",email:"john.doe@example.com",role:v.ORG_ADMIN};console.log("[RoleService] No saved user found, using default:",n),this.setCurrentUser(n)}}setCurrentUser(e){console.log("[RoleService] Setting current user:",e),this.currentUserSubject.next(e),e?(sessionStorage.setItem("current_user",JSON.stringify(e)),console.log("[RoleService] User saved to session storage")):(sessionStorage.removeItem("current_user"),console.log("[RoleService] User removed from session storage"))}getCurrentUser(){const e=this.currentUserSubject.value;return console.log("[RoleService] getCurrentUser() called, returning:",e),e}getCurrentUserRole(){const e=this.currentUserSubject.value?.role||null;return console.log("[RoleService] getCurrentUserRole() called, returning:",e),e}hasRole(e){const n=this.getCurrentUserRole();if(!n)return console.log("[RoleService] hasRole() - No current role, access denied"),!1;const a=x(n,e);return console.log(`[RoleService] hasRole() - Checking if ${n} has ${e}:`,a),a}canViewOthersData(){const e=this.getCurrentUserRole(),n=e===v.SUPER_ADMIN||e===v.ORG_ADMIN||e===v.TEAM_LEAD;return console.log(`[RoleService] canViewOthersData() - Role: ${e}, Can view:`,n),n}getViewableUsers(){const e=this.getCurrentUser();if(!e)return[];const n=this.getAllUsers();return this.isTeamLeadOrHigher()?n.filter(a=>a.role===v.SALES_EXECUTIVE||a.id===e.id):n.filter(a=>a.id===e.id)}hasAnyRole(e){const n=this.getCurrentUser();return!!n&&e.includes(n.role)}isAdmin(){return this.hasAnyRole([v.SUPER_ADMIN,v.ORG_ADMIN])}isTeamLeadOrHigher(){return this.hasAnyRole([v.SUPER_ADMIN,v.ORG_ADMIN,v.TEAM_LEAD])}getAllUsers(){return[{id:"1",name:"John Doe",email:"john.doe@company.com",role:v.SUPER_ADMIN},{id:"user-1",name:"John Admin",email:"john.admin@company.com",role:v.SUPER_ADMIN},{id:"user-2",name:"Sarah Manager",email:"sarah.manager@company.com",role:v.ORG_ADMIN},{id:"user-3",name:"Mike Lead",email:"mike.lead@company.com",role:v.TEAM_LEAD,teamId:"team-1"},{id:"user-4",name:"Alice Sales",email:"alice.sales@company.com",role:v.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-5",name:"Bob Sales",email:"bob.sales@company.com",role:v.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-6",name:"Carol Sales",email:"carol.sales@company.com",role:v.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"}]}static{this.\u0275fac=function(n){return new(n||c)}}static{this.\u0275prov=g.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();var D=b(2778),R=function(c){return c.COMPLETED="completed",c.PENDING="pending",c.CANCELLED="cancelled",c}(R||{}),j=function(c){return c.ELECTRONICS="Electronics",c.SOFTWARE="Software",c.SERVICES="Services",c.HARDWARE="Hardware",c}(j||{});let G=(()=>{class c{constructor(){this.dummySalesData=this.generateDummyData(),console.log("IN sales data service of SHELLLL")}getSalesHistory(e,n,a){let i=this.dummySalesData.filter(d=>d.salesExecutiveId===e);return n&&(i=i.filter(d=>d.date>=n)),a&&(i=i.filter(d=>d.date<=a)),(0,_.of)(i).pipe((0,D.delay)(300))}getSalesSummary(e){const n=this.dummySalesData.filter(i=>i.salesExecutiveId===e),a={totalSales:n.filter(i=>i.status===R.COMPLETED).reduce((i,d)=>i+d.amount,0),totalCommission:n.filter(i=>i.status===R.COMPLETED).reduce((i,d)=>i+d.commission,0),completedCount:n.filter(i=>i.status===R.COMPLETED).length,pendingCount:n.filter(i=>i.status===R.PENDING).length,cancelledCount:n.filter(i=>i.status===R.CANCELLED).length};return(0,_.of)(a).pipe((0,D.delay)(300))}getAllSales(){return(0,_.of)(this.dummySalesData).pipe((0,D.delay)(300))}generateDummyData(){const e=[{name:"Enterprise Software License",category:j.SOFTWARE,basePrice:5e4},{name:"Cloud Storage Solution",category:j.SERVICES,basePrice:25e3},{name:"Server Hardware",category:j.HARDWARE,basePrice:35e3},{name:"IoT Device Package",category:j.ELECTRONICS,basePrice:15e3},{name:"Consulting Services",category:j.SERVICES,basePrice:2e4},{name:"Mobile App Development",category:j.SOFTWARE,basePrice:45e3},{name:"Security Suite",category:j.SOFTWARE,basePrice:3e4},{name:"Network Infrastructure",category:j.HARDWARE,basePrice:6e4}],n=["Acme Corporation","Tech Innovations Inc","Global Solutions Ltd","Digital Dynamics","Future Systems","Smart Technologies","Enterprise Solutions","Cloud Masters"],a=["North","South","East","West","Central"],i=[{id:"1",name:"John Doe"},{id:"user-4",name:"Alice Sales"},{id:"user-5",name:"Bob Sales"},{id:"user-6",name:"Carol Sales"}],d=[R.COMPLETED,R.COMPLETED,R.COMPLETED,R.PENDING,R.CANCELLED],h=[];let S=1;for(let f=0;f<50;f++){const y=i[f%i.length],A=e[Math.floor(Math.random()*e.length)],X=n[Math.floor(Math.random()*n.length)],te=a[Math.floor(Math.random()*a.length)],t=d[Math.floor(Math.random()*d.length)],r=A.basePrice+(1e4*Math.random()-5e3),o=.05*r,s=new Date;s.setDate(s.getDate()-Math.floor(180*Math.random())),h.push({id:"sale-"+S++,salesExecutiveId:y.id,salesExecutiveName:y.name,productName:A.name,productCategory:A.category,amount:Math.round(r),commission:Math.round(o),status:t,date:s,clientName:X,region:te})}return h.sort((f,y)=>y.date.getTime()-f.date.getTime())}static{this.\u0275fac=function(n){return new(n||c)}}static{this.\u0275prov=g.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),W=(()=>{class c{constructor(){this.salesExecutivesSubject=new _.BehaviorSubject(this.generateSalesExecutives()),this.salesExecutives$=this.salesExecutivesSubject.asObservable(),this.salesRecordsSubject=new _.BehaviorSubject(this.generateSalesRecords()),this.salesRecords$=this.salesRecordsSubject.asObservable(),this.incentiveRulesSubject=new _.BehaviorSubject(this.generateIncentiveRules()),this.incentiveRules$=this.incentiveRulesSubject.asObservable(),this.incentivesEarnedSubject=new _.BehaviorSubject(this.generateIncentivesEarned()),this.incentivesEarned$=this.incentivesEarnedSubject.asObservable(),console.log("[DummyDataService] Service initialized"),console.log("[DummyDataService] Generated data:",{salesExecutives:this.salesExecutivesSubject.value.length,salesRecords:this.salesRecordsSubject.value.length,incentiveRules:this.incentiveRulesSubject.value.length,incentivesEarned:this.incentivesEarnedSubject.value.length})}generateSalesExecutives(){return console.log("[DummyDataService] Generating sales executives"),[{id:"1",name:"John Doe",email:"john.doe@example.com",teamId:"team1"},{id:"2",name:"Jane Smith",email:"jane.smith@example.com",teamId:"team1"},{id:"3",name:"Bob Johnson",email:"bob.johnson@example.com",teamId:"team2"},{id:"4",name:"Alice Williams",email:"alice.williams@example.com",teamId:"team2"},{id:"5",name:"Charlie Brown",email:"charlie.brown@example.com",teamId:"team1"}]}generateSalesRecords(){console.log("[DummyDataService] Generating sales records");const e=[],n=this.generateSalesExecutives(),a=["Product A","Product B","Product C","Product D"],i=[R.COMPLETED,R.PENDING,R.CANCELLED];for(let d=0;d<50;d++){const h=n[d%n.length],S=Math.floor(d/10),f=new Date;f.setMonth(f.getMonth()-S),e.push({id:`sale-${d+1}`,salesExecutiveId:h.id,salesExecutiveName:h.name,date:f,productName:a[d%a.length],productCategory:j.SOFTWARE,amount:Math.floor(5e4*Math.random())+1e4,commission:Math.floor(5e3*Math.random()),quantity:Math.floor(10*Math.random())+1,status:i[d%i.length],clientName:`Client ${d+1}`,region:["North","South","East","West"][d%4]})}return e}generateIncentiveRules(){return console.log("[DummyDataService] Generating incentive rules"),[{id:"rule-1",name:"Basic Sales Incentive",description:"5% incentive on all sales",type:"percentage",value:5,isActive:!0,createdBy:"admin",createdAt:new Date("2024-01-01")},{id:"rule-2",name:"High Value Sales Bonus",description:"10% incentive on sales above $50,000",type:"percentage",value:10,minSalesAmount:5e4,isActive:!0,createdBy:"admin",createdAt:new Date("2024-02-01")},{id:"rule-3",name:"Product A Special",description:"Fixed $500 bonus for Product A sales",type:"fixed",value:500,productCategory:"Product A",isActive:!0,createdBy:"team-lead-1",createdAt:new Date("2024-03-01")},{id:"rule-4",name:"Tiered Volume Incentive",description:"15% incentive on sales above $100,000",type:"tiered",value:15,minSalesAmount:1e5,isActive:!1,createdBy:"admin",createdAt:new Date("2024-04-01")}]}generateIncentivesEarned(){console.log("[DummyDataService] Generating incentives earned");const e=[],n=this.generateSalesExecutives(),a=this.generateIncentiveRules(),i=["pending","approved","paid"];for(let d=0;d<30;d++){const h=n[d%n.length],S=a[d%a.length],f=Math.floor(d/10),y=new Date;y.setMonth(y.getMonth()-f),e.push({id:`incentive-${d+1}`,salesExecutiveId:h.id,salesExecutiveName:h.name,ruleId:S.id,ruleName:S.name,salesRecordId:`sale-${d+1}`,amount:Math.floor(5e3*Math.random())+500,earnedDate:y,status:i[d%3]})}return e}getSalesRecordsForExecutive(e){console.log("[DummyDataService] getSalesRecordsForExecutive() called for:",e);const n=this.salesRecordsSubject.value.filter(a=>a.salesExecutiveId===e);return console.log("[DummyDataService] Found",n.length,"sales records for executive:",e),n}getIncentivesForExecutive(e){console.log("[DummyDataService] getIncentivesForExecutive() called for:",e);const n=this.incentivesEarnedSubject.value.filter(a=>a.salesExecutiveId===e);return console.log("[DummyDataService] Found",n.length,"incentives for executive:",e),n}getReportDataForExecutive(e){console.log("[DummyDataService] getReportDataForExecutive() called for:",e);const n=this.salesExecutivesSubject.value.find(y=>y.id===e),a=this.getSalesRecordsForExecutive(e),i=this.getIncentivesForExecutive(e),d=a.filter(y=>"completed"===y.status).reduce((y,A)=>y+A.amount,0),h=i.filter(y=>"pending"!==y.status).reduce((y,A)=>y+A.amount,0),S=[];for(let y=5;y>=0;y--){const A=new Date;A.setMonth(A.getMonth()-y);const X=A.toISOString().substring(0,7),te=a.filter(r=>r.date.toISOString().substring(0,7)===X&&"completed"===r.status).reduce((r,o)=>r+o.amount,0),t=i.filter(r=>r.earnedDate.toISOString().substring(0,7)===X&&"pending"!==r.status).reduce((r,o)=>r+o.amount,0);S.push({month:X,sales:te,incentives:t})}const f={salesExecutiveId:e,salesExecutiveName:n?.name||"Unknown",totalSales:d,totalIncentives:h,period:"Last 6 months",breakdown:S};return console.log("[DummyDataService] Report data generated:",f),f}getSalesExecutives(){const e=this.salesExecutivesSubject.value;return console.log("[DummyDataService] getSalesExecutives() called, returning",e.length,"executives"),e}getIncentiveRules(){const e=this.incentiveRulesSubject.value;return console.log("[DummyDataService] getIncentiveRules() called, returning",e.length,"rules"),e}addIncentiveRule(e){console.log("[DummyDataService] addIncentiveRule() called with:",e),this.incentiveRulesSubject.next([...this.incentiveRulesSubject.value,e]),console.log("[DummyDataService] Rule added successfully, total rules:",this.incentiveRulesSubject.value.length)}updateIncentiveRule(e,n){console.log("[DummyDataService] updateIncentiveRule() called for rule:",e,"with updates:",n);const i=this.incentiveRulesSubject.value.map(d=>d.id===e?{...d,...n}:d);this.incentiveRulesSubject.next(i),console.log("[DummyDataService] Rule updated successfully")}deleteIncentiveRule(e){console.log("[DummyDataService] deleteIncentiveRule() called for rule:",e);const a=this.incentiveRulesSubject.value.filter(i=>i.id!==e);this.incentiveRulesSubject.next(a),console.log("[DummyDataService] Rule deleted successfully, remaining rules:",this.incentiveRulesSubject.value.length)}static{this.\u0275fac=function(n){return new(n||c)}}static{this.\u0275prov=g.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();var H=b(1913);let V=(()=>{class c{constructor(){this.mfeConfigs=[],this.loadedMfesSubject=new _.BehaviorSubject(new Set),this.loadedMfes$=this.loadedMfesSubject.asObservable(),this.loadingMfesSubject=new _.BehaviorSubject(new Set),this.loadingMfes$=this.loadingMfesSubject.asObservable(),console.log("[MfeLoaderService] Service initialized")}setConfigs(e){console.log("[MfeLoaderService] setConfigs() called with",e.length,"configurations"),this.mfeConfigs=e.sort((n,a)=>a.priority-n.priority),console.log("[MfeLoaderService] Configurations sorted by priority:",this.mfeConfigs.map(n=>({name:n.name,priority:n.priority})))}getConfigs(){return console.log("[MfeLoaderService] getConfigs() called, returning",this.mfeConfigs.length,"configurations"),this.mfeConfigs}getConfigsForRole(e){console.log("[MfeLoaderService] getConfigsForRole() called for role:",e);const n=this.mfeConfigs.filter(a=>a.allowedRoles.includes(e));return console.log("[MfeLoaderService] Found",n.length,"configurations for role:",e,n.map(a=>a.name)),n}getConfigByName(e){console.log("[MfeLoaderService] getConfigByName() called for:",e);const n=this.mfeConfigs.find(a=>a.name===e);return n?console.log("[MfeLoaderService] Found configuration for:",e):console.warn("[MfeLoaderService] Configuration not found for:",e),n}preloadPriorityMfes(e){var n=this;return(0,M.A)(function*(){console.log("[MfeLoaderService] preloadPriorityMfes() called for role:",e);const i=n.getConfigsForRole(e).filter(h=>h.priority>=5);console.log("[MfeLoaderService] Preloading",i.length,"priority MFEs:",i.map(h=>({name:h.name,priority:h.priority})));const d=i.map(h=>n.loadMfe(h));yield Promise.all(d),console.log("[MfeLoaderService] Preloading complete")})()}loadMfe(e){var n=this;return(0,M.A)(function*(){const a=n.loadingMfesSubject.value,i=n.loadedMfesSubject.value;if(i.has(e.name))console.log(`[MfeLoaderService] MFE ${e.name} already loaded`);else if(a.has(e.name))console.log(`[MfeLoaderService] MFE ${e.name} is already loading`);else try{const d=new Set(a);d.add(e.name),n.loadingMfesSubject.next(d),console.log(`[MfeLoaderService] Loading MFE ${e.name} (priority: ${e.priority})`),console.log("[MfeLoaderService] MFE config:",{name:e.name,url:e.url,exposedModule:e.exposedModule,remoteName:e.remoteName});const h=yield(0,H.loadRemoteModule)({type:"module",remoteEntry:e.url,exposedModule:e.exposedModule}),S=new Set(i);S.add(e.name),n.loadedMfesSubject.next(S);const f=new Set(n.loadingMfesSubject.value);return f.delete(e.name),n.loadingMfesSubject.next(f),console.log(`[MfeLoaderService] Successfully loaded MFE ${e.name}`),console.log("[MfeLoaderService] Currently loaded MFEs:",Array.from(n.loadedMfesSubject.value)),h}catch(d){console.error(`[MfeLoaderService] Error loading MFE ${e.name}:`,d),console.error("[MfeLoaderService] Failed config:",{name:e.name,url:e.url,exposedModule:e.exposedModule});const h=new Set(n.loadingMfesSubject.value);throw h.delete(e.name),n.loadingMfesSubject.next(h),d}})()}isMfeLoaded(e){const n=this.loadedMfesSubject.value.has(e);return console.log(`[MfeLoaderService] isMfeLoaded(${e}):`,n),n}isMfeLoading(e){const n=this.loadingMfesSubject.value.has(e);return console.log(`[MfeLoaderService] isMfeLoading(${e}):`,n),n}static{this.\u0275fac=function(n){return new(n||c)}}static{this.\u0275prov=g.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();var Z=b(762),J=b.n(Z);let ee=(()=>{class c{constructor(){this.emitter=J()(),console.log("[EventBusService] Service initialized");const e=new Event("EventBusServiceCreated");this.onePlusNEvents=new _.ReplaySubject(100),this.onePlusNEvents.next(e.type),this.emitter.on("*",n=>{console.log("[EventBusService] Event received and forwarded to ReplaySubject:",n),this.onePlusNEvents.next(n)}),console.log("[EventBusService] Event listener registered for all events")}sendEvent(e){console.log("[EventBusService] sendEvent() called with:",e),this.emitter.emit(e),console.log("[EventBusService] Event emitted successfully")}static{this.\u0275fac=function(n){return new(n||c)}}static{this.\u0275prov=g.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),$=(()=>{class c{constructor(e){this.zone=e}listen(){const e=new EventSource("https://stream.wikimedia.org/v2/stream/recentchange");return(0,_.fromEvent)(e,"message").pipe((0,D.map)(n=>{let a;return this.zone.run(()=>a=n.data),a}))}static{this.\u0275fac=function(n){return new(n||c)(g.\u0275\u0275inject(g.NgZone))}}static{this.\u0275prov=g.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),Y=(()=>{class c{constructor(e){this.zone=e}start(e){this.eventSource=new EventSource(e);const n=this.eventSource;return new _.Observable(a=>{const i=(0,_.fromEvent)(n,"message").subscribe(d=>{this.zone.run(()=>a.next(d.data))});return n.onerror=d=>{this.zone.run(()=>a.error(d))},()=>{i.unsubscribe(),n.close()}})}stop(){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0)}static{this.\u0275fac=function(n){return new(n||c)(g.\u0275\u0275inject(g.NgZone))}}static{this.\u0275prov=g.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();const Q=(c,K)=>new _.Observable(e=>{let n;return(0,M.A)(function*(){const{urlWithParams:i}=c,h=yield caches.open("http"),S=yield h.match(i);if(S){let f;console.log("Serve from Cache for",i);try{f=yield S.clone().json()}catch{f=yield S.clone().text()}return e.next(new N.HttpResponse({body:f,status:S.status||200,url:c.urlWithParams})),void e.complete()}var f;n=K(c).subscribe({next:(f=(0,M.A)(function*(y){if(console.log("Cache miss for ",i),e.next(y),y instanceof N.HttpResponse&&y.ok){const A=new Response(JSON.stringify(y.body),{headers:{"Content-Type":"application/json"},status:y.status,statusText:y.statusText});yield h.put(c.urlWithParams,A)}}),function(A){return f.apply(this,arguments)}),error:f=>e.error(f),complete:()=>e.complete()})})(),()=>n?.unsubscribe()})},5766:(ne,L,b)=>{b.r(L),b.d(L,{getManifest:()=>ee,initFederation:()=>$,loadManifest:()=>Q,loadRemoteEntry:()=>P,loadRemoteModule:()=>H,setManifest:()=>Z});var g=b(467);let T={};const M={},_={};let N=!1;function U(){return(U=(0,g.A)(function*(a,i){return(yield M[a].get(i))()})).apply(this,arguments)}function v(a,i){return x.apply(this,arguments)}function x(){return(x=(0,g.A)(function*(a,i){return _[i]||(N||(yield b.I("default"),N=!0),yield a.init(b.S.default),_[i]=!0),a})).apply(this,arguments)}function P(a,i){return D.apply(this,arguments)}function D(){return D=(0,g.A)(function*(a,i){if("string"==typeof a)return yield G(a,i);if("script"===a.type){const d=a;return yield G(d.remoteEntry,d.remoteName)}"module"===a.type&&(yield function R(a){return j.apply(this,arguments)}(a.remoteEntry))}),D.apply(this,arguments)}function j(){return(j=(0,g.A)(function*(a){return M[a]?Promise.resolve():yield import(a).then(i=>{v(i,a),M[a]=i})})).apply(this,arguments)}function G(a,i){return W.apply(this,arguments)}function W(){return(W=(0,g.A)(function*(a,i){return new Promise((d,h)=>{if(M[i])return void d();const S=document.createElement("script");S.src=a,S.onerror=h,S.onload=()=>{const f=window[i];v(f,i),M[i]=f,d()},document.body.appendChild(S)})})).apply(this,arguments)}function H(a,i){return V.apply(this,arguments)}function V(){return V=(0,g.A)(function*(a,i){let d,h,S,f;if(f="string"==typeof a?{type:"manifest",remoteName:a,exposedModule:i}:a,!f.type){const y=Object.keys(T).length>0;f.type=y?"manifest":"script"}if("manifest"===f.type){const y=T[f.remoteName];if(!y)throw new Error("Manifest does not contain "+f.remoteName);f={type:y.type,exposedModule:f.exposedModule,remoteEntry:y.remoteEntry,remoteName:"script"===y.type?f.remoteName:void 0},S=y.remoteEntry}else S=f.remoteEntry;return"script"===f.type?(d={type:"script",remoteEntry:f.remoteEntry,remoteName:f.remoteName},h=f.remoteName):"module"===f.type&&(d={type:"module",remoteEntry:f.remoteEntry},h=f.remoteEntry),S&&(yield P(d)),yield function k(a,i){return U.apply(this,arguments)}(h,f.exposedModule)}),V.apply(this,arguments)}function Z(a){return J.apply(this,arguments)}function J(){return(J=(0,g.A)(function*(a,i=!1){T=K(a),i||(yield e())})).apply(this,arguments)}function ee(){return T}function $(a){return Y.apply(this,arguments)}function Y(){return(Y=(0,g.A)(function*(a,i=!1){return"string"==typeof a?Q(a,i):Z(a,i)})).apply(this,arguments)}function Q(a){return c.apply(this,arguments)}function c(){return(c=(0,g.A)(function*(a,i=!1){const d=yield fetch(a);if(!d.ok)throw Error("could not load configFile: "+a);T=K(yield d.json()),i||(yield e())})).apply(this,arguments)}function K(a){const i={};for(const d in a){const h=a[d];let S;S="string"==typeof h?{remoteEntry:h,type:"module"}:{...h,type:h.type||"module"},i[d]=S}return i}function e(){return n.apply(this,arguments)}function n(){return(n=(0,g.A)(function*(){const a=[];for(const i in T){const d=T[i];a.push(P("module"===d.type?{type:"module",remoteEntry:d.remoteEntry}:{type:"script",remoteEntry:d.remoteEntry,remoteName:i}))}yield Promise.all(a)})).apply(this,arguments)}},467:(ne,L,b)=>{function g(M,_,N,k,U,v,x){try{var P=M[v](x),D=P.value}catch(R){return void N(R)}P.done?_(D):Promise.resolve(D).then(k,U)}function T(M){return function(){var _=this,N=arguments;return new Promise(function(k,U){var v=M.apply(_,N);function x(D){g(v,k,U,x,P,"next",D)}function P(D){g(v,k,U,x,P,"throw",D)}x(void 0)})}}b.d(L,{A:()=>T})},1635:(ne,L,b)=>{b.r(L),b.d(L,{__addDisposableResource:()=>f,__assign:()=>M,__asyncDelegator:()=>Q,__asyncGenerator:()=>Y,__asyncValues:()=>c,__await:()=>$,__awaiter:()=>R,__classPrivateFieldGet:()=>d,__classPrivateFieldIn:()=>S,__classPrivateFieldSet:()=>h,__createBinding:()=>G,__decorate:()=>N,__disposeResources:()=>A,__esDecorate:()=>U,__exportStar:()=>W,__extends:()=>T,__generator:()=>j,__importDefault:()=>i,__importStar:()=>a,__makeTemplateObject:()=>K,__metadata:()=>D,__param:()=>k,__propKey:()=>x,__read:()=>V,__rest:()=>_,__rewriteRelativeImportExtension:()=>X,__runInitializers:()=>v,__setFunctionName:()=>P,__spread:()=>Z,__spreadArray:()=>ee,__spreadArrays:()=>J,__values:()=>H,default:()=>te});var g=function(t,r){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(o[u]=s[u])})(t,r)};function T(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}g(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}var M=function(){return M=Object.assign||function(r){for(var o,s=1,u=arguments.length;s<u;s++)for(var l in o=arguments[s])Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l]);return r},M.apply(this,arguments)};function _(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(s=Object.getOwnPropertySymbols(t);u<s.length;u++)r.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(t,s[u])&&(o[s[u]]=t[s[u]])}return o}function N(t,r,o,s){var m,u=arguments.length,l=u<3?r:null===s?s=Object.getOwnPropertyDescriptor(r,o):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,r,o,s);else for(var E=t.length-1;E>=0;E--)(m=t[E])&&(l=(u<3?m(l):u>3?m(r,o,l):m(r,o))||l);return u>3&&l&&Object.defineProperty(r,o,l),l}function k(t,r){return function(o,s){r(o,s,t)}}function U(t,r,o,s,u,l){function m(q){if(void 0!==q&&"function"!=typeof q)throw new TypeError("Function expected");return q}for(var C,E=s.kind,O="getter"===E?"get":"setter"===E?"set":"value",p=!r&&t?s.static?t:t.prototype:null,I=r||(p?Object.getOwnPropertyDescriptor(p,s.name):{}),re=!1,w=o.length-1;w>=0;w--){var F={};for(var B in s)F[B]="access"===B?{}:s[B];for(var B in s.access)F.access[B]=s.access[B];F.addInitializer=function(q){if(re)throw new TypeError("Cannot add initializers after decoration has completed");l.push(m(q||null))};var z=(0,o[w])("accessor"===E?{get:I.get,set:I.set}:I[O],F);if("accessor"===E){if(void 0===z)continue;if(null===z||"object"!=typeof z)throw new TypeError("Object expected");(C=m(z.get))&&(I.get=C),(C=m(z.set))&&(I.set=C),(C=m(z.init))&&u.unshift(C)}else(C=m(z))&&("field"===E?u.unshift(C):I[O]=C)}p&&Object.defineProperty(p,s.name,I),re=!0}function v(t,r,o){for(var s=arguments.length>2,u=0;u<r.length;u++)o=s?r[u].call(t,o):r[u].call(t);return s?o:void 0}function x(t){return"symbol"==typeof t?t:"".concat(t)}function P(t,r,o){return"symbol"==typeof r&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:o?"".concat(o," ",r):r})}function D(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)}function R(t,r,o,s){return new(o||(o=Promise))(function(l,m){function E(I){try{p(s.next(I))}catch(C){m(C)}}function O(I){try{p(s.throw(I))}catch(C){m(C)}}function p(I){I.done?l(I.value):function u(l){return l instanceof o?l:new o(function(m){m(l)})}(I.value).then(E,O)}p((s=s.apply(t,r||[])).next())})}function j(t,r){var s,u,l,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},m=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return m.next=E(0),m.throw=E(1),m.return=E(2),"function"==typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m;function E(p){return function(I){return function O(p){if(s)throw new TypeError("Generator is already executing.");for(;m&&(m=0,p[0]&&(o=0)),o;)try{if(s=1,u&&(l=2&p[0]?u.return:p[0]?u.throw||((l=u.return)&&l.call(u),0):u.next)&&!(l=l.call(u,p[1])).done)return l;switch(u=0,l&&(p=[2&p[0],l.value]),p[0]){case 0:case 1:l=p;break;case 4:return o.label++,{value:p[1],done:!1};case 5:o.label++,u=p[1],p=[0];continue;case 7:p=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===p[0]||2===p[0])){o=0;continue}if(3===p[0]&&(!l||p[1]>l[0]&&p[1]<l[3])){o.label=p[1];break}if(6===p[0]&&o.label<l[1]){o.label=l[1],l=p;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(p);break}l[2]&&o.ops.pop(),o.trys.pop();continue}p=r.call(t,o)}catch(I){p=[6,I],u=0}finally{s=l=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([p,I])}}}var G=Object.create?function(t,r,o,s){void 0===s&&(s=o);var u=Object.getOwnPropertyDescriptor(r,o);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[o]}}),Object.defineProperty(t,s,u)}:function(t,r,o,s){void 0===s&&(s=o),t[s]=r[o]};function W(t,r){for(var o in t)"default"!==o&&!Object.prototype.hasOwnProperty.call(r,o)&&G(r,t,o)}function H(t){var r="function"==typeof Symbol&&Symbol.iterator,o=r&&t[r],s=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(t,r){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var u,m,s=o.call(t),l=[];try{for(;(void 0===r||r-- >0)&&!(u=s.next()).done;)l.push(u.value)}catch(E){m={error:E}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(m)throw m.error}}return l}function Z(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(V(arguments[r]));return t}function J(){for(var t=0,r=0,o=arguments.length;r<o;r++)t+=arguments[r].length;var s=Array(t),u=0;for(r=0;r<o;r++)for(var l=arguments[r],m=0,E=l.length;m<E;m++,u++)s[u]=l[m];return s}function ee(t,r,o){if(o||2===arguments.length)for(var l,s=0,u=r.length;s<u;s++)(l||!(s in r))&&(l||(l=Array.prototype.slice.call(r,0,s)),l[s]=r[s]);return t.concat(l||Array.prototype.slice.call(r))}function $(t){return this instanceof $?(this.v=t,this):new $(t)}function Y(t,r,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,s=o.apply(t,r||[]),l=[];return u=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),E("next"),E("throw"),E("return",function m(w){return function(F){return Promise.resolve(F).then(w,C)}}),u[Symbol.asyncIterator]=function(){return this},u;function E(w,F){s[w]&&(u[w]=function(B){return new Promise(function(z,q){l.push([w,B,z,q])>1||O(w,B)})},F&&(u[w]=F(u[w])))}function O(w,F){try{!function p(w){w.value instanceof $?Promise.resolve(w.value.v).then(I,C):re(l[0][2],w)}(s[w](F))}catch(B){re(l[0][3],B)}}function I(w){O("next",w)}function C(w){O("throw",w)}function re(w,F){w(F),l.shift(),l.length&&O(l[0][0],l[0][1])}}function Q(t){var r,o;return r={},s("next"),s("throw",function(u){throw u}),s("return"),r[Symbol.iterator]=function(){return this},r;function s(u,l){r[u]=t[u]?function(m){return(o=!o)?{value:$(t[u](m)),done:!1}:l?l(m):m}:l}}function c(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=t[Symbol.asyncIterator];return r?r.call(t):(t=H(t),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(l){o[l]=t[l]&&function(m){return new Promise(function(E,O){!function u(l,m,E,O){Promise.resolve(O).then(function(p){l({value:p,done:E})},m)}(E,O,(m=t[l](m)).done,m.value)})}}}function K(t,r){return Object.defineProperty?Object.defineProperty(t,"raw",{value:r}):t.raw=r,t}var e=Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r},n=function(t){return(n=Object.getOwnPropertyNames||function(r){var o=[];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(o[o.length]=s);return o})(t)};function a(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var o=n(t),s=0;s<o.length;s++)"default"!==o[s]&&G(r,t,o[s]);return e(r,t),r}function i(t){return t&&t.__esModule?t:{default:t}}function d(t,r,o,s){if("a"===o&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof r?t!==r||!s:!r.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?s:"a"===o?s.call(t):s?s.value:r.get(t)}function h(t,r,o,s,u){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!u)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof r?t!==r||!u:!r.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?u.call(t,o):u?u.value=o:r.set(t,o),o}function S(t,r){if(null===r||"object"!=typeof r&&"function"!=typeof r)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?r===t:t.has(r)}function f(t,r,o){if(null!=r){if("object"!=typeof r&&"function"!=typeof r)throw new TypeError("Object expected.");var s,u;if(o){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=r[Symbol.asyncDispose]}if(void 0===s){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=r[Symbol.dispose],o&&(u=s)}if("function"!=typeof s)throw new TypeError("Object not disposable.");u&&(s=function(){try{u.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:r,dispose:s,async:o})}else o&&t.stack.push({async:!0});return r}var y="function"==typeof SuppressedError?SuppressedError:function(t,r,o){var s=new Error(o);return s.name="SuppressedError",s.error=t,s.suppressed=r,s};function A(t){function r(l){t.error=t.hasError?new y(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var o,s=0;return function u(){for(;o=t.stack.pop();)try{if(!o.async&&1===s)return s=0,t.stack.push(o),Promise.resolve().then(u);if(o.dispose){var l=o.dispose.call(o.value);if(o.async)return s|=2,Promise.resolve(l).then(u,function(m){return r(m),u()})}else s|=1}catch(m){r(m)}if(1===s)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}function X(t,r){return"string"==typeof t&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(o,s,u,l,m){return s?r?".jsx":".js":!u||l&&m?u+l+"."+m.toLowerCase()+"js":o}):t}const te={__extends:T,__assign:M,__rest:_,__decorate:N,__param:k,__esDecorate:U,__runInitializers:v,__propKey:x,__setFunctionName:P,__metadata:D,__awaiter:R,__generator:j,__createBinding:G,__exportStar:W,__values:H,__read:V,__spread:Z,__spreadArrays:J,__spreadArray:ee,__await:$,__asyncGenerator:Y,__asyncDelegator:Q,__asyncValues:c,__makeTemplateObject:K,__importStar:a,__importDefault:i,__classPrivateFieldGet:d,__classPrivateFieldSet:h,__classPrivateFieldIn:S,__addDisposableResource:f,__disposeResources:A,__rewriteRelativeImportExtension:X}}}]);