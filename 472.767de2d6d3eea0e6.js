(self.webpackChunkshell=self.webpackChunkshell||[]).push([[472],{4472:(f,_,n)=>{n.r(_),n.d(_,{AuthCallbackComponent:()=>E});var m=n(467),c=n(5315),d=n(2485),t=n(5565),u=n(3319),g=n(8662);function h(i,A){1&i&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1,"Processing authentication..."),t.\u0275\u0275elementEnd())}let E=(()=>{class i{constructor(e,a,s){this.route=e,this.router=a,this.authService=s,this.message="Processing authentication...",this.isProcessing=!0}ngOnInit(){var e=this;return(0,m.A)(function*(){let a=null,s=null,o=null;const r=yield(0,d.firstValueFrom)(e.route.queryParams);if(r&&Object.keys(r).length>0)a=r.code??null,s=r.state??null,o=r.error??null;else{const l=new URLSearchParams(window.location.search);a=l.get("code"),s=l.get("state"),o=l.get("error")}if(o)return e.message=`Authentication failed: ${o}`,e.isProcessing=!1,void setTimeout(()=>e.router.navigate(["/"]),3e3);if(a&&s)try{(yield e.authService.handleCallback(a,s))?(e.message="Authentication successful! Redirecting...",e.isProcessing=!1,setTimeout(()=>e.router.navigate(["/"]),1500)):(e.message="Authentication failed. Redirecting...",e.isProcessing=!1,setTimeout(()=>e.router.navigate(["/"]),3e3))}catch{e.message="Authentication failed (exception). Redirecting...",e.isProcessing=!1,setTimeout(()=>e.router.navigate(["/"]),3e3)}else e.message="Invalid callback parameters. Redirecting...",e.isProcessing=!1,setTimeout(()=>e.router.navigate(["/"]),3e3)})()}static{this.\u0275fac=function(a){return new(a||i)(t.\u0275\u0275directiveInject(u.ActivatedRoute),t.\u0275\u0275directiveInject(u.Router),t.\u0275\u0275directiveInject(g.AuthService))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["app-auth-callback"]],standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:5,vars:2,consts:[[2,"display","flex","justify-content","center","align-items","center","height","100vh"],[2,"text-align","center"],[4,"ngIf"]],template:function(a,s){1&a&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h2"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,h,2,0,"p",2),t.\u0275\u0275elementEnd()()),2&a&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(s.message),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",s.isProcessing))},dependencies:[c.CommonModule,c.NgIf],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100vh}"]})}}return i})()}}]);