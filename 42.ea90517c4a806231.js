(self.webpackChunkshell=self.webpackChunkshell||[]).push([[42],{1913:(re,x,_)=>{Object.defineProperty(x,"__esModule",{value:!0}),_(1635).__exportStar(_(5766),x)},8042:(re,x,_)=>{_.r(x),_.d(x,{AUTH0_CONFIG:()=>b,AuthService:()=>k,CoreServicesComponent:()=>Z,CoreServicesService:()=>U,DummyDataService:()=>Y,EventBusService:()=>z,MfeLoaderService:()=>te,ProductCategory:()=>J,RoleService:()=>B,STORAGE_CONFIG:()=>M,STORAGE_KEYS:()=>j,SalesStatus:()=>F,SseControlService:()=>g,SseFromEventService:()=>d,UserRole:()=>p,authInterceptor:()=>y,getStorage:()=>C,getStorageItem:()=>O,hasRequiredRole:()=>Q,removeStorageItem:()=>$,setStorageItem:()=>I});var h=_(5565);let U=(()=>{class a{constructor(){}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var R=_(467),w=_(4866),L=_(8036);const b={domain:"dev-26sow24tone5na8a.us.auth0.com",clientId:"lT0H33rFRamTUtbbXwPwO7M0SdT8Qq26",redirectUri:"https://opensourcekd.github.io/i17e/auth-callback",logoutUri:"https://opensourcekd.github.io/i17e",scope:"openid profile email"},M={TOKEN_STORAGE:"sessionStorage",USER_INFO_STORAGE:"sessionStorage",AUTH_STATE_STORAGE:"sessionStorage",PREFERENCES_STORAGE:"localStorage"},j={ACCESS_TOKEN:"auth0_access_token",ID_TOKEN:"auth0_id_token",REFRESH_TOKEN:"auth0_refresh_token",USER_INFO:"auth0_user_info",OAUTH_STATE:"oauth_state",CODE_VERIFIER:"code_verifier",CURRENT_USER:"current_user",DEV_MIMIC_USER:"dev_mimic_user"};function C(a){return"sessionStorage"===a?sessionStorage:localStorage}function I(a,v,e="sessionStorage"){C(e).setItem(a,v)}function O(a,v="sessionStorage"){return C(v).getItem(a)}function $(a,v="sessionStorage"){C(v).removeItem(a)}var H=_(1663),K=_(762),X=_.n(K);let z=(()=>{class a{constructor(){this.emitter=X()(),console.log("[EventBusService] Service initialized");const e=new Event("EventBusServiceCreated");this.onePlusNEvents=new w.ReplaySubject(100),this.onePlusNEvents.next(e.type),this.emitter.on("*",r=>{console.log("[EventBusService] Event received and forwarded to ReplaySubject:",r),this.onePlusNEvents.next(r)}),console.log("[EventBusService] Event listener registered for all events")}sendEvent(e){console.log("[EventBusService] sendEvent() called with:",e),this.emitter.emit(e),console.log("[EventBusService] Event emitted successfully")}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),k=(()=>{class a{constructor(e,r){this.http=e,this.eventBus=r,this.id="auth of pokemon",this.STANDARD_JWT_CLAIMS=["sub","name","email","email_verified","preferred_username","given_name","family_name","nickname","locale","picture","phone","phone_verified","updated_at","iss","aud","exp","iat","auth_time","nonce","acr","amr","azp","at_hash","c_hash"],this.auth0Client=null,this.userSubject=new w.BehaviorSubject(this.getUserInfoFromStorage()),this.user$=this.userSubject.asObservable(),console.log("[AuthService] Initializing Auth0 authentication service"),this.initializeAuth0()}initializeAuth0(){var e=this;return(0,R.A)(function*(){try{e.auth0Client=yield(0,L.createAuth0Client)({domain:b.domain,clientId:b.clientId,authorizationParams:{redirect_uri:b.redirectUri,scope:b.scope,...b.audience&&{audience:b.audience}},cacheLocation:"memory",useRefreshTokens:!0}),console.log("[AuthService] Auth0 client initialized successfully")}catch(r){console.error("[AuthService] Failed to initialize Auth0 client:",r)}})()}login(e){var r=this;return(0,R.A)(function*(){if(e&&console.log(`[AuthService] Logging in: ${e}`),r.auth0Client)try{yield r.auth0Client.loginWithRedirect({authorizationParams:{redirect_uri:b.redirectUri,scope:b.scope,...b.audience&&{audience:b.audience},...b.connection&&{connection:b.connection}}})}catch(l){console.error("[AuthService] Login failed:",l)}else console.error("[AuthService] Auth0 client not initialized")})()}handleCallback(){var e=this;return(0,R.A)(function*(){if(!e.auth0Client)return console.error("[AuthService] Auth0 client not initialized"),!1;try{yield e.auth0Client.handleRedirectCallback(),console.log("[AuthService] Callback processed successfully");const l=yield e.auth0Client.getUser();l&&(e.logUserClaims(l),e.setUserInfo(l));const m=yield e.auth0Client.getTokenSilently();return e.setToken(m),console.log("[AuthService] Authentication successful"),!0}catch(r){return console.error("[AuthService] Error processing callback:",r),!1}})()}logUserClaims(e){console.log("=".repeat(80)),console.log("[AuthService] \u{1f50d} AUTH0 ID TOKEN - ALL CLAIMS:"),console.log("=".repeat(80)),console.log("\n\u{1f4cb} Standard OIDC Claims:"),console.log("  \u2022 sub (Subject/User ID):",e.sub),console.log("  \u2022 name:",e.name),console.log("  \u2022 email:",e.email),console.log("  \u2022 email_verified:",e.email_verified),console.log("  \u2022 preferred_username:",e.preferred_username),console.log("  \u2022 given_name:",e.given_name),console.log("  \u2022 family_name:",e.family_name),console.log("  \u2022 nickname:",e.nickname),console.log("  \u2022 locale:",e.locale),console.log("  \u2022 picture:",e.picture),console.log("  \u2022 phone:",e.phone),console.log("  \u2022 phone_verified:",e.phone_verified),console.log("  \u2022 updated_at:",e.updated_at),console.log("\n\u{1f511} Custom Claims (Auth0):");const r=Object.keys(e).filter(m=>!this.STANDARD_JWT_CLAIMS.includes(m)&&(m.startsWith("http://")||m.startsWith("https://")));r.length>0?r.forEach(m=>{const t=e[m];"object"==typeof t?console.log(`  \u2022 ${m}:`,JSON.stringify(t,null,2)):console.log(`  \u2022 ${m}:`,t)}):console.log("  No custom claims found"),console.log("\n\u{1f527} Additional Claims:");const l=Object.keys(e).filter(m=>!this.STANDARD_JWT_CLAIMS.includes(m)&&!m.startsWith("http://")&&!m.startsWith("https://"));l.length>0?l.forEach(m=>{const t=e[m];"object"==typeof t?console.log(`  \u2022 ${m}:`,JSON.stringify(t,null,2)):console.log(`  \u2022 ${m}:`,t)}):console.log("  No additional claims found"),console.log("\n\u{1f4e6} Complete User Object (JSON):"),console.log(JSON.stringify(e,null,2)),console.log("=".repeat(80))}logout(){var e=this;return(0,R.A)(function*(){if($(j.ACCESS_TOKEN,M.TOKEN_STORAGE),$(j.USER_INFO,M.USER_INFO_STORAGE),e.userSubject.next(null),e.emitAuthEvent("logout",null),console.log("[AuthService] User logged out, clearing Auth0 session"),e.auth0Client)try{yield e.auth0Client.logout({logoutParams:{returnTo:b.logoutUri}})}catch(r){console.error("[AuthService] Error during Auth0 logout:",r)}})()}getToken(){var e=this;return(0,R.A)(function*(){const r=O(j.ACCESS_TOKEN,M.TOKEN_STORAGE);if(r)return r;if(e.auth0Client)try{const l=yield e.auth0Client.getTokenSilently();return e.setToken(l),l}catch(l){return console.error("[AuthService] Error getting token from Auth0:",l),null}return null})()}getTokenSync(){return O(j.ACCESS_TOKEN,M.TOKEN_STORAGE)}setToken(e){I(j.ACCESS_TOKEN,e,M.TOKEN_STORAGE),this.emitAuthEvent("token_updated",{token:e})}isAuthenticated(){var e=this;return(0,R.A)(function*(){if(e.auth0Client)try{return yield e.auth0Client.isAuthenticated()}catch(r){return console.error("[AuthService] Error checking authentication status:",r),!1}return!!O(j.ACCESS_TOKEN,M.TOKEN_STORAGE)})()}isAuthenticatedSync(){return!!O(j.ACCESS_TOKEN,M.TOKEN_STORAGE)}getUser(){return this.userSubject.value}getUserInfoFromStorage(){const e=O(j.USER_INFO,M.USER_INFO_STORAGE);return e?JSON.parse(e):null}setUserInfo(e){I(j.USER_INFO,JSON.stringify(e),M.USER_INFO_STORAGE),this.userSubject.next(e),console.log("[AuthService] \u{1f4be} User info stored in sessionStorage:"),console.log("  Standard claims:",{sub:e.sub,name:e.name,email:e.email,email_verified:e.email_verified});const r=Object.keys(e).filter(l=>l.startsWith("http://")||l.startsWith("https://"));r.length>0&&(console.log("  Custom claims stored:"),r.forEach(l=>{console.log(`    \u2022 ${l}:`,e[l])})),this.emitAuthEvent("user_info_updated",e)}emitAuthEvent(e,r){const l={type:`auth:${e}`,payload:r,timestamp:(new Date).toISOString()};this.eventBus.sendEvent(JSON.stringify(l)),console.log("[AuthService] Auth event emitted:",l.type)}static{this.\u0275fac=function(r){return new(r||a)(h.\u0275\u0275inject(H.HttpClient),h.\u0275\u0275inject(z))}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),Z=(()=>{class a{static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275cmp=h.\u0275\u0275defineComponent({type:a,selectors:[["org-core-services"]],standalone:!0,features:[h.\u0275\u0275StandaloneFeature],decls:2,vars:0,template:function(r,l){1&r&&(h.\u0275\u0275elementStart(0,"p"),h.\u0275\u0275text(1," core-services works! "),h.\u0275\u0275elementEnd())}})}}return a})();var p=function(a){return a.SUPER_ADMIN="super-admin",a.ORG_ADMIN="org-admin",a.TEAM_LEAD="team-lead",a.SALES_EXECUTIVE="sales-executive",a}(p||{});function Q(a,v){const e={[p.SUPER_ADMIN]:4,[p.ORG_ADMIN]:3,[p.TEAM_LEAD]:2,[p.SALES_EXECUTIVE]:1};return e[a]>=e[v]}let B=(()=>{class a{constructor(){this.currentUserSubject=new w.BehaviorSubject(null),this.currentUser$=this.currentUserSubject.asObservable(),console.log("[RoleService] Service initialized"),this.loadInitialUser()}setUserFromAuth(e){console.log("[RoleService] Setting user from Auth0 auth:",e),console.log("[RoleService] \u{1f511} Auth0 custom claims:");const r=Object.keys(e).filter(t=>t.startsWith("http://")||t.startsWith("https://"));r.length>0?r.forEach(t=>{console.log(`  \u2022 ${t}:`,e[t])}):console.log("  No custom claims found");const l=r.find(t=>t.includes("roles"));l&&e[l]&&console.log("[RoleService] \u{1f464} Auth0 roles:",e[l]);const m=this.mapUserInfoToUser(e);console.log("[RoleService] Mapped user with role:",m),this.setCurrentUser(m)}mapUserInfoToUser(e){return{id:e.sub,name:e.name||e.email||"User",email:e.email||"",role:this.determineRoleFromEmail(e.email||"")}}determineRoleFromEmail(e){const r=e.toLowerCase();return[{patterns:["admin","super"],role:p.SUPER_ADMIN},{patterns:["manager","org"],role:p.ORG_ADMIN},{patterns:["lead","team"],role:p.TEAM_LEAD}].find(({patterns:t})=>t.some(n=>r.includes(n)))?.role??p.SALES_EXECUTIVE}loadInitialUser(){const e=this.getDevMimicUser();if(e)return console.log("[RoleService] Using dev mimic user:",e),void this.currentUserSubject.next(e)}getDevMimicUser(){try{const e=localStorage.getItem("dev_mimic_user");if(e){const r=JSON.parse(e);if(r.id&&r.name&&r.role)return r}}catch(e){console.error("[RoleService] Error parsing dev mimic user:",e)}return null}setDevMimicUser(e){e?(localStorage.setItem("dev_mimic_user",JSON.stringify(e)),this.currentUserSubject.next(e),console.log("[RoleService] Dev mimic user set:",e)):(localStorage.removeItem("dev_mimic_user"),this.loadDummyUser(),console.log("[RoleService] Dev mimic user cleared"))}loadDummyUser(){console.log("[RoleService] Loading user from session storage");const e=sessionStorage.getItem("current_user");if(e){const r=JSON.parse(e);console.log("[RoleService] User loaded from session:",r),this.currentUserSubject.next(r)}else{const r={id:"user-1",name:"John Admin",email:"john.admin@company.com",role:p.ORG_ADMIN};console.log("[RoleService] No saved user found, using default:",r),this.setCurrentUser(r)}}setCurrentUser(e){console.log("[RoleService] Setting current user:",e),this.currentUserSubject.next(e),e?(sessionStorage.setItem("current_user",JSON.stringify(e)),console.log("[RoleService] User saved to session storage")):(sessionStorage.removeItem("current_user"),console.log("[RoleService] User removed from session storage"))}getCurrentUser(){const e=this.currentUserSubject.value;return console.log("[RoleService] getCurrentUser() called, returning:",e),e}getCurrentUserRole(){const e=this.currentUserSubject.value?.role||null;return console.log("[RoleService] getCurrentUserRole() called, returning:",e),e}hasRole(e){const r=this.getCurrentUserRole();if(!r)return console.log("[RoleService] hasRole() - No current role, access denied"),!1;const l=Q(r,e);return console.log(`[RoleService] hasRole() - Checking if ${r} has ${e}:`,l),l}canViewOthersData(){const e=this.getCurrentUserRole(),r=e===p.SUPER_ADMIN||e===p.ORG_ADMIN||e===p.TEAM_LEAD;return console.log(`[RoleService] canViewOthersData() - Role: ${e}, Can view:`,r),r}getViewableUsers(){const e=this.getCurrentUser();if(!e)return[];const r=this.getAllUsers();return this.isTeamLeadOrHigher()?r.filter(l=>l.role===p.SALES_EXECUTIVE||l.id===e.id):r.filter(l=>l.id===e.id)}hasAnyRole(e){const r=this.getCurrentUser();return!!r&&e.includes(r.role)}isAdmin(){return this.hasAnyRole([p.SUPER_ADMIN,p.ORG_ADMIN])}isTeamLeadOrHigher(){return this.hasAnyRole([p.SUPER_ADMIN,p.ORG_ADMIN,p.TEAM_LEAD])}getAllUsers(){return[{id:"user-1",name:"John Admin",email:"john.admin@company.com",role:p.SUPER_ADMIN},{id:"user-2",name:"Sarah Manager",email:"sarah.manager@company.com",role:p.ORG_ADMIN},{id:"user-3",name:"Mike Lead",email:"mike.lead@company.com",role:p.TEAM_LEAD,teamId:"team-1"},{id:"user-4",name:"Alice Sales",email:"alice.sales@company.com",role:p.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-5",name:"Bob Sales",email:"bob.sales@company.com",role:p.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-6",name:"Carol Sales",email:"carol.sales@company.com",role:p.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"}]}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var F=function(a){return a.COMPLETED="completed",a.PENDING="pending",a.CANCELLED="cancelled",a}(F||{}),J=function(a){return a.ELECTRONICS="Electronics",a.SOFTWARE="Software",a.SERVICES="Services",a.HARDWARE="Hardware",a}(J||{});let Y=(()=>{class a{constructor(){this.salesExecutivesSubject=new w.BehaviorSubject(this.generateSalesExecutives()),this.salesExecutives$=this.salesExecutivesSubject.asObservable(),this.salesRecordsSubject=new w.BehaviorSubject(this.generateSalesRecords()),this.salesRecords$=this.salesRecordsSubject.asObservable(),this.incentiveRulesSubject=new w.BehaviorSubject(this.generateIncentiveRules()),this.incentiveRules$=this.incentiveRulesSubject.asObservable(),this.incentivesEarnedSubject=new w.BehaviorSubject(this.generateIncentivesEarned()),this.incentivesEarned$=this.incentivesEarnedSubject.asObservable(),console.log("[DummyDataService] Service initialized"),console.log("[DummyDataService] Generated data:",{salesExecutives:this.salesExecutivesSubject.value.length,salesRecords:this.salesRecordsSubject.value.length,incentiveRules:this.incentiveRulesSubject.value.length,incentivesEarned:this.incentivesEarnedSubject.value.length})}generateSalesExecutives(){return console.log("[DummyDataService] Generating sales executives"),[{id:"user-1",name:"John Admin",email:"john.admin@company.com",teamId:"team-1"},{id:"user-2",name:"Sarah Manager",email:"sarah.manager@company.com",teamId:"team-1"},{id:"user-3",name:"Mike Lead",email:"mike.lead@company.com",teamId:"team-1"},{id:"user-4",name:"Alice Sales",email:"alice.sales@company.com",teamId:"team-1"},{id:"user-5",name:"Bob Sales",email:"bob.sales@company.com",teamId:"team-1"},{id:"user-6",name:"Carol Sales",email:"carol.sales@company.com",teamId:"team-1"}]}generateSalesRecords(){console.log("[DummyDataService] Generating sales records");const e=[],r=this.generateSalesExecutives(),l=["Product A","Product B","Product C","Product D"],m=[F.COMPLETED,F.PENDING,F.CANCELLED];for(let t=0;t<50;t++){const n=r[t%r.length],i=Math.floor(t/10),o=new Date;o.setMonth(o.getMonth()-i),e.push({id:`sale-${t+1}`,salesExecutiveId:n.id,salesExecutiveName:n.name,date:o,productName:l[t%l.length],productCategory:J.SOFTWARE,amount:Math.floor(5e4*Math.random())+1e4,commission:Math.floor(5e3*Math.random()),quantity:Math.floor(10*Math.random())+1,status:m[t%m.length],clientName:`Client ${t+1}`,region:["North","South","East","West"][t%4]})}return e}generateIncentiveRules(){return console.log("[DummyDataService] Generating incentive rules"),[{id:"rule-1",name:"Basic Sales Incentive",description:"5% incentive on all sales",type:"percentage",value:5,isActive:!0,createdBy:"admin",createdAt:new Date("2024-01-01")},{id:"rule-2",name:"High Value Sales Bonus",description:"10% incentive on sales above $50,000",type:"percentage",value:10,minSalesAmount:5e4,isActive:!0,createdBy:"admin",createdAt:new Date("2024-02-01")},{id:"rule-3",name:"Product A Special",description:"Fixed $500 bonus for Product A sales",type:"fixed",value:500,productCategory:"Product A",isActive:!0,createdBy:"team-lead-1",createdAt:new Date("2024-03-01")},{id:"rule-4",name:"Tiered Volume Incentive",description:"15% incentive on sales above $100,000",type:"tiered",value:15,minSalesAmount:1e5,isActive:!1,createdBy:"admin",createdAt:new Date("2024-04-01")}]}generateIncentivesEarned(){console.log("[DummyDataService] Generating incentives earned");const e=[],r=this.generateSalesExecutives(),l=this.generateIncentiveRules(),m=["pending","approved","paid"];for(let t=0;t<30;t++){const n=r[t%r.length],i=l[t%l.length],o=Math.floor(t/10),s=new Date;s.setMonth(s.getMonth()-o),e.push({id:`incentive-${t+1}`,salesExecutiveId:n.id,salesExecutiveName:n.name,ruleId:i.id,ruleName:i.name,salesRecordId:`sale-${t+1}`,amount:Math.floor(5e3*Math.random())+500,earnedDate:s,status:m[t%3]})}return e}getSalesRecordsForExecutive(e){console.log("[DummyDataService] getSalesRecordsForExecutive() called for:",e);const r=this.salesRecordsSubject.value.filter(l=>l.salesExecutiveId===e);return console.log("[DummyDataService] Found",r.length,"sales records for executive:",e),r}getIncentivesForExecutive(e){console.log("[DummyDataService] getIncentivesForExecutive() called for:",e);const r=this.incentivesEarnedSubject.value.filter(l=>l.salesExecutiveId===e);return console.log("[DummyDataService] Found",r.length,"incentives for executive:",e),r}getReportDataForExecutive(e){console.log("[DummyDataService] getReportDataForExecutive() called for:",e);const r=this.salesExecutivesSubject.value.find(s=>s.id===e),l=this.getSalesRecordsForExecutive(e),m=this.getIncentivesForExecutive(e),t=l.filter(s=>"completed"===s.status).reduce((s,c)=>s+c.amount,0),n=m.filter(s=>"pending"!==s.status).reduce((s,c)=>s+c.amount,0),i=[];for(let s=5;s>=0;s--){const c=new Date;c.setMonth(c.getMonth()-s);const u=c.toISOString().substring(0,7),S=l.filter(f=>f.date.toISOString().substring(0,7)===u&&"completed"===f.status).reduce((f,E)=>f+E.amount,0),D=m.filter(f=>f.earnedDate.toISOString().substring(0,7)===u&&"pending"!==f.status).reduce((f,E)=>f+E.amount,0);i.push({month:u,sales:S,incentives:D})}const o={salesExecutiveId:e,salesExecutiveName:r?.name||"Unknown",totalSales:t,totalIncentives:n,period:"Last 6 months",breakdown:i};return console.log("[DummyDataService] Report data generated:",o),o}getSalesExecutives(){const e=this.salesExecutivesSubject.value;return console.log("[DummyDataService] getSalesExecutives() called, returning",e.length,"executives"),e}getIncentiveRules(){const e=this.incentiveRulesSubject.value;return console.log("[DummyDataService] getIncentiveRules() called, returning",e.length,"rules"),e}addIncentiveRule(e){console.log("[DummyDataService] addIncentiveRule() called with:",e),this.incentiveRulesSubject.next([...this.incentiveRulesSubject.value,e]),console.log("[DummyDataService] Rule added successfully, total rules:",this.incentiveRulesSubject.value.length)}updateIncentiveRule(e,r){console.log("[DummyDataService] updateIncentiveRule() called for rule:",e,"with updates:",r);const m=this.incentiveRulesSubject.value.map(t=>t.id===e?{...t,...r}:t);this.incentiveRulesSubject.next(m),console.log("[DummyDataService] Rule updated successfully")}deleteIncentiveRule(e){console.log("[DummyDataService] deleteIncentiveRule() called for rule:",e);const l=this.incentiveRulesSubject.value.filter(m=>m.id!==e);this.incentiveRulesSubject.next(l),console.log("[DummyDataService] Rule deleted successfully, remaining rules:",this.incentiveRulesSubject.value.length)}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var q=_(1913);let te=(()=>{class a{constructor(){this.mfeConfigs=[],this.loadedMfesSubject=new w.BehaviorSubject(new Set),this.loadedMfes$=this.loadedMfesSubject.asObservable(),this.loadingMfesSubject=new w.BehaviorSubject(new Set),this.loadingMfes$=this.loadingMfesSubject.asObservable(),console.log("[MfeLoaderService] Service initialized")}setConfigs(e){console.log("[MfeLoaderService] setConfigs() called with",e.length,"configurations"),this.mfeConfigs=e.sort((r,l)=>l.priority-r.priority),console.log("[MfeLoaderService] Configurations sorted by priority:",this.mfeConfigs.map(r=>({name:r.name,priority:r.priority})))}getConfigs(){return console.log("[MfeLoaderService] getConfigs() called, returning",this.mfeConfigs.length,"configurations"),this.mfeConfigs}getConfigsForRole(e){console.log("[MfeLoaderService] getConfigsForRole() called for role:",e);const r=this.mfeConfigs.filter(l=>l.allowedRoles.includes(e));return console.log("[MfeLoaderService] Found",r.length,"configurations for role:",e,r.map(l=>l.name)),r}getConfigByName(e){console.log("[MfeLoaderService] getConfigByName() called for:",e);const r=this.mfeConfigs.find(l=>l.name===e);return r?console.log("[MfeLoaderService] Found configuration for:",e):console.warn("[MfeLoaderService] Configuration not found for:",e),r}preloadPriorityMfes(e){var r=this;return(0,R.A)(function*(){console.log("[MfeLoaderService] preloadPriorityMfes() called for role:",e);const m=r.getConfigsForRole(e).filter(n=>n.priority>=5);console.log("[MfeLoaderService] Preloading",m.length,"priority MFEs:",m.map(n=>({name:n.name,priority:n.priority})));const t=m.map(n=>r.loadMfe(n));yield Promise.all(t),console.log("[MfeLoaderService] Preloading complete")})()}loadMfe(e){var r=this;return(0,R.A)(function*(){const l=r.loadingMfesSubject.value,m=r.loadedMfesSubject.value;if(m.has(e.name))console.log(`[MfeLoaderService] MFE ${e.name} already loaded`);else if(l.has(e.name))console.log(`[MfeLoaderService] MFE ${e.name} is already loading`);else try{const t=new Set(l);t.add(e.name),r.loadingMfesSubject.next(t),console.log(`[MfeLoaderService] Loading MFE ${e.name} (priority: ${e.priority})`),console.log("[MfeLoaderService] MFE config:",{name:e.name,url:e.url,exposedModule:e.exposedModule,remoteName:e.remoteName});const n=yield(0,q.loadRemoteModule)({type:"module",remoteEntry:e.url,exposedModule:e.exposedModule}),i=new Set(m);i.add(e.name),r.loadedMfesSubject.next(i);const o=new Set(r.loadingMfesSubject.value);return o.delete(e.name),r.loadingMfesSubject.next(o),console.log(`[MfeLoaderService] Successfully loaded MFE ${e.name}`),console.log("[MfeLoaderService] Currently loaded MFEs:",Array.from(r.loadedMfesSubject.value)),n}catch(t){console.error(`[MfeLoaderService] Error loading MFE ${e.name}:`,t),console.error("[MfeLoaderService] Failed config:",{name:e.name,url:e.url,exposedModule:e.exposedModule});const n=new Set(r.loadingMfesSubject.value);throw n.delete(e.name),r.loadingMfesSubject.next(n),t}})()}isMfeLoaded(e){const r=this.loadedMfesSubject.value.has(e);return console.log(`[MfeLoaderService] isMfeLoaded(${e}):`,r),r}isMfeLoading(e){const r=this.loadingMfesSubject.value.has(e);return console.log(`[MfeLoaderService] isMfeLoading(${e}):`,r),r}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var V=_(2778);let d=(()=>{class a{constructor(e){this.zone=e}listen(){const e=new EventSource("https://stream.wikimedia.org/v2/stream/recentchange");return(0,w.fromEvent)(e,"message").pipe((0,V.map)(r=>{let l;return this.zone.run(()=>l=r.data),l}))}static{this.\u0275fac=function(r){return new(r||a)(h.\u0275\u0275inject(h.NgZone))}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),g=(()=>{class a{constructor(e){this.zone=e}start(e){this.eventSource=new EventSource(e);const r=this.eventSource;return new w.Observable(l=>{const m=(0,w.fromEvent)(r,"message").subscribe(t=>{this.zone.run(()=>l.next(t.data))});return r.onerror=t=>{this.zone.run(()=>l.error(t))},()=>{m.unsubscribe(),r.close()}})}stop(){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0)}static{this.\u0275fac=function(r){return new(r||a)(h.\u0275\u0275inject(h.NgZone))}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const y=(a,v)=>{const r=(0,h.inject)(k).getTokenSync();return!r||T(a.url)?v(a):v(a.clone({setHeaders:{Authorization:`Bearer ${r}`}}))},T=a=>["/oauth","/auth","auth0.com"].some(e=>a.includes(e))},5766:(re,x,_)=>{_.r(x),_.d(x,{getManifest:()=>Q,initFederation:()=>B,loadManifest:()=>J,loadRemoteEntry:()=>I,loadRemoteModule:()=>z,setManifest:()=>Z});var h=_(467);let U={};const R={},w={};let L=!1;function M(){return(M=(0,h.A)(function*(d,g){return(yield R[d].get(g))()})).apply(this,arguments)}function j(d,g){return C.apply(this,arguments)}function C(){return(C=(0,h.A)(function*(d,g){return w[g]||(L||(yield _.I("default"),L=!0),yield d.init(_.S.default),w[g]=!0),d})).apply(this,arguments)}function I(d,g){return O.apply(this,arguments)}function O(){return O=(0,h.A)(function*(d,g){if("string"==typeof d)return yield K(d,g);if("script"===d.type){const y=d;return yield K(y.remoteEntry,y.remoteName)}"module"===d.type&&(yield function $(d){return H.apply(this,arguments)}(d.remoteEntry))}),O.apply(this,arguments)}function H(){return(H=(0,h.A)(function*(d){return R[d]?Promise.resolve():yield import(d).then(g=>{j(g,d),R[d]=g})})).apply(this,arguments)}function K(d,g){return X.apply(this,arguments)}function X(){return(X=(0,h.A)(function*(d,g){return new Promise((y,T)=>{if(R[g])return void y();const a=document.createElement("script");a.src=d,a.onerror=T,a.onload=()=>{const v=window[g];j(v,g),R[g]=v,y()},document.body.appendChild(a)})})).apply(this,arguments)}function z(d,g){return k.apply(this,arguments)}function k(){return k=(0,h.A)(function*(d,g){let y,T,a,v;if(v="string"==typeof d?{type:"manifest",remoteName:d,exposedModule:g}:d,!v.type){const e=Object.keys(U).length>0;v.type=e?"manifest":"script"}if("manifest"===v.type){const e=U[v.remoteName];if(!e)throw new Error("Manifest does not contain "+v.remoteName);v={type:e.type,exposedModule:v.exposedModule,remoteEntry:e.remoteEntry,remoteName:"script"===e.type?v.remoteName:void 0},a=e.remoteEntry}else a=v.remoteEntry;return"script"===v.type?(y={type:"script",remoteEntry:v.remoteEntry,remoteName:v.remoteName},T=v.remoteName):"module"===v.type&&(y={type:"module",remoteEntry:v.remoteEntry},T=v.remoteEntry),a&&(yield I(y)),yield function b(d,g){return M.apply(this,arguments)}(T,v.exposedModule)}),k.apply(this,arguments)}function Z(d){return p.apply(this,arguments)}function p(){return(p=(0,h.A)(function*(d,g=!1){U=q(d),g||(yield te())})).apply(this,arguments)}function Q(){return U}function B(d){return F.apply(this,arguments)}function F(){return(F=(0,h.A)(function*(d,g=!1){return"string"==typeof d?J(d,g):Z(d,g)})).apply(this,arguments)}function J(d){return Y.apply(this,arguments)}function Y(){return(Y=(0,h.A)(function*(d,g=!1){const y=yield fetch(d);if(!y.ok)throw Error("could not load configFile: "+d);U=q(yield y.json()),g||(yield te())})).apply(this,arguments)}function q(d){const g={};for(const y in d){const T=d[y];let a;a="string"==typeof T?{remoteEntry:T,type:"module"}:{...T,type:T.type||"module"},g[y]=a}return g}function te(){return V.apply(this,arguments)}function V(){return(V=(0,h.A)(function*(){const d=[];for(const g in U){const y=U[g];d.push(I("module"===y.type?{type:"module",remoteEntry:y.remoteEntry}:{type:"script",remoteEntry:y.remoteEntry,remoteName:g}))}yield Promise.all(d)})).apply(this,arguments)}},467:(re,x,_)=>{function h(R,w,L,b,M,j,C){try{var I=R[j](C),O=I.value}catch($){return void L($)}I.done?w(O):Promise.resolve(O).then(b,M)}function U(R){return function(){var w=this,L=arguments;return new Promise(function(b,M){var j=R.apply(w,L);function C(O){h(j,b,M,C,I,"next",O)}function I(O){h(j,b,M,C,I,"throw",O)}C(void 0)})}}_.d(x,{A:()=>U})},1635:(re,x,_)=>{_.r(x),_.d(x,{__addDisposableResource:()=>v,__assign:()=>R,__asyncDelegator:()=>J,__asyncGenerator:()=>F,__asyncValues:()=>Y,__await:()=>B,__awaiter:()=>$,__classPrivateFieldGet:()=>y,__classPrivateFieldIn:()=>a,__classPrivateFieldSet:()=>T,__createBinding:()=>K,__decorate:()=>L,__disposeResources:()=>r,__esDecorate:()=>M,__exportStar:()=>X,__extends:()=>U,__generator:()=>H,__importDefault:()=>g,__importStar:()=>d,__makeTemplateObject:()=>q,__metadata:()=>O,__param:()=>b,__propKey:()=>C,__read:()=>k,__rest:()=>w,__rewriteRelativeImportExtension:()=>l,__runInitializers:()=>j,__setFunctionName:()=>I,__spread:()=>Z,__spreadArray:()=>Q,__spreadArrays:()=>p,__values:()=>z,default:()=>m});var h=function(t,n){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])})(t,n)};function U(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}h(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var R=function(){return R=Object.assign||function(n){for(var i,o=1,s=arguments.length;o<s;o++)for(var c in i=arguments[o])Object.prototype.hasOwnProperty.call(i,c)&&(n[c]=i[c]);return n},R.apply(this,arguments)};function w(t,n){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(t);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(i[o[s]]=t[o[s]])}return i}function L(t,n,i,o){var u,s=arguments.length,c=s<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,n,i,o);else for(var S=t.length-1;S>=0;S--)(u=t[S])&&(c=(s<3?u(c):s>3?u(n,i,c):u(n,i))||c);return s>3&&c&&Object.defineProperty(n,i,c),c}function b(t,n){return function(i,o){n(i,o,t)}}function M(t,n,i,o,s,c){function u(ee){if(void 0!==ee&&"function"!=typeof ee)throw new TypeError("Function expected");return ee}for(var N,S=o.kind,D="getter"===S?"get":"setter"===S?"set":"value",f=!n&&t?o.static?t:t.prototype:null,E=n||(f?Object.getOwnPropertyDescriptor(f,o.name):{}),ne=!1,A=i.length-1;A>=0;A--){var P={};for(var G in o)P[G]="access"===G?{}:o[G];for(var G in o.access)P.access[G]=o.access[G];P.addInitializer=function(ee){if(ne)throw new TypeError("Cannot add initializers after decoration has completed");c.push(u(ee||null))};var W=(0,i[A])("accessor"===S?{get:E.get,set:E.set}:E[D],P);if("accessor"===S){if(void 0===W)continue;if(null===W||"object"!=typeof W)throw new TypeError("Object expected");(N=u(W.get))&&(E.get=N),(N=u(W.set))&&(E.set=N),(N=u(W.init))&&s.unshift(N)}else(N=u(W))&&("field"===S?s.unshift(N):E[D]=N)}f&&Object.defineProperty(f,o.name,E),ne=!0}function j(t,n,i){for(var o=arguments.length>2,s=0;s<n.length;s++)i=o?n[s].call(t,i):n[s].call(t);return o?i:void 0}function C(t){return"symbol"==typeof t?t:"".concat(t)}function I(t,n,i){return"symbol"==typeof n&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:i?"".concat(i," ",n):n})}function O(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)}function $(t,n,i,o){return new(i||(i=Promise))(function(c,u){function S(E){try{f(o.next(E))}catch(N){u(N)}}function D(E){try{f(o.throw(E))}catch(N){u(N)}}function f(E){E.done?c(E.value):function s(c){return c instanceof i?c:new i(function(u){u(c)})}(E.value).then(S,D)}f((o=o.apply(t,n||[])).next())})}function H(t,n){var o,s,c,i={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=S(0),u.throw=S(1),u.return=S(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function S(f){return function(E){return function D(f){if(o)throw new TypeError("Generator is already executing.");for(;u&&(u=0,f[0]&&(i=0)),i;)try{if(o=1,s&&(c=2&f[0]?s.return:f[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,f[1])).done)return c;switch(s=0,c&&(f=[2&f[0],c.value]),f[0]){case 0:case 1:c=f;break;case 4:return i.label++,{value:f[1],done:!1};case 5:i.label++,s=f[1],f=[0];continue;case 7:f=i.ops.pop(),i.trys.pop();continue;default:if(!(c=(c=i.trys).length>0&&c[c.length-1])&&(6===f[0]||2===f[0])){i=0;continue}if(3===f[0]&&(!c||f[1]>c[0]&&f[1]<c[3])){i.label=f[1];break}if(6===f[0]&&i.label<c[1]){i.label=c[1],c=f;break}if(c&&i.label<c[2]){i.label=c[2],i.ops.push(f);break}c[2]&&i.ops.pop(),i.trys.pop();continue}f=n.call(t,i)}catch(E){f=[6,E],s=0}finally{o=c=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([f,E])}}}var K=Object.create?function(t,n,i,o){void 0===o&&(o=i);var s=Object.getOwnPropertyDescriptor(n,i);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(t,o,s)}:function(t,n,i,o){void 0===o&&(o=i),t[o]=n[i]};function X(t,n){for(var i in t)"default"!==i&&!Object.prototype.hasOwnProperty.call(n,i)&&K(n,t,i)}function z(t){var n="function"==typeof Symbol&&Symbol.iterator,i=n&&t[n],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(t,n){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var s,u,o=i.call(t),c=[];try{for(;(void 0===n||n-- >0)&&!(s=o.next()).done;)c.push(s.value)}catch(S){u={error:S}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(u)throw u.error}}return c}function Z(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(k(arguments[n]));return t}function p(){for(var t=0,n=0,i=arguments.length;n<i;n++)t+=arguments[n].length;var o=Array(t),s=0;for(n=0;n<i;n++)for(var c=arguments[n],u=0,S=c.length;u<S;u++,s++)o[s]=c[u];return o}function Q(t,n,i){if(i||2===arguments.length)for(var c,o=0,s=n.length;o<s;o++)(c||!(o in n))&&(c||(c=Array.prototype.slice.call(n,0,o)),c[o]=n[o]);return t.concat(c||Array.prototype.slice.call(n))}function B(t){return this instanceof B?(this.v=t,this):new B(t)}function F(t,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,o=i.apply(t,n||[]),c=[];return s=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),S("next"),S("throw"),S("return",function u(A){return function(P){return Promise.resolve(P).then(A,N)}}),s[Symbol.asyncIterator]=function(){return this},s;function S(A,P){o[A]&&(s[A]=function(G){return new Promise(function(W,ee){c.push([A,G,W,ee])>1||D(A,G)})},P&&(s[A]=P(s[A])))}function D(A,P){try{!function f(A){A.value instanceof B?Promise.resolve(A.value.v).then(E,N):ne(c[0][2],A)}(o[A](P))}catch(G){ne(c[0][3],G)}}function E(A){D("next",A)}function N(A){D("throw",A)}function ne(A,P){A(P),c.shift(),c.length&&D(c[0][0],c[0][1])}}function J(t){var n,i;return n={},o("next"),o("throw",function(s){throw s}),o("return"),n[Symbol.iterator]=function(){return this},n;function o(s,c){n[s]=t[s]?function(u){return(i=!i)?{value:B(t[s](u)),done:!1}:c?c(u):u}:c}}function Y(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t[Symbol.asyncIterator];return n?n.call(t):(t=z(t),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(c){i[c]=t[c]&&function(u){return new Promise(function(S,D){!function s(c,u,S,D){Promise.resolve(D).then(function(f){c({value:f,done:S})},u)}(S,D,(u=t[c](u)).done,u.value)})}}}function q(t,n){return Object.defineProperty?Object.defineProperty(t,"raw",{value:n}):t.raw=n,t}var te=Object.create?function(t,n){Object.defineProperty(t,"default",{enumerable:!0,value:n})}:function(t,n){t.default=n},V=function(t){return(V=Object.getOwnPropertyNames||function(n){var i=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[i.length]=o);return i})(t)};function d(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i=V(t),o=0;o<i.length;o++)"default"!==i[o]&&K(n,t,i[o]);return te(n,t),n}function g(t){return t&&t.__esModule?t:{default:t}}function y(t,n,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof n?t!==n||!o:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:n.get(t)}function T(t,n,i,o,s){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof n?t!==n||!s:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?s.call(t,i):s?s.value=i:n.set(t,i),i}function a(t,n){if(null===n||"object"!=typeof n&&"function"!=typeof n)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?n===t:t.has(n)}function v(t,n,i){if(null!=n){if("object"!=typeof n&&"function"!=typeof n)throw new TypeError("Object expected.");var o,s;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=n[Symbol.asyncDispose]}if(void 0===o){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=n[Symbol.dispose],i&&(s=o)}if("function"!=typeof o)throw new TypeError("Object not disposable.");s&&(o=function(){try{s.call(this)}catch(c){return Promise.reject(c)}}),t.stack.push({value:n,dispose:o,async:i})}else i&&t.stack.push({async:!0});return n}var e="function"==typeof SuppressedError?SuppressedError:function(t,n,i){var o=new Error(i);return o.name="SuppressedError",o.error=t,o.suppressed=n,o};function r(t){function n(c){t.error=t.hasError?new e(c,t.error,"An error was suppressed during disposal."):c,t.hasError=!0}var i,o=0;return function s(){for(;i=t.stack.pop();)try{if(!i.async&&1===o)return o=0,t.stack.push(i),Promise.resolve().then(s);if(i.dispose){var c=i.dispose.call(i.value);if(i.async)return o|=2,Promise.resolve(c).then(s,function(u){return n(u),s()})}else o|=1}catch(u){n(u)}if(1===o)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}function l(t,n){return"string"==typeof t&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(i,o,s,c,u){return o?n?".jsx":".js":!s||c&&u?s+c+"."+u.toLowerCase()+"js":i}):t}const m={__extends:U,__assign:R,__rest:w,__decorate:L,__param:b,__esDecorate:M,__runInitializers:j,__propKey:C,__setFunctionName:I,__metadata:O,__awaiter:$,__generator:H,__createBinding:K,__exportStar:X,__values:z,__read:k,__spread:Z,__spreadArrays:p,__spreadArray:Q,__await:B,__asyncGenerator:F,__asyncDelegator:J,__asyncValues:Y,__makeTemplateObject:q,__importStar:d,__importDefault:g,__classPrivateFieldGet:y,__classPrivateFieldSet:T,__classPrivateFieldIn:a,__addDisposableResource:v,__disposeResources:r,__rewriteRelativeImportExtension:l}}}]);