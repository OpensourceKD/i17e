(self.webpackChunkshell=self.webpackChunkshell||[]).push([[695],{1913:(ne,$,A)=>{Object.defineProperty($,"__esModule",{value:!0}),A(1635).__exportStar(A(5766),$)},7695:(ne,$,A)=>{A.r($),A.d($,{API_CONFIG:()=>E,API_ENDPOINTS:()=>R,AuthService:()=>L,BrandContextService:()=>V,CoreServicesComponent:()=>N,CoreServicesService:()=>B,DummyDataService:()=>q,EventBusService:()=>k,IncentiveRulesApiService:()=>v,IncentivesApiService:()=>I,MfeLoaderService:()=>re,ProductCategory:()=>C,RoleService:()=>X,SalesDataService:()=>J,SalesStatus:()=>D,SseControlService:()=>Q,SseFromEventService:()=>H,TargetsApiService:()=>U,TasksApiService:()=>x,UserRole:()=>g,authInterceptor:()=>_,cacheInterceptor:()=>ee,getApiUrl:()=>b,hasRequiredRole:()=>W,updateApiConfig:()=>f});var d=A(5565);let B=(()=>{class s{constructor(){}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var M=A(467),m=A(4866),P=A(1663),G=A(762),F=A.n(G);let k=(()=>{class s{constructor(){this.emitter=F()(),console.log("[EventBusService] Service initialized");const t=new Event("EventBusServiceCreated");this.onePlusNEvents=new m.ReplaySubject(100),this.onePlusNEvents.next(t.type),this.emitter.on("*",e=>{console.log("[EventBusService] Event received and forwarded to ReplaySubject:",e),this.onePlusNEvents.next(e)}),console.log("[EventBusService] Event listener registered for all events")}sendEvent(t){console.log("[EventBusService] sendEvent() called with:",t),this.emitter.emit(t),console.log("[EventBusService] Event emitted successfully")}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),L=(()=>{class s{constructor(t,e){this.http=t,this.eventBus=e,this.id="auth of pokemon",this.ISSUER_BASE_URL="https://topfix-wrczmn.us1.zitadel.cloud",this.CLIENT_ID="336777344075263315",this.REDIRECT_URI="https://opensourcekd.github.io/i17e/auth-callback",this.SCOPE="openid profile email",this.TOKEN_KEY="zitadel_token",this.USER_INFO_KEY="zitadel_user_info",this.userSubject=new m.BehaviorSubject(this.getUserInfoFromStorage()),this.user$=this.userSubject.asObservable(),console.log("In constructor of auth service in i17e")}login(t){t&&console.log(`in i17e [AuthService] Logged in: ${t}`),this.redirectToZitadelLogin()}redirectToZitadelLogin(){const t=new URL(`${this.ISSUER_BASE_URL}/oauth/v2/authorize`),e=this.generateRandomState(),r=this.generateCodeVerifier();sessionStorage.setItem("oauth_state",e),sessionStorage.setItem("code_verifier",r),t.searchParams.append("client_id",this.CLIENT_ID),t.searchParams.append("redirect_uri",this.REDIRECT_URI),t.searchParams.append("response_type","code"),t.searchParams.append("scope",this.SCOPE),t.searchParams.append("state",e),window.location.href=t.toString()}handleCallback(t,e){var r=this;return(0,M.A)(function*(){const n=sessionStorage.getItem("oauth_state");if(e!==n)return console.error("[AuthService] State mismatch - possible CSRF attack"),!1;try{const o=yield r.exchangeCodeForToken(t);r.setToken(o.access_token);const i=r.decodeIdToken(o.id_token);return r.setUserInfo(i),sessionStorage.removeItem("oauth_state"),sessionStorage.removeItem("code_verifier"),console.log("[AuthService] Authentication successful"),!0}catch(o){return console.error("[AuthService] Error exchanging code for token:",o),!1}})()}exchangeCodeForToken(t){var e=this;return(0,M.A)(function*(){const r=`${e.ISSUER_BASE_URL}/oauth/v2/token`,n=new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:e.REDIRECT_URI,client_id:e.CLIENT_ID}),o=yield fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!o.ok)throw new Error(`Token exchange failed: ${o.statusText}`);return o.json()})()}decodeIdToken(t){try{const e=t.split(".")[1],r=JSON.parse(atob(e));return{sub:r.sub,name:r.name,email:r.email}}catch(e){return console.error("[AuthService] Error decoding ID token:",e),{sub:""}}}logout(){sessionStorage.removeItem(this.TOKEN_KEY),sessionStorage.removeItem(this.USER_INFO_KEY),this.userSubject.next(null),this.emitAuthEvent("logout",null),console.log("[AuthService] User logged out")}getToken(){return sessionStorage.getItem(this.TOKEN_KEY)}setToken(t){sessionStorage.setItem(this.TOKEN_KEY,t),this.emitAuthEvent("token_updated",{token:t})}isAuthenticated(){return!!this.getToken()}getUser(){return this.userSubject.value}getUserInfoFromStorage(){const t=sessionStorage.getItem(this.USER_INFO_KEY);return t?JSON.parse(t):null}setUserInfo(t){sessionStorage.setItem(this.USER_INFO_KEY,JSON.stringify(t)),this.userSubject.next(t),this.emitAuthEvent("user_info_updated",t)}emitAuthEvent(t,e){const r={type:`auth:${t}`,payload:e,timestamp:(new Date).toISOString()};this.eventBus.sendEvent(JSON.stringify(r)),console.log("[AuthService] Auth event emitted:",r.type)}generateRandomState(){const t=new Uint8Array(32);return crypto.getRandomValues(t),Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}generateCodeVerifier(){const t=new Uint8Array(32);return crypto.getRandomValues(t),Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}static{this.\u0275fac=function(e){return new(e||s)(d.\u0275\u0275inject(P.HttpClient),d.\u0275\u0275inject(k))}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),N=(()=>{class s{static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275cmp=d.\u0275\u0275defineComponent({type:s,selectors:[["org-core-services"]],standalone:!0,features:[d.\u0275\u0275StandaloneFeature],decls:2,vars:0,template:function(e,r){1&e&&(d.\u0275\u0275elementStart(0,"p"),d.\u0275\u0275text(1," core-services works! "),d.\u0275\u0275elementEnd())}})}}return s})();var g=function(s){return s.SUPER_ADMIN="super-admin",s.ORG_ADMIN="org-admin",s.TEAM_LEAD="team-lead",s.SALES_EXECUTIVE="sales-executive",s}(g||{});function W(s,h){const t={[g.SUPER_ADMIN]:4,[g.ORG_ADMIN]:3,[g.TEAM_LEAD]:2,[g.SALES_EXECUTIVE]:1};return t[s]>=t[h]}let X=(()=>{class s{constructor(){this.currentUserSubject=new m.BehaviorSubject(null),this.currentUser$=this.currentUserSubject.asObservable(),console.log("[RoleService] Service initialized"),this.loadInitialUser()}setUserFromAuth(t){console.log("[RoleService] Setting user from Zitadel auth:",t);const e=this.mapUserInfoToUser(t);console.log("[RoleService] Mapped user with role:",e),this.setCurrentUser(e)}mapUserInfoToUser(t){return{id:t.sub,name:t.name||t.email||"User",email:t.email||"",role:this.determineRoleFromEmail(t.email||"")}}determineRoleFromEmail(t){const e=t.toLowerCase();return[{patterns:["admin","super"],role:g.SUPER_ADMIN},{patterns:["manager","org"],role:g.ORG_ADMIN},{patterns:["lead","team"],role:g.TEAM_LEAD}].find(({patterns:o})=>o.some(i=>e.includes(i)))?.role??g.SALES_EXECUTIVE}loadInitialUser(){const t=this.getDevMimicUser();if(t)return console.log("[RoleService] Using dev mimic user:",t),void this.currentUserSubject.next(t);this.loadDummyUser()}getDevMimicUser(){try{const t=localStorage.getItem("dev_mimic_user");if(t){const e=JSON.parse(t);if(e.id&&e.name&&e.role)return e}}catch(t){console.error("[RoleService] Error parsing dev mimic user:",t)}return null}setDevMimicUser(t){t?(localStorage.setItem("dev_mimic_user",JSON.stringify(t)),this.currentUserSubject.next(t),console.log("[RoleService] Dev mimic user set:",t)):(localStorage.removeItem("dev_mimic_user"),this.loadDummyUser(),console.log("[RoleService] Dev mimic user cleared"))}loadDummyUser(){console.log("[RoleService] Loading user from session storage");const t=sessionStorage.getItem("current_user");if(t){const e=JSON.parse(t);console.log("[RoleService] User loaded from session:",e),this.currentUserSubject.next(e)}else{const e={id:"user-1",name:"John Admin",email:"john.admin@company.com",role:g.ORG_ADMIN};console.log("[RoleService] No saved user found, using default:",e),this.setCurrentUser(e)}}setCurrentUser(t){console.log("[RoleService] Setting current user:",t),this.currentUserSubject.next(t),t?(sessionStorage.setItem("current_user",JSON.stringify(t)),console.log("[RoleService] User saved to session storage")):(sessionStorage.removeItem("current_user"),console.log("[RoleService] User removed from session storage"))}getCurrentUser(){const t=this.currentUserSubject.value;return console.log("[RoleService] getCurrentUser() called, returning:",t),t}getCurrentUserRole(){const t=this.currentUserSubject.value?.role||null;return console.log("[RoleService] getCurrentUserRole() called, returning:",t),t}hasRole(t){const e=this.getCurrentUserRole();if(!e)return console.log("[RoleService] hasRole() - No current role, access denied"),!1;const r=W(e,t);return console.log(`[RoleService] hasRole() - Checking if ${e} has ${t}:`,r),r}canViewOthersData(){const t=this.getCurrentUserRole(),e=t===g.SUPER_ADMIN||t===g.ORG_ADMIN||t===g.TEAM_LEAD;return console.log(`[RoleService] canViewOthersData() - Role: ${t}, Can view:`,e),e}getViewableUsers(){const t=this.getCurrentUser();if(!t)return[];const e=this.getAllUsers();return this.isTeamLeadOrHigher()?e.filter(r=>r.role===g.SALES_EXECUTIVE||r.id===t.id):e.filter(r=>r.id===t.id)}hasAnyRole(t){const e=this.getCurrentUser();return!!e&&t.includes(e.role)}isAdmin(){return this.hasAnyRole([g.SUPER_ADMIN,g.ORG_ADMIN])}isTeamLeadOrHigher(){return this.hasAnyRole([g.SUPER_ADMIN,g.ORG_ADMIN,g.TEAM_LEAD])}getAllUsers(){return[{id:"user-1",name:"John Admin",email:"john.admin@company.com",role:g.SUPER_ADMIN},{id:"user-2",name:"Sarah Manager",email:"sarah.manager@company.com",role:g.ORG_ADMIN},{id:"user-3",name:"Mike Lead",email:"mike.lead@company.com",role:g.TEAM_LEAD,teamId:"team-1"},{id:"user-4",name:"Alice Sales",email:"alice.sales@company.com",role:g.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-5",name:"Bob Sales",email:"bob.sales@company.com",role:g.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-6",name:"Carol Sales",email:"carol.sales@company.com",role:g.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"}]}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var l=A(2778),D=function(s){return s.COMPLETED="completed",s.PENDING="pending",s.CANCELLED="cancelled",s}(D||{}),C=function(s){return s.ELECTRONICS="Electronics",s.SOFTWARE="Software",s.SERVICES="Services",s.HARDWARE="Hardware",s}(C||{});let J=(()=>{class s{constructor(){this.dummySalesData=this.generateDummyData(),console.log("IN sales data service of SHELLLL")}getSalesHistory(t,e,r){let n=this.dummySalesData.filter(o=>o.salesExecutiveId===t);return e&&(n=n.filter(o=>o.date>=e)),r&&(n=n.filter(o=>o.date<=r)),(0,m.of)(n).pipe((0,l.delay)(300))}getSalesSummary(t){const e=this.dummySalesData.filter(n=>n.salesExecutiveId===t),r={totalSales:e.filter(n=>n.status===D.COMPLETED).reduce((n,o)=>n+o.amount,0),totalCommission:e.filter(n=>n.status===D.COMPLETED).reduce((n,o)=>n+o.commission,0),completedCount:e.filter(n=>n.status===D.COMPLETED).length,pendingCount:e.filter(n=>n.status===D.PENDING).length,cancelledCount:e.filter(n=>n.status===D.CANCELLED).length};return(0,m.of)(r).pipe((0,l.delay)(300))}getAllSales(){return(0,m.of)(this.dummySalesData).pipe((0,l.delay)(300))}generateDummyData(){const t=[{name:"Enterprise Software License",category:C.SOFTWARE,basePrice:5e4},{name:"Cloud Storage Solution",category:C.SERVICES,basePrice:25e3},{name:"Server Hardware",category:C.HARDWARE,basePrice:35e3},{name:"IoT Device Package",category:C.ELECTRONICS,basePrice:15e3},{name:"Consulting Services",category:C.SERVICES,basePrice:2e4},{name:"Mobile App Development",category:C.SOFTWARE,basePrice:45e3},{name:"Security Suite",category:C.SOFTWARE,basePrice:3e4},{name:"Network Infrastructure",category:C.HARDWARE,basePrice:6e4}],e=["Acme Corporation","Tech Innovations Inc","Global Solutions Ltd","Digital Dynamics","Future Systems","Smart Technologies","Enterprise Solutions","Cloud Masters"],r=["North","South","East","West","Central"],n=[{id:"user-4",name:"Alice Sales"},{id:"user-5",name:"Bob Sales"},{id:"user-6",name:"Carol Sales"}],o=[D.COMPLETED,D.COMPLETED,D.COMPLETED,D.PENDING,D.CANCELLED],i=[];let a=1;for(let c=0;c<50;c++){const u=n[c%n.length],y=t[Math.floor(Math.random()*t.length)],p=e[Math.floor(Math.random()*e.length)],w=r[Math.floor(Math.random()*r.length)],j=o[Math.floor(Math.random()*o.length)],T=y.basePrice+(1e4*Math.random()-5e3),S=.05*T,O=new Date;O.setDate(O.getDate()-Math.floor(180*Math.random())),i.push({id:"sale-"+a++,salesExecutiveId:u.id,salesExecutiveName:u.name,productName:y.name,productCategory:y.category,amount:Math.round(T),commission:Math.round(S),status:j,date:O,clientName:p,region:w})}return i.sort((c,u)=>u.date.getTime()-c.date.getTime())}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),q=(()=>{class s{constructor(){this.salesExecutivesSubject=new m.BehaviorSubject(this.generateSalesExecutives()),this.salesExecutives$=this.salesExecutivesSubject.asObservable(),this.salesRecordsSubject=new m.BehaviorSubject(this.generateSalesRecords()),this.salesRecords$=this.salesRecordsSubject.asObservable(),this.incentiveRulesSubject=new m.BehaviorSubject(this.generateIncentiveRules()),this.incentiveRules$=this.incentiveRulesSubject.asObservable(),this.incentivesEarnedSubject=new m.BehaviorSubject(this.generateIncentivesEarned()),this.incentivesEarned$=this.incentivesEarnedSubject.asObservable(),console.log("[DummyDataService] Service initialized"),console.log("[DummyDataService] Generated data:",{salesExecutives:this.salesExecutivesSubject.value.length,salesRecords:this.salesRecordsSubject.value.length,incentiveRules:this.incentiveRulesSubject.value.length,incentivesEarned:this.incentivesEarnedSubject.value.length})}generateSalesExecutives(){return console.log("[DummyDataService] Generating sales executives"),[{id:"user-1",name:"John Admin",email:"john.admin@company.com",teamId:"team-1"},{id:"user-2",name:"Sarah Manager",email:"sarah.manager@company.com",teamId:"team-1"},{id:"user-3",name:"Mike Lead",email:"mike.lead@company.com",teamId:"team-1"},{id:"user-4",name:"Alice Sales",email:"alice.sales@company.com",teamId:"team-1"},{id:"user-5",name:"Bob Sales",email:"bob.sales@company.com",teamId:"team-1"},{id:"user-6",name:"Carol Sales",email:"carol.sales@company.com",teamId:"team-1"}]}generateSalesRecords(){console.log("[DummyDataService] Generating sales records");const t=[],e=this.generateSalesExecutives(),r=["Product A","Product B","Product C","Product D"],n=[D.COMPLETED,D.PENDING,D.CANCELLED];for(let o=0;o<50;o++){const i=e[o%e.length],a=Math.floor(o/10),c=new Date;c.setMonth(c.getMonth()-a),t.push({id:`sale-${o+1}`,salesExecutiveId:i.id,salesExecutiveName:i.name,date:c,productName:r[o%r.length],productCategory:C.SOFTWARE,amount:Math.floor(5e4*Math.random())+1e4,commission:Math.floor(5e3*Math.random()),quantity:Math.floor(10*Math.random())+1,status:n[o%n.length],clientName:`Client ${o+1}`,region:["North","South","East","West"][o%4]})}return t}generateIncentiveRules(){return console.log("[DummyDataService] Generating incentive rules"),[{id:"rule-1",name:"Basic Sales Incentive",description:"5% incentive on all sales",type:"percentage",value:5,isActive:!0,createdBy:"admin",createdAt:new Date("2024-01-01")},{id:"rule-2",name:"High Value Sales Bonus",description:"10% incentive on sales above $50,000",type:"percentage",value:10,minSalesAmount:5e4,isActive:!0,createdBy:"admin",createdAt:new Date("2024-02-01")},{id:"rule-3",name:"Product A Special",description:"Fixed $500 bonus for Product A sales",type:"fixed",value:500,productCategory:"Product A",isActive:!0,createdBy:"team-lead-1",createdAt:new Date("2024-03-01")},{id:"rule-4",name:"Tiered Volume Incentive",description:"15% incentive on sales above $100,000",type:"tiered",value:15,minSalesAmount:1e5,isActive:!1,createdBy:"admin",createdAt:new Date("2024-04-01")}]}generateIncentivesEarned(){console.log("[DummyDataService] Generating incentives earned");const t=[],e=this.generateSalesExecutives(),r=this.generateIncentiveRules(),n=["pending","approved","paid"];for(let o=0;o<30;o++){const i=e[o%e.length],a=r[o%r.length],c=Math.floor(o/10),u=new Date;u.setMonth(u.getMonth()-c),t.push({id:`incentive-${o+1}`,salesExecutiveId:i.id,salesExecutiveName:i.name,ruleId:a.id,ruleName:a.name,salesRecordId:`sale-${o+1}`,amount:Math.floor(5e3*Math.random())+500,earnedDate:u,status:n[o%3]})}return t}getSalesRecordsForExecutive(t){console.log("[DummyDataService] getSalesRecordsForExecutive() called for:",t);const e=this.salesRecordsSubject.value.filter(r=>r.salesExecutiveId===t);return console.log("[DummyDataService] Found",e.length,"sales records for executive:",t),e}getIncentivesForExecutive(t){console.log("[DummyDataService] getIncentivesForExecutive() called for:",t);const e=this.incentivesEarnedSubject.value.filter(r=>r.salesExecutiveId===t);return console.log("[DummyDataService] Found",e.length,"incentives for executive:",t),e}getReportDataForExecutive(t){console.log("[DummyDataService] getReportDataForExecutive() called for:",t);const e=this.salesExecutivesSubject.value.find(u=>u.id===t),r=this.getSalesRecordsForExecutive(t),n=this.getIncentivesForExecutive(t),o=r.filter(u=>"completed"===u.status).reduce((u,y)=>u+y.amount,0),i=n.filter(u=>"pending"!==u.status).reduce((u,y)=>u+y.amount,0),a=[];for(let u=5;u>=0;u--){const y=new Date;y.setMonth(y.getMonth()-u);const p=y.toISOString().substring(0,7),w=r.filter(T=>T.date.toISOString().substring(0,7)===p&&"completed"===T.status).reduce((T,S)=>T+S.amount,0),j=n.filter(T=>T.earnedDate.toISOString().substring(0,7)===p&&"pending"!==T.status).reduce((T,S)=>T+S.amount,0);a.push({month:p,sales:w,incentives:j})}const c={salesExecutiveId:t,salesExecutiveName:e?.name||"Unknown",totalSales:o,totalIncentives:i,period:"Last 6 months",breakdown:a};return console.log("[DummyDataService] Report data generated:",c),c}getSalesExecutives(){const t=this.salesExecutivesSubject.value;return console.log("[DummyDataService] getSalesExecutives() called, returning",t.length,"executives"),t}getIncentiveRules(){const t=this.incentiveRulesSubject.value;return console.log("[DummyDataService] getIncentiveRules() called, returning",t.length,"rules"),t}addIncentiveRule(t){console.log("[DummyDataService] addIncentiveRule() called with:",t),this.incentiveRulesSubject.next([...this.incentiveRulesSubject.value,t]),console.log("[DummyDataService] Rule added successfully, total rules:",this.incentiveRulesSubject.value.length)}updateIncentiveRule(t,e){console.log("[DummyDataService] updateIncentiveRule() called for rule:",t,"with updates:",e);const n=this.incentiveRulesSubject.value.map(o=>o.id===t?{...o,...e}:o);this.incentiveRulesSubject.next(n),console.log("[DummyDataService] Rule updated successfully")}deleteIncentiveRule(t){console.log("[DummyDataService] deleteIncentiveRule() called for rule:",t);const r=this.incentiveRulesSubject.value.filter(n=>n.id!==t);this.incentiveRulesSubject.next(r),console.log("[DummyDataService] Rule deleted successfully, remaining rules:",this.incentiveRulesSubject.value.length)}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var Z=A(1913);let re=(()=>{class s{constructor(){this.mfeConfigs=[],this.loadedMfesSubject=new m.BehaviorSubject(new Set),this.loadedMfes$=this.loadedMfesSubject.asObservable(),this.loadingMfesSubject=new m.BehaviorSubject(new Set),this.loadingMfes$=this.loadingMfesSubject.asObservable(),console.log("[MfeLoaderService] Service initialized")}setConfigs(t){console.log("[MfeLoaderService] setConfigs() called with",t.length,"configurations"),this.mfeConfigs=t.sort((e,r)=>r.priority-e.priority),console.log("[MfeLoaderService] Configurations sorted by priority:",this.mfeConfigs.map(e=>({name:e.name,priority:e.priority})))}getConfigs(){return console.log("[MfeLoaderService] getConfigs() called, returning",this.mfeConfigs.length,"configurations"),this.mfeConfigs}getConfigsForRole(t){console.log("[MfeLoaderService] getConfigsForRole() called for role:",t);const e=this.mfeConfigs.filter(r=>r.allowedRoles.includes(t));return console.log("[MfeLoaderService] Found",e.length,"configurations for role:",t,e.map(r=>r.name)),e}getConfigByName(t){console.log("[MfeLoaderService] getConfigByName() called for:",t);const e=this.mfeConfigs.find(r=>r.name===t);return e?console.log("[MfeLoaderService] Found configuration for:",t):console.warn("[MfeLoaderService] Configuration not found for:",t),e}preloadPriorityMfes(t){var e=this;return(0,M.A)(function*(){console.log("[MfeLoaderService] preloadPriorityMfes() called for role:",t);const n=e.getConfigsForRole(t).filter(i=>i.priority>=5);console.log("[MfeLoaderService] Preloading",n.length,"priority MFEs:",n.map(i=>({name:i.name,priority:i.priority})));const o=n.map(i=>e.loadMfe(i));yield Promise.all(o),console.log("[MfeLoaderService] Preloading complete")})()}loadMfe(t){var e=this;return(0,M.A)(function*(){const r=e.loadingMfesSubject.value,n=e.loadedMfesSubject.value;if(n.has(t.name))console.log(`[MfeLoaderService] MFE ${t.name} already loaded`);else if(r.has(t.name))console.log(`[MfeLoaderService] MFE ${t.name} is already loading`);else try{const o=new Set(r);o.add(t.name),e.loadingMfesSubject.next(o),console.log(`[MfeLoaderService] Loading MFE ${t.name} (priority: ${t.priority})`),console.log("[MfeLoaderService] MFE config:",{name:t.name,url:t.url,exposedModule:t.exposedModule,remoteName:t.remoteName});const i=yield(0,Z.loadRemoteModule)({type:"module",remoteEntry:t.url,exposedModule:t.exposedModule}),a=new Set(n);a.add(t.name),e.loadedMfesSubject.next(a);const c=new Set(e.loadingMfesSubject.value);return c.delete(t.name),e.loadingMfesSubject.next(c),console.log(`[MfeLoaderService] Successfully loaded MFE ${t.name}`),console.log("[MfeLoaderService] Currently loaded MFEs:",Array.from(e.loadedMfesSubject.value)),i}catch(o){console.error(`[MfeLoaderService] Error loading MFE ${t.name}:`,o),console.error("[MfeLoaderService] Failed config:",{name:t.name,url:t.url,exposedModule:t.exposedModule});const i=new Set(e.loadingMfesSubject.value);throw i.delete(t.name),e.loadingMfesSubject.next(i),o}})()}isMfeLoaded(t){const e=this.loadedMfesSubject.value.has(t);return console.log(`[MfeLoaderService] isMfeLoaded(${t}):`,e),e}isMfeLoading(t){const e=this.loadingMfesSubject.value.has(t);return console.log(`[MfeLoaderService] isMfeLoading(${t}):`,e),e}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),H=(()=>{class s{constructor(t){this.zone=t}listen(){const t=new EventSource("https://stream.wikimedia.org/v2/stream/recentchange");return(0,m.fromEvent)(t,"message").pipe((0,l.map)(e=>{let r;return this.zone.run(()=>r=e.data),r}))}static{this.\u0275fac=function(e){return new(e||s)(d.\u0275\u0275inject(d.NgZone))}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),Q=(()=>{class s{constructor(t){this.zone=t}start(t){this.eventSource=new EventSource(t);const e=this.eventSource;return new m.Observable(r=>{const n=(0,m.fromEvent)(e,"message").subscribe(o=>{this.zone.run(()=>r.next(o.data))});return e.onerror=o=>{this.zone.run(()=>r.error(o))},()=>{n.unsubscribe(),e.close()}})}stop(){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0)}static{this.\u0275fac=function(e){return new(e||s)(d.\u0275\u0275inject(d.NgZone))}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();const ee=(s,h)=>new m.Observable(t=>{let e;return(0,M.A)(function*(){const{urlWithParams:n}=s,i=yield caches.open("http"),a=yield i.match(n);if(a){let c;console.log("Serve from Cache for",n);try{c=yield a.clone().json()}catch{c=yield a.clone().text()}return t.next(new P.HttpResponse({body:c,status:a.status||200,url:s.urlWithParams})),void t.complete()}var c;e=h(s).subscribe({next:(c=(0,M.A)(function*(u){if(console.log("Cache miss for ",n),t.next(u),u instanceof P.HttpResponse&&u.ok){const y=new Response(JSON.stringify(u.body),{headers:{"Content-Type":"application/json"},status:u.status,statusText:u.statusText});yield i.put(s.urlWithParams,y)}}),function(y){return c.apply(this,arguments)}),error:c=>t.error(c),complete:()=>t.complete()})})(),()=>e?.unsubscribe()});let V=(()=>{class s{constructor(){this.DEFAULT_BRAND_ID="default",this.STORAGE_KEY="current_brand_id";const t=this.getStoredBrandId();this.brandIdSubject=new m.BehaviorSubject(t),this.brandId$=this.brandIdSubject.asObservable()}getStoredBrandId(){return sessionStorage.getItem(this.STORAGE_KEY)??this.DEFAULT_BRAND_ID}getBrandId(){return this.brandIdSubject.value}setBrandId(t){t?.trim()||(console.warn("[BrandContextService] Invalid brand ID, using default"),t=this.DEFAULT_BRAND_ID),sessionStorage.setItem(this.STORAGE_KEY,t),this.brandIdSubject.next(t),console.log("[BrandContextService] Brand ID updated to:",t)}resetToDefault(){this.setBrandId(this.DEFAULT_BRAND_ID)}clear(){sessionStorage.removeItem(this.STORAGE_KEY),this.brandIdSubject.next(this.DEFAULT_BRAND_ID)}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();const E={baseUrl:"https://7f1m8qlvpd.execute-api.us-east-1.amazonaws.com/db",timeout:3e4},R={health:s=>`/health?brandId=${s}`,info:"/",seed:s=>`/seed/${s}`,clearData:s=>`/data/${s}`,users:{list:s=>`/users/${s}`,getById:(s,h)=>`/users/${s}/${h}`,create:s=>`/users/${s}`},incentiveRules:{list:s=>`/incentive-rules/${s}`,getById:(s,h)=>`/incentive-rules/${s}/${h}`,create:s=>`/incentive-rules/${s}`,update:(s,h)=>`/incentive-rules/${s}/${h}`,delete:(s,h)=>`/incentive-rules/${s}/${h}`},incentives:{list:(s,h)=>{const t=new URLSearchParams;h?.userId&&t.append("userId",h.userId),h?.status&&t.append("status",h.status);const e=t.toString();return`/incentives/${s}${e?"?"+e:""}`},getById:(s,h)=>`/incentives/${s}/${h}`,create:s=>`/incentives/${s}`,update:(s,h)=>`/incentives/${s}/${h}`},targets:{list:(s,h)=>{const t=new URLSearchParams;h?.userId&&t.append("userId",h.userId),h?.status&&t.append("status",h.status);const e=t.toString();return`/targets/${s}${e?"?"+e:""}`},getById:(s,h)=>`/targets/${s}/${h}`,create:s=>`/targets/${s}`,update:(s,h)=>`/targets/${s}/${h}`,delete:(s,h)=>`/targets/${s}/${h}`},tasks:{list:(s,h)=>{const t=new URLSearchParams;h?.userId&&t.append("userId",h.userId),h?.status&&t.append("status",h.status);const e=t.toString();return`/tasks/${s}${e?"?"+e:""}`},getById:(s,h)=>`/tasks/${s}/${h}`,create:s=>`/tasks/${s}`,update:(s,h)=>`/tasks/${s}/${h}`,delete:(s,h)=>`/tasks/${s}/${h}`}},b=(s,h=E)=>`${h.baseUrl}${s}`,f=s=>{Object.assign(E,s)};let v=(()=>{class s{constructor(t,e){this.http=t,this.brandContext=e}getRules(){const t=this.brandContext.getBrandId(),e=R.incentiveRules.list(t),r=b(e);return this.http.get(r).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(n=>n.data),(0,l.catchError)(this.handleError("getRules",[])))}getRuleById(t){if(!this.isValidId(t))return(0,m.of)(null);const e=this.brandContext.getBrandId(),r=R.incentiveRules.getById(e,t),n=b(r);return this.http.get(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("getRuleById",null)))}createRule(t){if(!this.isValidRuleRequest(t))return console.error("[IncentiveRulesApiService] Invalid rule request"),(0,m.of)(null);const e=this.brandContext.getBrandId(),r=R.incentiveRules.create(e),n=b(r);return this.http.post(n,t).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("createRule",null)))}updateRule(t,e){if(!this.isValidId(t))return(0,m.of)(null);const r=this.brandContext.getBrandId(),n=R.incentiveRules.update(r,t),o=b(n);return this.http.put(o,e).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(i=>i.data),(0,l.catchError)(this.handleError("updateRule",null)))}deleteRule(t){if(!this.isValidId(t))return(0,m.of)(!1);const e=this.brandContext.getBrandId(),r=R.incentiveRules.delete(e,t),n=b(r);return this.http.delete(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(()=>!0),(0,l.catchError)(this.handleError("deleteRule",!1)))}isValidId(t){return!!t&&t.trim().length>0}isValidRuleRequest(t){return!!(t.name?.trim()&&t.description?.trim()&&t.type&&"number"==typeof t.value)}handleError(t,e){return r=>{console.error(`[IncentiveRulesApiService] ${t} failed:`,r);const n=this.extractApiError(r);return console.error("[IncentiveRulesApiService] API Error:",n),void 0!==e?(0,m.of)(e):(0,m.throwError)(()=>r)}}extractApiError(t){return t.error&&"object"==typeof t.error?t.error:{error:t.statusText||"Unknown Error",message:t.message||"An unexpected error occurred",statusCode:t.status,timestamp:(new Date).toISOString()}}static{this.\u0275fac=function(e){return new(e||s)(d.\u0275\u0275inject(P.HttpClient),d.\u0275\u0275inject(V))}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),I=(()=>{class s{constructor(t,e){this.http=t,this.brandContext=e}getIncentives(t){const e=this.brandContext.getBrandId(),r=R.incentives.list(e,t),n=b(r);return this.http.get(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("getIncentives",[])))}getIncentiveById(t){if(!this.isValidId(t))return(0,m.of)(null);const e=this.brandContext.getBrandId(),r=R.incentives.getById(e,t),n=b(r);return this.http.get(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("getIncentiveById",null)))}createIncentive(t){if(!this.isValidIncentiveRequest(t))return console.error("[IncentivesApiService] Invalid incentive request"),(0,m.of)(null);const e=this.brandContext.getBrandId(),r=R.incentives.create(e),n=b(r);return this.http.post(n,t).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("createIncentive",null)))}updateIncentive(t,e){if(!this.isValidId(t))return(0,m.of)(null);const r=this.brandContext.getBrandId(),n=R.incentives.update(r,t),o=b(n);return this.http.put(o,e).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(i=>i.data),(0,l.catchError)(this.handleError("updateIncentive",null)))}isValidId(t){return!!t&&t.trim().length>0}isValidIncentiveRequest(t){return!!(t.userId?.trim()&&t.ruleId?.trim()&&"number"==typeof t.amount&&t.earnedDate)}handleError(t,e){return r=>{console.error(`[IncentivesApiService] ${t} failed:`,r);const n=this.extractApiError(r);return console.error("[IncentivesApiService] API Error:",n),void 0!==e?(0,m.of)(e):(0,m.throwError)(()=>r)}}extractApiError(t){return t.error&&"object"==typeof t.error?t.error:{error:t.statusText||"Unknown Error",message:t.message||"An unexpected error occurred",statusCode:t.status,timestamp:(new Date).toISOString()}}static{this.\u0275fac=function(e){return new(e||s)(d.\u0275\u0275inject(P.HttpClient),d.\u0275\u0275inject(V))}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),U=(()=>{class s{constructor(t,e){this.http=t,this.brandContext=e}getTargets(t){const e=this.brandContext.getBrandId(),r=R.targets.list(e,t),n=b(r);return this.http.get(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("getTargets",[])))}getTargetById(t){if(!this.isValidId(t))return(0,m.of)(null);const e=this.brandContext.getBrandId(),r=R.targets.getById(e,t),n=b(r);return this.http.get(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("getTargetById",null)))}createTarget(t){if(!this.isValidTargetRequest(t))return console.error("[TargetsApiService] Invalid target request"),(0,m.of)(null);const e=this.brandContext.getBrandId(),r=R.targets.create(e),n=b(r);return this.http.post(n,t).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("createTarget",null)))}updateTarget(t,e){if(!this.isValidId(t))return(0,m.of)(null);const r=this.brandContext.getBrandId(),n=R.targets.update(r,t),o=b(n);return this.http.put(o,e).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(i=>i.data),(0,l.catchError)(this.handleError("updateTarget",null)))}deleteTarget(t){if(!this.isValidId(t))return(0,m.of)(!1);const e=this.brandContext.getBrandId(),r=R.targets.delete(e,t),n=b(r);return this.http.delete(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(()=>!0),(0,l.catchError)(this.handleError("deleteTarget",!1)))}isValidId(t){return!!t&&t.trim().length>0}isValidTargetRequest(t){return!!(t.userId?.trim()&&t.name?.trim()&&"number"==typeof t.targetValue&&t.unit?.trim()&&t.startDate&&t.endDate)}handleError(t,e){return r=>{console.error(`[TargetsApiService] ${t} failed:`,r);const n=this.extractApiError(r);return console.error("[TargetsApiService] API Error:",n),void 0!==e?(0,m.of)(e):(0,m.throwError)(()=>r)}}extractApiError(t){return t.error&&"object"==typeof t.error?t.error:{error:t.statusText||"Unknown Error",message:t.message||"An unexpected error occurred",statusCode:t.status,timestamp:(new Date).toISOString()}}static{this.\u0275fac=function(e){return new(e||s)(d.\u0275\u0275inject(P.HttpClient),d.\u0275\u0275inject(V))}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),x=(()=>{class s{constructor(t,e){this.http=t,this.brandContext=e}getTasks(t){const e=this.brandContext.getBrandId(),r=R.tasks.list(e,t),n=b(r);return this.http.get(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("getTasks",[])))}getTaskById(t){if(!this.isValidId(t))return(0,m.of)(null);const e=this.brandContext.getBrandId(),r=R.tasks.getById(e,t),n=b(r);return this.http.get(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("getTaskById",null)))}createTask(t){if(!this.isValidTaskRequest(t))return console.error("[TasksApiService] Invalid task request"),(0,m.of)(null);const e=this.brandContext.getBrandId(),r=R.tasks.create(e),n=b(r);return this.http.post(n,t).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(o=>o.data),(0,l.catchError)(this.handleError("createTask",null)))}updateTask(t,e){if(!this.isValidId(t))return(0,m.of)(null);const r=this.brandContext.getBrandId(),n=R.tasks.update(r,t),o=b(n);return this.http.put(o,e).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(i=>i.data),(0,l.catchError)(this.handleError("updateTask",null)))}deleteTask(t){if(!this.isValidId(t))return(0,m.of)(!1);const e=this.brandContext.getBrandId(),r=R.tasks.delete(e,t),n=b(r);return this.http.delete(n).pipe((0,l.timeout)(E.timeout??3e4),(0,l.map)(()=>!0),(0,l.catchError)(this.handleError("deleteTask",!1)))}isValidId(t){return!!t&&t.trim().length>0}isValidTaskRequest(t){return!!(t.userId?.trim()&&t.title?.trim()&&t.priority)}handleError(t,e){return r=>{console.error(`[TasksApiService] ${t} failed:`,r);const n=this.extractApiError(r);return console.error("[TasksApiService] API Error:",n),void 0!==e?(0,m.of)(e):(0,m.throwError)(()=>r)}}extractApiError(t){return t.error&&"object"==typeof t.error?t.error:{error:t.statusText||"Unknown Error",message:t.message||"An unexpected error occurred",statusCode:t.status,timestamp:(new Date).toISOString()}}static{this.\u0275fac=function(e){return new(e||s)(d.\u0275\u0275inject(P.HttpClient),d.\u0275\u0275inject(V))}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();const _=(s,h)=>{const e=(0,d.inject)(L).getToken();return!e||K(s.url)?h(s):h(s.clone({setHeaders:{Authorization:`Bearer ${e}`}}))},K=s=>["/oauth","/auth","zitadel.cloud"].some(t=>s.includes(t))},5766:(ne,$,A)=>{A.r($),A.d($,{getManifest:()=>re,initFederation:()=>H,loadManifest:()=>ee,loadRemoteEntry:()=>N,loadRemoteModule:()=>C,setManifest:()=>q});var d=A(467);let B={};const M={},m={};let P=!1;function F(){return(F=(0,d.A)(function*(f,v){return(yield M[f].get(v))()})).apply(this,arguments)}function k(f,v){return L.apply(this,arguments)}function L(){return(L=(0,d.A)(function*(f,v){return m[v]||(P||(yield A.I("default"),P=!0),yield f.init(A.S.default),m[v]=!0),f})).apply(this,arguments)}function N(f,v){return g.apply(this,arguments)}function g(){return g=(0,d.A)(function*(f,v){if("string"==typeof f)return yield l(f,v);if("script"===f.type){const I=f;return yield l(I.remoteEntry,I.remoteName)}"module"===f.type&&(yield function W(f){return X.apply(this,arguments)}(f.remoteEntry))}),g.apply(this,arguments)}function X(){return(X=(0,d.A)(function*(f){return M[f]?Promise.resolve():yield import(f).then(v=>{k(v,f),M[f]=v})})).apply(this,arguments)}function l(f,v){return D.apply(this,arguments)}function D(){return(D=(0,d.A)(function*(f,v){return new Promise((I,U)=>{if(M[v])return void I();const x=document.createElement("script");x.src=f,x.onerror=U,x.onload=()=>{const _=window[v];k(_,v),M[v]=_,I()},document.body.appendChild(x)})})).apply(this,arguments)}function C(f,v){return J.apply(this,arguments)}function J(){return J=(0,d.A)(function*(f,v){let I,U,x,_;if(_="string"==typeof f?{type:"manifest",remoteName:f,exposedModule:v}:f,!_.type){const K=Object.keys(B).length>0;_.type=K?"manifest":"script"}if("manifest"===_.type){const K=B[_.remoteName];if(!K)throw new Error("Manifest does not contain "+_.remoteName);_={type:K.type,exposedModule:_.exposedModule,remoteEntry:K.remoteEntry,remoteName:"script"===K.type?_.remoteName:void 0},x=K.remoteEntry}else x=_.remoteEntry;return"script"===_.type?(I={type:"script",remoteEntry:_.remoteEntry,remoteName:_.remoteName},U=_.remoteName):"module"===_.type&&(I={type:"module",remoteEntry:_.remoteEntry},U=_.remoteEntry),x&&(yield N(I)),yield function G(f,v){return F.apply(this,arguments)}(U,_.exposedModule)}),J.apply(this,arguments)}function q(f){return Z.apply(this,arguments)}function Z(){return(Z=(0,d.A)(function*(f,v=!1){B=E(f),v||(yield R())})).apply(this,arguments)}function re(){return B}function H(f){return Q.apply(this,arguments)}function Q(){return(Q=(0,d.A)(function*(f,v=!1){return"string"==typeof f?ee(f,v):q(f,v)})).apply(this,arguments)}function ee(f){return V.apply(this,arguments)}function V(){return(V=(0,d.A)(function*(f,v=!1){const I=yield fetch(f);if(!I.ok)throw Error("could not load configFile: "+f);B=E(yield I.json()),v||(yield R())})).apply(this,arguments)}function E(f){const v={};for(const I in f){const U=f[I];let x;x="string"==typeof U?{remoteEntry:U,type:"module"}:{...U,type:U.type||"module"},v[I]=x}return v}function R(){return b.apply(this,arguments)}function b(){return(b=(0,d.A)(function*(){const f=[];for(const v in B){const I=B[v];f.push(N("module"===I.type?{type:"module",remoteEntry:I.remoteEntry}:{type:"script",remoteEntry:I.remoteEntry,remoteName:v}))}yield Promise.all(f)})).apply(this,arguments)}},467:(ne,$,A)=>{function d(M,m,P,G,F,k,L){try{var N=M[k](L),g=N.value}catch(W){return void P(W)}N.done?m(g):Promise.resolve(g).then(G,F)}function B(M){return function(){var m=this,P=arguments;return new Promise(function(G,F){var k=M.apply(m,P);function L(g){d(k,G,F,L,N,"next",g)}function N(g){d(k,G,F,L,N,"throw",g)}L(void 0)})}}A.d($,{A:()=>B})},1635:(ne,$,A)=>{A.r($),A.d($,{__addDisposableResource:()=>_,__assign:()=>M,__asyncDelegator:()=>ee,__asyncGenerator:()=>Q,__asyncValues:()=>V,__await:()=>H,__awaiter:()=>W,__classPrivateFieldGet:()=>I,__classPrivateFieldIn:()=>x,__classPrivateFieldSet:()=>U,__createBinding:()=>l,__decorate:()=>P,__disposeResources:()=>s,__esDecorate:()=>F,__exportStar:()=>D,__extends:()=>B,__generator:()=>X,__importDefault:()=>v,__importStar:()=>f,__makeTemplateObject:()=>E,__metadata:()=>g,__param:()=>G,__propKey:()=>L,__read:()=>J,__rest:()=>m,__rewriteRelativeImportExtension:()=>h,__runInitializers:()=>k,__setFunctionName:()=>N,__spread:()=>q,__spreadArray:()=>re,__spreadArrays:()=>Z,__values:()=>C,default:()=>t});var d=function(e,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])})(e,r)};function B(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}d(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var M=function(){return M=Object.assign||function(r){for(var n,o=1,i=arguments.length;o<i;o++)for(var a in n=arguments[o])Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a]);return r},M.apply(this,arguments)};function m(e,r){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}function P(e,r,n,o){var c,i=arguments.length,a=i<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,n,o);else for(var u=e.length-1;u>=0;u--)(c=e[u])&&(a=(i<3?c(a):i>3?c(r,n,a):c(r,n))||a);return i>3&&a&&Object.defineProperty(r,n,a),a}function G(e,r){return function(n,o){r(n,o,e)}}function F(e,r,n,o,i,a){function c(te){if(void 0!==te&&"function"!=typeof te)throw new TypeError("Function expected");return te}for(var j,u=o.kind,y="getter"===u?"get":"setter"===u?"set":"value",p=!r&&e?o.static?e:e.prototype:null,w=r||(p?Object.getOwnPropertyDescriptor(p,o.name):{}),T=!1,S=n.length-1;S>=0;S--){var O={};for(var z in o)O[z]="access"===z?{}:o[z];for(var z in o.access)O.access[z]=o.access[z];O.addInitializer=function(te){if(T)throw new TypeError("Cannot add initializers after decoration has completed");a.push(c(te||null))};var Y=(0,n[S])("accessor"===u?{get:w.get,set:w.set}:w[y],O);if("accessor"===u){if(void 0===Y)continue;if(null===Y||"object"!=typeof Y)throw new TypeError("Object expected");(j=c(Y.get))&&(w.get=j),(j=c(Y.set))&&(w.set=j),(j=c(Y.init))&&i.unshift(j)}else(j=c(Y))&&("field"===u?i.unshift(j):w[y]=j)}p&&Object.defineProperty(p,o.name,w),T=!0}function k(e,r,n){for(var o=arguments.length>2,i=0;i<r.length;i++)n=o?r[i].call(e,n):r[i].call(e);return o?n:void 0}function L(e){return"symbol"==typeof e?e:"".concat(e)}function N(e,r,n){return"symbol"==typeof r&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",r):r})}function g(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)}function W(e,r,n,o){return new(n||(n=Promise))(function(a,c){function u(w){try{p(o.next(w))}catch(j){c(j)}}function y(w){try{p(o.throw(w))}catch(j){c(j)}}function p(w){w.done?a(w.value):function i(a){return a instanceof n?a:new n(function(c){c(a)})}(w.value).then(u,y)}p((o=o.apply(e,r||[])).next())})}function X(e,r){var o,i,a,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=u(0),c.throw=u(1),c.return=u(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(p){return function(w){return function y(p){if(o)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(o=1,i&&(a=2&p[0]?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[2&p[0],a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===p[0]||2===p[0])){n=0;continue}if(3===p[0]&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(6===p[0]&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=r.call(e,n)}catch(w){p=[6,w],i=0}finally{o=a=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([p,w])}}}var l=Object.create?function(e,r,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(r,n);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,o,i)}:function(e,r,n,o){void 0===o&&(o=n),e[o]=r[n]};function D(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&l(r,e,n)}function C(e){var r="function"==typeof Symbol&&Symbol.iterator,n=r&&e[r],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function J(e,r){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,c,o=n.call(e),a=[];try{for(;(void 0===r||r-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(u){c={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return a}function q(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(J(arguments[r]));return e}function Z(){for(var e=0,r=0,n=arguments.length;r<n;r++)e+=arguments[r].length;var o=Array(e),i=0;for(r=0;r<n;r++)for(var a=arguments[r],c=0,u=a.length;c<u;c++,i++)o[i]=a[c];return o}function re(e,r,n){if(n||2===arguments.length)for(var a,o=0,i=r.length;o<i;o++)(a||!(o in r))&&(a||(a=Array.prototype.slice.call(r,0,o)),a[o]=r[o]);return e.concat(a||Array.prototype.slice.call(r))}function H(e){return this instanceof H?(this.v=e,this):new H(e)}function Q(e,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(e,r||[]),a=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",function c(S){return function(O){return Promise.resolve(O).then(S,j)}}),i[Symbol.asyncIterator]=function(){return this},i;function u(S,O){o[S]&&(i[S]=function(z){return new Promise(function(Y,te){a.push([S,z,Y,te])>1||y(S,z)})},O&&(i[S]=O(i[S])))}function y(S,O){try{!function p(S){S.value instanceof H?Promise.resolve(S.value.v).then(w,j):T(a[0][2],S)}(o[S](O))}catch(z){T(a[0][3],z)}}function w(S){y("next",S)}function j(S){y("throw",S)}function T(S,O){S(O),a.shift(),a.length&&y(a[0][0],a[0][1])}}function ee(e){var r,n;return r={},o("next"),o("throw",function(i){throw i}),o("return"),r[Symbol.iterator]=function(){return this},r;function o(i,a){r[i]=e[i]?function(c){return(n=!n)?{value:H(e[i](c)),done:!1}:a?a(c):c}:a}}function V(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=C(e),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(a){n[a]=e[a]&&function(c){return new Promise(function(u,y){!function i(a,c,u,y){Promise.resolve(y).then(function(p){a({value:p,done:u})},c)}(u,y,(c=e[a](c)).done,c.value)})}}}function E(e,r){return Object.defineProperty?Object.defineProperty(e,"raw",{value:r}):e.raw=r,e}var R=Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r},b=function(e){return(b=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n})(e)};function f(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n=b(e),o=0;o<n.length;o++)"default"!==n[o]&&l(r,e,n[o]);return R(r,e),r}function v(e){return e&&e.__esModule?e:{default:e}}function I(e,r,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof r?e!==r||!o:!r.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:r.get(e)}function U(e,r,n,o,i){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof r?e!==r||!i:!r.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?i.call(e,n):i?i.value=n:r.set(e,n),n}function x(e,r){if(null===r||"object"!=typeof r&&"function"!=typeof r)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?r===e:e.has(r)}function _(e,r,n){if(null!=r){if("object"!=typeof r&&"function"!=typeof r)throw new TypeError("Object expected.");var o,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=r[Symbol.asyncDispose]}if(void 0===o){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=r[Symbol.dispose],n&&(i=o)}if("function"!=typeof o)throw new TypeError("Object not disposable.");i&&(o=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:r,dispose:o,async:n})}else n&&e.stack.push({async:!0});return r}var K="function"==typeof SuppressedError?SuppressedError:function(e,r,n){var o=new Error(n);return o.name="SuppressedError",o.error=e,o.suppressed=r,o};function s(e){function r(a){e.error=e.hasError?new K(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var n,o=0;return function i(){for(;n=e.stack.pop();)try{if(!n.async&&1===o)return o=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(a).then(i,function(c){return r(c),i()})}else o|=1}catch(c){r(c)}if(1===o)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function h(e,r){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,o,i,a,c){return o?r?".jsx":".js":!i||a&&c?i+a+"."+c.toLowerCase()+"js":n}):e}const t={__extends:B,__assign:M,__rest:m,__decorate:P,__param:G,__esDecorate:F,__runInitializers:k,__propKey:L,__setFunctionName:N,__metadata:g,__awaiter:W,__generator:X,__createBinding:l,__exportStar:D,__values:C,__read:J,__spread:q,__spreadArrays:Z,__spreadArray:re,__await:H,__asyncGenerator:Q,__asyncDelegator:ee,__asyncValues:V,__makeTemplateObject:E,__importStar:f,__importDefault:v,__classPrivateFieldGet:I,__classPrivateFieldSet:U,__classPrivateFieldIn:x,__addDisposableResource:_,__disposeResources:s,__rewriteRelativeImportExtension:h}}}]);